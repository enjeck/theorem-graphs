{"version":3,"sources":["src/data.js","src/config.js","node_modules/ngraph.random/index.js","node_modules/ngraph.merge/index.js","node_modules/ngraph.events/index.js","node_modules/vivagraphjs/src/version.js","node_modules/ngraph.graph/index.js","node_modules/ngraph.fromjson/index.js","node_modules/ngraph.tojson/index.js","node_modules/ngraph.centrality/src/degree.js","node_modules/ngraph.centrality/src/betweenness.js","node_modules/ngraph.centrality/src/closeness.js","node_modules/ngraph.centrality/src/eccentricity.js","node_modules/ngraph.centrality/index.js","node_modules/vivagraphjs/src/Algorithms/centrality.js","node_modules/vivagraphjs/src/Algorithms/operations.js","node_modules/gintersect/index.js","node_modules/vivagraphjs/src/Utils/intersectRect.js","node_modules/vivagraphjs/src/WebGL/webgl.js","node_modules/vivagraphjs/src/Utils/nullEvents.js","node_modules/vivagraphjs/src/Utils/documentEvents.js","node_modules/vivagraphjs/src/WebGL/webglInputEvents.js","node_modules/ngraph.generators/node_modules/ngraph.random/index.js","node_modules/ngraph.generators/index.js","node_modules/vivagraphjs/src/Utils/browserInfo.js","node_modules/vivagraphjs/src/Utils/findElementPosition.js","node_modules/vivagraphjs/src/Input/dragndrop.js","node_modules/vivagraphjs/src/Input/domInputManager.js","node_modules/vivagraphjs/src/Input/webglInputManager.js","node_modules/vivagraphjs/src/Utils/timer.js","node_modules/vivagraphjs/src/Utils/getDimensions.js","node_modules/vivagraphjs/src/Utils/backwardCompatibleEvents.js","node_modules/ngraph.physics.simulator/lib/spring.js","node_modules/ngraph.expose/index.js","node_modules/ngraph.quadtreebh/node.js","node_modules/ngraph.quadtreebh/insertStack.js","node_modules/ngraph.quadtreebh/isSamePosition.js","node_modules/ngraph.quadtreebh/index.js","node_modules/ngraph.physics.simulator/lib/bounds.js","node_modules/ngraph.physics.simulator/lib/dragForce.js","node_modules/ngraph.physics.simulator/lib/springForce.js","node_modules/ngraph.physics.simulator/lib/eulerIntegrator.js","node_modules/ngraph.physics.primitives/index.js","node_modules/ngraph.physics.simulator/lib/createBody.js","node_modules/ngraph.physics.simulator/index.js","node_modules/ngraph.forcelayout/node_modules/ngraph.events/index.js","node_modules/ngraph.forcelayout/index.js","node_modules/vivagraphjs/src/Utils/rect.js","node_modules/vivagraphjs/src/Layout/constant.js","node_modules/vivagraphjs/src/WebGL/texture.js","node_modules/vivagraphjs/src/WebGL/webglAtlas.js","node_modules/vivagraphjs/src/WebGL/webglImageNodeProgram.js","node_modules/vivagraphjs/src/WebGL/webglLinkProgram.js","node_modules/vivagraphjs/src/WebGL/webglNodeProgram.js","node_modules/vivagraphjs/src/WebGL/parseColor.js","node_modules/vivagraphjs/src/WebGL/webglLine.js","node_modules/vivagraphjs/src/WebGL/webglSquare.js","node_modules/vivagraphjs/src/WebGL/webglImage.js","node_modules/vivagraphjs/src/View/webglGraphics.js","node_modules/simplesvg/lib/domparser.js","node_modules/simplesvg/lib/compile.js","node_modules/simplesvg/lib/compile_template.js","node_modules/add-event-listener/index.js","node_modules/simplesvg/index.js","node_modules/vivagraphjs/src/View/svgGraphics.js","node_modules/vivagraphjs/src/Utils/windowEvents.js","node_modules/vivagraphjs/src/View/renderer.js","node_modules/vivagraphjs/src/viva.js","src/script.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["list","exports","CONFIG","WIKI_API_BASE","WIKI_API_PARAMS","FUSE_OPTIONS","shouldSort","matchAllTokens","findAllMatches","threshold","location","distance","maxPatternLength","minMatchCharLength","GRAPH_SPRING_LENGTH","DEFAULT","EXTENDED","THRESHOLD","GRAPH_LAYOUT","springCoeff","dragCoeff","gravity","NODE_STYLES","PRIMARY","color","strokeClass","SECONDARY","TEXT_SIZE","NODE_WIDTH_MULTIPLIER","NODE_HEIGHT","REGEX","THEOREM_MATCH","EXTENDED_MATCH","EXCLUDE_COMMON","EXCLUDE_EXTENDED","MESSAGES","LOADING","EMPTY_SEARCH","NO_RESULTS","ERROR_FETCH","_data","require","_config","_vivagraphjs","_interopRequireDefault","e","__esModule","default","_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","toString","call","slice","name","Array","from","test","isArray","n","_regenerator","toStringTag","i","c","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","d","bind","l","done","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","toPrimitive","String","Number","TheoremGraphApp","graph","Viva","Graph","fuse","elements","queryString","canvas","document","createElement","ctx","getContext","font","concat","navigationHistory","currentHistoryIndex","renderer","cache","wikiLinks","Map","relationships","loadCacheFromStorage","_init","_callee","_context","cacheElements","setupSearch","setupSubgraphToggle","setupNavigation","getQueryFromURL","addToHistory","buildGraph","init","stored","localStorage","getItem","parsed","JSON","parse","console","log","size","updateCacheInfo","error","warn","saveCacheToStorage","toStore","entries","timestamp","Date","now","setItem","stringify","cacheInfo","count","innerHTML","getCacheKey","pageName","includeExtended","undefined","clearCache","clear","removeItem","search","querySelector","result","loading","getElementById","subgraphCheckbox","graphDiv","breadcrumb","backBtn","forwardBtn","params","URLSearchParams","window","get","_this","Fuse","addEventListener","performSearch","_this2","_callee2","_context2","clearGraph","_this3","navigateBack","navigateForward","updateNavigationButtons","theoremName","updateBreadcrumb","_navigateBack","_callee3","_context3","navigateToHistoryIndex","_navigateForward","_callee4","_context4","_navigateToHistoryIndex","_callee5","index","newUrl","_context5","replace","history","pushState","_x","_this4","breadcrumbHTML","map","theorem","isCurrent","className","onClick","join","querySelectorAll","item","_ref2","_callee6","_context6","parseInt","target","dataset","_x2","disabled","_navigateToTheorem","_callee7","_context7","navigateToTheorem","_x3","dispose","searchValue","results","resultHTML","_buildGraph","_callee8","_t","_context8","fetchAndRenderGraph","showError","_fetchAndRenderGraph","_callee9","_context9","showEmptyState","showLoading","fetchWikiRelationships","renderGraph","_fetchWikiRelationships","_callee0","_this5","mainLinks","subRelationships","_context0","fetchPageLinks","checked","all","link","fetchSubRelationships","_x4","_fetchPageLinks","_callee1","cacheKey","url","response","data","filteredLinks","_args1","_t2","_context1","has","fetch","ok","Error","status","json","links","filterLinks","set","_x5","excludePage","matchRegex","excludeRegex","excludePageRegex","RegExp","linkText","_fetchSubRelationships","_callee10","parentPage","subLinks","filteredSubLinks","_context10","_x6","_x7","addNode","renderSubgraphMode","renderSimpleMode","initializeRenderer","_this6","branch","mainNode","addLink","_this7","id","text","style","cn","fromId","toId","graphics","createGraphics","layout","createLayout","View","container","run","_this8","svgGraphics","node","isParent","textWidth","measureText","width","g","svg","widthMultiplier","height","yOffset","append","attr","rect","mouseDownPos","isDragging","x","clientX","clientY","dx","dy","Math","sqrt","_ref3","_callee11","_context11","_x8","cursor","placeNode","nodeUI","pos","placeLink","linkUI","fromPos","toPos","pathData","nodeCount","getNodesCount","springLength","Layout","forceDirected","show","message","emptyDiv","textContent","appendChild","app","theoremApp","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","body","remove","stackTrace","innerText","getParents","modules","parents","k","dep","Function","deps","cached","some","cb"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChHA,IAAAC,KAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAC,sBAAA,CAAAH,OAAA;AAA+B,SAAAG,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAG,QAAAC,CAAA,sCAAAD,OAAA,wBAAAE,MAAA,uBAAAA,MAAA,CAAAC,QAAA,aAAAF,CAAA,kBAAAA,CAAA,gBAAAA,CAAA,WAAAA,CAAA,yBAAAC,MAAA,IAAAD,CAAA,CAAAG,WAAA,KAAAF,MAAA,IAAAD,CAAA,KAAAC,MAAA,CAAAG,SAAA,qBAAAJ,CAAA,KAAAD,OAAA,CAAAC,CAAA;AAAA,SAAAK,QAAAT,CAAA,EAAAU,CAAA,QAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAb,CAAA,OAAAY,MAAA,CAAAE,qBAAA,QAAAV,CAAA,GAAAQ,MAAA,CAAAE,qBAAA,CAAAd,CAAA,GAAAU,CAAA,KAAAN,CAAA,GAAAA,CAAA,C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","file":"script.baf0e655.js","sourceRoot":"..","sourcesContent":["  // List of mathematical theorems, inequalities and lemmas\n  // Sourced from\n  // https://en.wikipedia.org/wiki/List_of_theorems\n  // https://en.wikipedia.org/wiki/List_of_lemmas\n  // https://en.wikipedia.org/wiki/List_of_inequalities\n  // https://en.wikipedia.org/wiki/List_of_fundamental_theorems\nvar list = [\n    \"15 and 290 theorems\",\n    \"AF+BG theorem\",\n    \"Abel's binomial theorem\",\n    \"Abel's theorem\",\n    \"Abelian and tauberian theorems\",\n    \"AbelRuffini theorem\",\n    \"Absolute convergence theorem\",\n    \"Acyclic models theorem\",\n    \"Adiabatic theorem\",\n    \"Ahiezer's theorem\",\n    \"AlbertBrauerHasseNoether theorem\",\n    \"AlperinBrauerGorenstein theorem\",\n    \"AmitsurLevitzki theorem\",\n    \"Anderson's theorem\",\n    \"Angle bisector theorem\",\n    \"Anne's theorem\",\n    \"AppellHumbert theorem\",\n    \"Apry's theorem\",\n    \"Arithmetic RiemannRoch theorem\",\n    \"AronszajnSmith theorem\",\n    \"Arrow's impossibility theorem\",\n    \"Artin approximation theorem\",\n    \"ArtinWedderburn theorem\",\n    \"Artstein's theorem\",\n    \"AtiyahBott fixed-point theorem\",\n    \"AtiyahSinger index theorem\",\n    \"Aumann's agreement theorem\",\n    \"Auxiliary polynomial theorem\",\n    \"AxKochen theorem\",\n    \"BEST theorem\",\n    \"BabukaLaxMilgram theorem\",\n    \"Baire category theorem\",\n    \"Balinski's theorem\",\n    \"Banach fixed-point theorem\",\n    \"BanachMazur theorem\",\n    \"BanachStone theorem\",\n    \"Baranyai's theorem\",\n    \"BarbanDavenportHalberstam theorem\",\n    \"Barwise compactness theorem\",\n    \"Basu's theorem\",\n    \"Bayes' theorem\",\n    \"BeauvilleLaszlo theorem\",\n    \"Beck's theorem (geometry)\",\n    \"BeckmanQuarles theorem\",\n    \"BehnkeStein theorem\",\n    \"Beltrami's theorem\",\n    \"BendixsonDulac theorem\",\n    \"BergerKazdan comparison theorem\",\n    \"BerryEssen theorem\",\n    \"Bertrand's ballot theorem\",\n    \"BertrandDiquetPuiseux theorem\",\n    \"Betti's theorem\",\n    \"Bing's recognition theorem\",\n    \"Binomial inverse theorem\",\n    \"Birch's theorem\",\n    \"Birkhoff's ergodic theorem\",\n    \"Birkhoff's theorem (relativity)\",\n    \"BirkhoffGrothendieck theorem\",\n    \"BishopCannings theorem\",\n    \"Bloch's theorem (complex variables)\",\n    \"Blum's speedup theorem\",\n    \"BohrMollerup theorem\",\n    \"BolyaiGerwien theorem\",\n    \"BolzanoWeierstrass theorem\",\n    \"BombieriFriedlanderIwaniec theorem\",\n    \"Bondy's theorem\",\n    \"Bonnet theorem\",\n    \"Boolean prime ideal theorem\",\n    \"Borel fixed-point theorem\",\n    \"BorelCarathodory theorem\",\n    \"BorsukUlam theorem\",\n    \"Bounded convergence theorem\",\n    \"BourbakiWitt theorem\",\n    \"Branching theorem\",\n    \"Brauer's theorem on induced characters\",\n    \"Brauer's three main theorems\",\n    \"BrauerNesbitt theorem\",\n    \"BrauerSuzuki theorem\",\n    \"Brianchon's theorem\",\n    \"Brooks's theorem\",\n    \"Brouwer fixed-point theorem\",\n    \"Brown's representability theorem\",\n    \"Brun's theorem\",\n    \"BrunnMinkowski theorem\",\n    \"Buckingham  theorem\",\n    \"Burnside's theorem\",\n    \"Butterfly theorem\",\n    \"Bcher's theorem\",\n    \"CameronMartin theorem\",\n    \"Cantor's intersection theorem\",\n    \"Cantor's theorem\",\n    \"CantorBernsteinSchroeder theorem\",\n    \"Carathodory's extension theorem\",\n    \"Carathodory's theorem (convex hull)\",\n    \"CarathodoryJacobiLie theorem\",\n    \"Caristi fixed-point theorem\",\n    \"Carlson's theorem\",\n    \"Carnot's theorem (inradius, circumradius)\",\n    \"Cartan's theorems A and B\",\n    \"CartanDieudonn theorem\",\n    \"CartanKuranishi prolongation theorem\",\n    \"Casey's theorem\",\n    \"Castelnuovode Franchis theorem\",\n    \"Cauchy's theorem (geometry)\",\n    \"Cauchy integral theorem\",\n    \"CauchyKowalevski theorem\",\n    \"CayleySalmon theorem\",\n    \"Central limit theorem\",\n    \"Ceva's theorem\",\n    \"Chebotarev's density theorem\",\n    \"Cheng's eigenvalue comparison theorem\",\n    \"Chevalley's structure theorem\",\n    \"ChevalleyWarning theorem\",\n    \"Chinese remainder theorem\",\n    \"Choi's theorem on completely positive maps\",\n    \"ChomskySchtzenberger enumeration theorem\",\n    \"ChoquetBishopde Leeuw theorem\",\n    \"ChurchRosser theorem\",\n    \"Clairaut's theorem\",\n    \"ClarkOcone theorem\",\n    \"Clausius theorem\",\n    \"Clifford's circle theorems\",\n    \"Closed graph theorem\",\n    \"Closed subgroup theorem\",\n    \"Coase theorem\",\n    \"Codd's theorem\",\n    \"Cohen structure theorem\",\n    \"ColemanMandula theorem\",\n    \"Commandino's theorem\",\n    \"Compactness theorem\",\n    \"Compression theorem\",\n    \"ConleyZehnder theorem\",\n    \"Constant chord theorem\",\n    \"Continuous mapping theorem\",\n    \"Convolution theorem\",\n    \"Corners theorem\",\n    \"Courcelle's theorem\",\n    \"Craig's theorem\",\n    \"Cramer's theorem (algebraic curves)\",\n    \"CramrWold theorem\",\n    \"Cramrs decomposition theorem\",\n    \"Crooks fluctuation theorem\",\n    \"Crystallographic restriction theorem\",\n    \"CurtisHedlundLyndon theorem\",\n    \"Cybenko theorem\",\n    \"Danskin's theorem\",\n    \"Darboux's theorem (analysis)\",\n    \"DavenportSchmidt theorem\",\n    \"De Branges's theorem\",\n    \"De BruijnErds theorem (graph theory)\",\n    \"De Finetti's theorem\",\n    \"De Gua's theorem\",\n    \"De Rham's theorem\",\n    \"DenjoyCarleman theorem\",\n    \"Desargues's theorem\",\n    \"DillerDress theorem\",\n    \"Dimension theorem for vector spaces\",\n    \"Dini's theorem\",\n    \"Dinostratus' theorem\",\n    \"Dirac's theorem on chordal graphs\",\n    \"Dirichlet's approximation theorem\",\n    \"Dirichlet's unit theorem\",\n    \"Disintegration theorem\",\n    \"Dominated convergence theorem\",\n    \"Donsker's theorem\",\n    \"Doob's martingale convergence theorems\",\n    \"DoobMeyer decomposition theorem\",\n    \"Dudley's theorem\",\n    \"DunfordPettis theorem\",\n    \"Earnshaw's theorem\",\n    \"Eberleinmulian theorem\",\n    \"Edge-of-the-wedge theorem\",\n    \"Egorov's theorem\",\n    \"EilenbergZilber theorem\",\n    \"Elitzur's theorem\",\n    \"Envelope theorem\",\n    \"Equidistribution theorem\",\n    \"ErdsAnning theorem\",\n    \"ErdsDushnikMiller theorem\",\n    \"ErdsGinzburgZiv theorem\",\n    \"ErdsKoRado theorem\",\n    \"ErdsPsa theorem\",\n    \"ErdsStone theorem\",\n    \"Euclid's theorem\",\n    \"EuclidEuler theorem\",\n    \"Euler's quadrilateral theorem\",\n    \"Euler's theorem\",\n    \"Euler's theorem in geometry\",\n    \"Exchange theorem\",\n    \"Exterior angle theorem\",\n    \"Extreme value theorem\",\n    \"F. and M. Riesz theorem\",\n    \"Faltings's theorem\",\n    \"FarrellMarkushevich theorem\",\n    \"FatouLebesgue theorem\",\n    \"FeitThompson theorem\",\n    \"Fenchel's theorem\",\n    \"Fermat's little theorem\",\n    \"Fermat's last theorem\",\n    \"Fermat's theorem on sums of two squares\",\n    \"Fermat polygonal number theorem\",\n    \"FerreroWashington theorem\",\n    \"Fieller's theorem\",\n    \"FinslerHadwiger theorem\",\n    \"FisherTippettGnedenko theorem\",\n    \"Five circles theorem\",\n    \"Fixed-point theorems in infinite-dimensional spaces\",\n    \"Fluctuation dissipation theorem\",\n    \"Focal subgroup theorem\",\n    \"Foster's theorem\",\n    \"Four color theorem\",\n    \"Fourier inversion theorem\",\n    \"FrakovHelly selection theorem\",\n    \"FreidlinWentzell theorem\",\n    \"Freudenthal suspension theorem\",\n    \"Frobenius determinant theorem\",\n    \"Frobenius theorem (differential topology)\",\n    \"Froda's theorem\",\n    \"Fubini's theorem\",\n    \"Fuchs's theorem\",\n    \"Full employment theorem\",\n    \"FultonHansen connectedness theorem\",\n    \"Fundamental theorem of algebra\",\n    \"Fundamental theorem of arithmetic\",\n    \"Fundamental theorem on homomorphisms\",\n    \"Fundamental theorem of Galois theory\",\n    \"Fry's theorem\",\n    \"Gauss theorem\",\n    \"GaussLucas theorem\",\n    \"GaussWantzel theorem\",\n    \"GelfandNaimark theorem\",\n    \"Geometric mean theorem\",\n    \"Gershgorin circle theorem\",\n    \"Generalized Stokes theorem\",\n    \"Girsanov's theorem\",\n    \"Gleason's theorem\",\n    \"GlivenkoCantelli theorem\",\n    \"Godunov's theorem\",\n    \"GoldbergSachs theorem\",\n    \"Goldstine theorem\",\n    \"GolodShafarevich theorem\",\n    \"Goodstein's theorem\",\n    \"GottesmanKnill theorem\",\n    \"Graph structure theorem\",\n    \"GrauertRiemenschneider vanishing theorem\",\n    \"Green's theorem\",\n    \"Grinberg's theorem\",\n    \"Gromov's compactness theorem (geometry)\",\n    \"Gromov's theorem on groups of polynomial growth\",\n    \"GrossZagier theorem\",\n    \"Grothendieck's connectedness theorem\",\n    \"GrothendieckHirzebruchRiemannRoch theorem\",\n    \"Grunsky's theorem\",\n    \"Grushko theorem\",\n    \"Gdel's completeness theorem\",\n    \"H-cobordism theorem\",\n    \"Haag's theorem\",\n    \"HaagopuszaskiSohnius theorem\",\n    \"Hadamard three-circle theorem\",\n    \"Hadwiger's theorem\",\n    \"Hahn decomposition theorem\",\n    \"HahnBanach theorem\",\n    \"HahnMazurkiewicz theorem\",\n    \"HajnalSzemerdi theorem\",\n    \"Hall's marriage theorem\",\n    \"Hairy ball theorem\",\n    \"Ham sandwich theorem\",\n    \"Hardy's theorem\",\n    \"HardyLittlewood maximal theorem\",\n    \"HardyRamanujan theorem\",\n    \"HarishChandra's regularity theorem\",\n    \"Harnack's curve theorem\",\n    \"HartmanGrobman theorem\",\n    \"Hartogs's theorem\",\n    \"HartogsRosenthal theorem\",\n    \"SchneiderLang theorem\",\n    \"Hasse's theorem on elliptic curves\",\n    \"HasseMinkowski theorem\",\n    \"HeineBorel theorem\",\n    \"HellingerToeplitz theorem\",\n    \"Helly's selection theorem\",\n    \"HellyBray theorem\",\n    \"Helmholtz theorem (classical mechanics)\",\n    \"HerbrandRibet theorem\",\n    \"Hilbert's basis theorem\",\n    \"Hilbert's irreducibility theorem\",\n    \"Hilbert's theorem (differential geometry)\",\n    \"Hilbert projection theorem\",\n    \"HilbertSpeiser theorem\",\n    \"HilleYosida theorem\",\n    \"Hinge theorem\",\n    \"Hirzebruch signature theorem\",\n    \"Hjelmslev's theorem\",\n    \"Hodge index theorem\",\n    \"Holditch's theorem\",\n    \"Holmstrm's theorem\",\n    \"Hurewicz theorem\",\n    \"Hurwitz's automorphisms theorem\",\n    \"Hurwitz's theorem (normed division algebras)\",\n    \"Hlder's theorem\",\n    \"Identity theorem for Riemann surfaces\",\n    \"ImmermanSzelepcsnyi theorem\",\n    \"Increment theorem\",\n    \"Initial value theorem\",\n    \"Integral representation theorem for classical Wiener space\",\n    \"Intercept theorem\",\n    \"Intermediate value theorem\",\n    \"Intersecting secants theorem\",\n    \"Inverse eigenvalues theorem\",\n    \"Ionescu-Tulcea theorem\",\n    \"Isomorphism theorem\",\n    \"Jackson's theorem (queueing theory)\",\n    \"Jacobi's four-square theorem\",\n    \"JacobsonBourbaki theorem\",\n    \"Japanese theorem for concyclic polygons\",\n    \"Jordan's theorem (multiply transitive groups)\",\n    \"Jordan curve theorem\",\n    \"JordanSchur theorem\",\n    \"Joubert's theorem\",\n    \"JurkatRichert theorem\",\n    \"KanamoriMcAloon theorem\",\n    \"Kaplansky's theorem on quadratic forms\",\n    \"KarhunenLove theorem\",\n    \"KatzLang finiteness theorem\",\n    \"Kawasaki's theorem\",\n    \"Kelvin's circulation theorem\",\n    \"Kharitonov's theorem\",\n    \"KillingHopf theorem\",\n    \"Kirchhoff's theorem\",\n    \"Kleene's recursion theorem\",\n    \"KnasterTarski theorem\",\n    \"Kneser's theorem (differential equations)\",\n    \"Kodaira embedding theorem\",\n    \"Koebe 1/4 theorem\",\n    \"Kolmogorov's three-series theorem\",\n    \"KolmogorovArnold representation theorem\",\n    \"KraftMcMillan theorem\",\n    \"KreinMilman theorem\",\n    \"Kronecker's theorem\",\n    \"Krull's principal ideal theorem\",\n    \"Kruskal's tree theorem\",\n    \"KrylovBogolyubov theorem\",\n    \"Kuiper's theorem\",\n    \"KuttaJoukowski theorem\",\n    \"Knig's theorem (set theory)\",\n    \"KvariSsTurn theorem\",\n    \"Kmura's theorem\",\n    \"L-balance theorem\",\n    \"Lafforgue's theorem\",\n    \"Lagrange's four-square theorem\",\n    \"Lagrange's theorem (number theory)\",\n    \"Lagrange inversion theorem\",\n    \"LambekMoser theorem\",\n    \"Landau prime ideal theorem\",\n    \"Lattice theorem\",\n    \"Laurent expansion theorem\",\n    \"LaxMilgram theorem\",\n    \"LaxWendroff theorem\",\n    \"Lebesgue's decomposition theorem\",\n    \"Lebesgue differentiation theorem\",\n    \"LeeYang theorem\",\n    \"Lefschetz fixed-point theorem\",\n    \"Lefschetz theorem on (1,1)-classes\",\n    \"LehmannScheff theorem\",\n    \"LerayHirsch theorem\",\n    \"Lester's theorem\",\n    \"Levitzky's theorem\",\n    \"LickorishWallace theorem\",\n    \"Lie's third theorem\",\n    \"LieKolchin theorem\",\n    \"Lindelf's theorem\",\n    \"LindemannWeierstrass theorem\",\n    \"Linear congruence theorem\",\n    \"Linnik's theorem\",\n    \"LionsLaxMilgram theorem\",\n    \"Liouville's theorem (complex analysis)\",\n    \"Linard's theorem\",\n    \"Lochs's theorem\",\n    \"LoomanMenchoff theorem\",\n    \"Lukacs's proportion-sum independence theorem\",\n    \"Luzin's theorem\",\n    \"Lyapunov's central limit theorem\",\n    \"Lvy's modulus of continuity theorem\",\n    \"Lb's theorem\",\n    \"LwenheimSkolem theorem\",\n    \"MacMahon Master theorem\",\n    \"Mahler's theorem\",\n    \"Malgrange preparation theorem\",\n    \"ManinDrinfeld theorem\",\n    \"Marcinkiewicz theorem\",\n    \"Marginal value theorem\",\n    \"Martingale representation theorem\",\n    \"MasonStothers theorem\",\n    \"Matiyasevich's theorem\",\n    \"Maximal ergodic theorem\",\n    \"Maxwell's theorem\",\n    \"Mazur's control theorem\",\n    \"MazurUlam theorem\",\n    \"Mean value theorem\",\n    \"Mellin inversion theorem\",\n    \"Menger's theorem\",\n    \"Mergelyan's theorem\",\n    \"Mertens's theorems\",\n    \"Meusnier's theorem\",\n    \"Mihilescu's theorem\",\n    \"MillikenTaylor theorem\",\n    \"Min-max theorem\",\n    \"Minkowski's second theorem\",\n    \"MinkowskiHlawka theorem\",\n    \"Miquel's theorem\",\n    \"Mitchell's embedding theorem\",\n    \"ModiglianiMiller theorem\",\n    \"Modularity theorem\",\n    \"Monge's theorem\",\n    \"Monotone class theorem\",\n    \"Montel's theorem\",\n    \"MordellWeil theorem\",\n    \"Morera's theorem\",\n    \"Morley's categoricity theorem\",\n    \"Morton's theorem\",\n    \"Mountain pass theorem\",\n    \"Multinomial theorem\",\n    \"Multiplicity-one theorem\",\n    \"Mutual fund separation theorem\",\n    \"Myers theorem\",\n    \"MyhillNerode theorem\",\n    \"Nachbin's theorem\",\n    \"Nagata's compactification theorem\",\n    \"NagellLutz theorem\",\n    \"Nash embedding theorem\",\n    \"NewlanderNiremberg theorem\",\n    \"Newton's theorem about ovals\",\n    \"Nielsen fixed-point theorem\",\n    \"NielsenSchreier theorem\",\n    \"No-broadcast theorem\",\n    \"No-communication theorem\",\n    \"No-trade theorem\",\n    \"No wandering domain theorem\",\n    \"Noether's theorem\",\n    \"Noisy channel coding theorem\",\n    \"Norton's theorem\",\n    \"Novikov's compact leaf theorem\",\n    \"NyquistShannon sampling theorem\",\n    \"Open mapping theorem (complex analysis)\",\n    \"Optical equivalence theorem\",\n    \"Orbit-stabilizer theorem\",\n    \"Ore's theorem\",\n    \"OrliczPettis theorem\",\n    \"Oseledec theorem\",\n    \"OsterwalderSchrader theorem\",\n    \"OstrowskiHadamard gap theorem\",\n    \"PCP theorem\",\n    \"PaleyWiener theorem\",\n    \"Pappus's area theorem\",\n    \"Pappus's hexagon theorem\",\n    \"ParisHarrington theorem\",\n    \"Parseval's theorem\",\n    \"Pascal's theorem\",\n    \"Peano existence theorem\",\n    \"Peixoto's theorem\",\n    \"PenroseHawking singularity theorems\",\n    \"Perfect graph theorem\",\n    \"Perpendicular axis theorem\",\n    \"PeterWeyl theorem\",\n    \"PhragmnLindelf theorem\",\n    \"PicardLindelf theorem\",\n    \"PickandsBalkemade Haan theorem\",\n    \"Pitot theorem\",\n    \"Planar separator theorem\",\n    \"Plancherel theorem for spherical functions\",\n    \"Poincar recurrence theorem\",\n    \"PoincarBirkhoffWitt theorem\",\n    \"Poisson limit theorem\",\n    \"Pompeiu's theorem\",\n    \"Poncelet's closure theorem\",\n    \"Positive energy theorem\",\n    \"Poynting's theorem\",\n    \"Prime number theorem\",\n    \"Principal axis theorem\",\n    \"Prokhorov's theorem\",\n    \"Proth's theorem\",\n    \"Pseudorandom generator theorem\",\n    \"Pythagorean theorem\",\n    \"Quantum threshold theorem\",\n    \"QuillenSuslin theorem\",\n    \"Rademacher's theorem\",\n    \"RadonNikodym theorem\",\n    \"Raikov's theorem\",\n    \"Ramanujam vanishing theorem\",\n    \"Ramsey's theorem\",\n    \"RaoBlackwell theorem\",\n    \"Rationality theorem\",\n    \"Rauch comparison theorem\",\n    \"Reeb sphere theorem\",\n    \"Reflection theorem\",\n    \"Reider's theorem\",\n    \"Residue theorem\",\n    \"Reversed compound agent theorem\",\n    \"Ribet's theorem\",\n    \"RiceShapiro theorem\",\n    \"Riemann's existence theorem\",\n    \"Riemann mapping theorem\",\n    \"Riemann singularity theorem\",\n    \"RiemannRoch theorem\",\n    \"RiemannRoch theorem for surfaces\",\n    \"Riesz representation theorem\",\n    \"RieszThorin theorem\",\n    \"Robbins theorem\",\n    \"RobertsonSeymour theorem\",\n    \"Robinson's joint consistency theorem\",\n    \"Rolle's theorem\",\n    \"Rouch's theorem\",\n    \"Routh's theorem\",\n    \"Runge's theorem\",\n    \"Ryll-Nardzewski fixed-point theorem\",\n    \"S-cobordism theorem\",\n    \"Sahlqvist correspondence theorem\",\n    \"Sard's theorem\",\n    \"Savitch's theorem\",\n    \"Schaefer's dichotomy theorem\",\n    \"Schilder's theorem\",\n    \"Schreier refinement theorem\",\n    \"SchrderBernstein theorems for operator algebras\",\n    \"Schur's theorem\",\n    \"SchurZassenhaus theorem\",\n    \"SchwartzZippel theorem\",\n    \"Schwenk's theorem\",\n    \"Seifertvan Kampen theorem\",\n    \"Separating axis theorem\",\n    \"Shannon's source coding theorem\",\n    \"Shell theorem\",\n    \"ShirshovCohn theorem\",\n    \"SiegelWalfisz theorem\",\n    \"Simplicial approximation theorem\",\n    \"Sinkhorn's theorem\",\n    \"SipserLautemann theorem\",\n    \"Six circles theorem\",\n    \"o' theorem\",\n    \"Six exponentials theorem\",\n    \"SkodaEl Mir theorem\",\n    \"SkolemNoether theorem\",\n    \"Skorokhod's representation theorem\",\n    \"Smn theorem\",\n    \"Sobolev embedding theorem\",\n    \"SonnenscheinMantelDebreu Theorem\",\n    \"Soul theorem\",\n    \"Space hierarchy theorem\",\n    \"Spectral theorem\",\n    \"Sphere theorem\",\n    \"Spinstatistics theorem\",\n    \"Squeeze theorem\",\n    \"Stallings theorem about ends of groups\",\n    \"Stanley's reciprocity theorem\",\n    \"StarkHeegner theorem\",\n    \"Steinhaus theorem\",\n    \"SteinStrmberg theorem\",\n    \"Stinespring factorization theorem\",\n    \"Stokes' theorem\",\n    \"StolperSamuelson theorem\",\n    \"Stone's representation theorem for Boolean algebras\",\n    \"StoneTukey theorem\",\n    \"Stonevon Neumann theorem\",\n    \"Strong perfect graph theorem\",\n    \"Structure theorem for finitely generated modules over a principal ideal domain\",\n    \"Structured program theorem\",\n    \"SturmPicone comparison theorem\",\n    \"Supporting hyperplane theorem\",\n    \"Sylow theorems\",\n    \"Sylvester's determinant theorem\",\n    \"Sylvester pentahedral theorem\",\n    \"Symmetric hypergraph theorem\",\n    \"Sz.-Nagy's dilation theorem\",\n    \"Szemerdi's theorem\",\n    \"Szpilrajn extension theorem\",\n    \"Takens's theorem\",\n    \"Tangent-secant theorem\",\n    \"Tarski's indefinability theorem\",\n    \"TaylorProudman theorem\",\n    \"Thales's theorem\",\n    \"Thompson transitivity theorem\",\n    \"Thomsen's theorem\",\n    \"ThueSiegelRoth theorem\",\n    \"Thvenin's theorem\",\n    \"Tijdeman's theorem\",\n    \"Tikhonov fixed-point theorem\",\n    \"Titchmarsh convolution theorem\",\n    \"Toda's theorem\",\n    \"Tonelli's theorem (functional analysis)\",\n    \"Toponogov's theorem\",\n    \"Trichotomy theorem\",\n    \"TrombiVaradarajan theorem\",\n    \"Tsen's theorem\",\n    \"Turn's theorem\",\n    \"Tutte theorem\",\n    \"Ugly duckling theorem\",\n    \"Universal approximation theorem\",\n    \"Unmixedness theorem\",\n    \"Van Aubel's theorem\",\n    \"Van der Waerden's theorem\",\n    \"Varignon's theorem\",\n    \"VietorisBegle mapping theorem\",\n    \"Virial theorem\",\n    \"Vitali convergence theorem\",\n    \"VitaliHahnSaks theorem\",\n    \"Von Neumann's theorem\",\n    \"Von Neumann bicommutant theorem\",\n    \"Wagner's theorem\",\n    \"Weber's theorem\",\n    \"Wedderburn's little theorem\",\n    \"Weierstrass preparation theorem\",\n    \"WeinbergWitten theorem\",\n    \"Whitehead theorem\",\n    \"Whitney embedding theorem\",\n    \"Whitney immersion theorem\",\n    \"Wiener's tauberian theorem\",\n    \"WignerEckart theorem\",\n    \"Wilson's theorem\",\n    \"Wold's theorem\",\n    \"Wolstenholme's theorem\",\n    \"ZJ theorem\",\n    \"Zariski's main theorem\",\n    \"ZeilbergerBressoud theorem\",\n    \"leszyskiPringsheim theorem\",\n    \"Birkhoff's representation theorem\",\n    \"Fundamental theorem of Riemannian geometry\",\n    \"Fundamental theorem of algebraic K-theory\",\n    \"Fundamental theorem of curves\",\n    \"Fundamental theorem of exterior calculus\",\n    \"Fundamental theorem of ideal theory in number fields\",\n    \"Fundamental theorem of linear programming\",\n    \"Fundamental theorem of projective geometry\",\n    \"Fundamental theorem of topos theory\",\n    \"Fundamental theorem on homomorphisms\",\n    \"GlivenkoCantelli theorem\",\n    \"HammersleyClifford theorem\",\n    \"Main theorem of elimination theory\",\n    \"Structure theorem for finitely generated modules over a principal ideal domain\",\n    \"Abhyankar's lemma\",\n    \"ArtinRees lemma\",\n    \"Berge's lemma\",\n    \"BorelCantelli lemma\",\n    \"Burnside's lemma\",\n    \"CotlarStein lemma\",\n    \"Covering lemma\",\n    \"Ca's lemma\",\n    \"Delta lemma\",\n    \"Dickson's lemma\",\n    \"DoobDynkin lemma\",\n    \"Ehrling's lemma\",\n    \"EllisNumakura lemma\",\n    \"Euclid's lemma\",\n    \"Expander mixing lemma\",\n    \"Farkas's lemma\",\n    \"Finsler's lemma\",\n    \"Five lemma\",\n    \"Fixed-point lemma for normal functions\",\n    \"Fodor's lemma\",\n    \"Frostman's lemma\",\n    \"Fundamental lemma (Langlands program)\",\n    \"Fundamental lemma of sieve theory\",\n    \"GlivenkoCantelli lemma\",\n    \"Hartogs's lemma\",\n    \"Higman's lemma\",\n    \"Hopf lemma\",\n    \"Hotelling's lemma\",\n    \"It's lemma\",\n    \"JohnsonLindenstrauss lemma\",\n    \"KalmanYakubovichPopov lemma\",\n    \"KnasterKuratowskiMazurkiewicz lemma\",\n    \"Kronecker's lemma\",\n    \"Krull's separation lemma\",\n    \"LaxMilgram lemma\",\n    \"Lebesgue's number lemma\",\n    \"Lindelf's lemma\",\n    \"Little's lemma\",\n    \"Lovsz local lemma\",\n    \"Malliavin's absolute continuity lemma\",\n    \"Matrix determinant lemma\",\n    \"Moschovakis coding lemma\",\n    \"Nakayama lemma\",\n    \"NeymanPearson lemma\",\n    \"Noether's normalization lemma\",\n    \"Ogden's lemma\",\n    \"Piling-up lemma\",\n    \"Poincar lemma\",\n    \"Prime avoidance lemma\",\n    \"Pugh's closing lemma\",\n    \"PlyaBurnside lemma\",\n    \"RasiowaSikorski lemma\",\n    \"RiemannLebesgue lemma\",\n    \"Robbins lemma\",\n    \"Schanuel's lemma\",\n    \"Schreier's subgroup lemma\",\n    \"SchwartzZippel lemma and testing polynomial identities\",\n    \"Shadowing lemma\",\n    \"Short five lemma\",\n    \"Snake lemma\",\n    \"Splitting lemma\",\n    \"Stechkin's lemma\",\n    \"StewartWalker lemma\",\n    \"Switching lemma\",\n    \"Szemerdi regularity lemma\",\n    \"Tube lemma\",\n    \"Ultrafilter lemma\",\n    \"Vaughan's lemma\",\n    \"Vitali covering lemma\",\n    \"Watson's lemma\",\n    \"Whitehead's lemma\",\n    \"Yao's XOR lemma\",\n    \"Yoneda lemma\",\n    \"Zolotarev's lemma\",\n    \"Abel's inequality\",\n    \"Agmon's inequality\",\n    \"AlexandrovFenchel inequality\",\n    \"Aristarchus's inequality\",\n    \"Azuma's inequality\",\n    \"Barrow's inequality\",\n    \"Bell's theorem\",\n    \"Bennett's inequality\",\n    \"BergerKazdan comparison theorem\",\n    \"Bernstein's inequality (mathematical analysis)\",\n    \"Bessel's inequality\",\n    \"BihariLaSalle inequality\",\n    \"BishopGromov inequality\",\n    \"BlaschkeSantal inequality\",\n    \"Bonnesen's inequality\",\n    \"Boole's inequality\",\n    \"BorellBrascampLieb inequality\",\n    \"BrascampLieb inequality\",\n    \"BrezisGallouet inequality\",\n    \"CHSH inequality\",\n    \"Carleman's inequality\",\n    \"CauchySchwarz inequality\",\n    \"Chebyshev's inequality\",\n    \"Chebyshev's sum inequality\",\n    \"Cheng's eigenvalue comparison theorem\",\n    \"ChungErds inequality\",\n    \"ClausiusDuhem inequality\",\n    \"Cohn-Vossen's inequality\",\n    \"Comparison theorem\",\n    \"Correlation inequality\",\n    \"Doob's martingale inequality\",\n    \"Eaton's inequality\",\n    \"Entropy power inequality\",\n    \"Etemadi's inequality\",\n    \"FKG inequality\",\n    \"FannesAudenaert inequality\",\n    \"FeketeSzeg inequality\",\n    \"Fisher's inequality\",\n    \"GagliardoNirenberg interpolation inequality\",\n    \"Gaussian correlation inequality\",\n    \"GaussMarkov theorem\",\n    \"Gibbs's inequality\",\n    \"GoldenThompson inequality\",\n    \"Gromov's inequality for complex projective space\",\n    \"Grothendieck inequality\",\n    \"Grnwall's inequality\",\n    \"Hadamard's inequality\",\n    \"Hardy's inequality\",\n    \"HardyLittlewood maximal inequality\",\n    \"Harnack's inequality\",\n    \"Heisenberg's inequality\",\n    \"Hilbert's inequality\",\n    \"HitchinThorpe inequality\",\n    \"Holley inequality\",\n    \"Ingleton's inequality\",\n    \"Jackson's inequality\",\n    \"Jordan's inequality\",\n    \"Kantorovich inequality\",\n    \"Khintchine inequality\",\n    \"Korn's inequality\",\n    \"KunitaWatanabe inequality\",\n    \"Ladyzhenskaya's inequality\",\n    \"Large sieve inequality\",\n    \"LebedevMilin inequality\",\n    \"Lenglart's inequality\",\n    \"LiebThirring inequality\",\n    \"Littlewood's 4/3 inequality\",\n    \"Loewner's torus inequality\",\n    \"LoomisWhitney inequality\",\n    \"LubellYamamotoMeshalkin inequality\",\n    \"Mahler's inequality\",\n    \"MarcinkiewiczZygmund inequality\",\n    \"Markov brothers' inequality\",\n    \"Maxmin inequality\",\n    \"Milman's reverse BrunnMinkowski inequality\",\n    \"Minkowski's first inequality for convex bodies\",\n    \"Muirhead's inequality\",\n    \"Nesbitt's inequality\",\n    \"Noether inequality\",\n    \"Ono's inequality\",\n    \"Pedoe's inequality\",\n    \"Pinsker's inequality\",\n    \"Poincar inequality\",\n    \"Poincar separation theorem\",\n    \"Popoviciu's inequality on variances\",\n    \"PrkopaLeindler inequality\",\n    \"Pu's inequality\",\n    \"PlyaVinogradov inequality\",\n    \"RayleighFaberKrahn inequality\",\n    \"Remez inequality\",\n    \"Riemannian Penrose inequality\",\n    \"Rushbrooke inequality\",\n    \"Schur's inequality\",\n    \"Shapiro inequality\",\n    \"Sobolev inequality\",\n    \"Steffensen's inequality\",\n    \"Stochastic Gronwall inequality\",\n    \"SylvesterGallai theorem\",\n    \"Talagrand's concentration inequality\",\n    \"Toponogov's theorem\",\n    \"Triangle inequality\",\n    \"Tsirelson's inequality\",\n    \"TurnKubilius inequality\",\n    \"Vitale's random BrunnMinkowski inequality\",\n    \"VysochanskiPetunin inequality\",\n    \"Weyl's inequality\",\n    \"Wirtinger inequality (2-forms)\",\n    \"Young's convolution inequality\",\n    \"ojasiewicz inequality\",\n    \"Hoffman-Wielandt inequality\",\n    \"Emery's inequality\",\n  ];\n\n  export var list;","export const CONFIG = {\n  WIKI_API_BASE: 'https://en.wikipedia.org/w/api.php',\n  WIKI_API_PARAMS: 'format=json&origin=*&action=parse&prop=links&redirects',\n\n  FUSE_OPTIONS: {\n    shouldSort: true,\n    matchAllTokens: true,\n    findAllMatches: true,\n    threshold: 0.4,\n    location: 0,\n    distance: 100,\n    maxPatternLength: 32,\n    minMatchCharLength: 1,\n  },\n\n  GRAPH_SPRING_LENGTH: {\n    DEFAULT: 600,\n    EXTENDED: 900,\n    THRESHOLD: 4,\n  },\n\n  GRAPH_LAYOUT: {\n    springCoeff: 0.0008,\n    dragCoeff: 0.02,\n    gravity: -10.2,\n  },\n\n  NODE_STYLES: {\n    PRIMARY: {\n      color: 'red',\n      strokeClass: 'red-stroke',\n    },\n    SECONDARY: {\n      color: 'gray',\n      strokeClass: 'gray-stroke',\n    },\n  },\n\n  TEXT_SIZE: 20,\n  NODE_WIDTH_MULTIPLIER: 2.2,\n  NODE_HEIGHT: 40,\n\n  REGEX: {\n    // Match theorem-related terms\n    THEOREM_MATCH: /([\\w\\s]+(theorem|lemma|correspondence))/gi,\n    EXTENDED_MATCH: /([\\w\\s]+(theorem|algorithm|lemma|inequality|conjecture|axiom|corollary|correspondence))/gi,\n\n    // Exclude unwanted terms\n    EXCLUDE_COMMON: /(proof|fiction|disambiguation|introduction|book|theorems|prove|proving|metatheorem|math|template|talk|theory\\))/gi,\n    EXCLUDE_EXTENDED: /(proof|fiction|disambiguation|list|analysis of|method of|introduction|book|metatheorem|theorems|template|prove|proving|math|talk|theory\\))/gi,\n  },\n\n  MESSAGES: {\n    LOADING: 'Fetching data...',\n    EMPTY_SEARCH: 'Visualizations of theorem relationships using graphs.',\n    NO_RESULTS: 'No relationships found',\n    ERROR_FETCH: 'Error fetching data. Please try again.',\n  },\n};","module.exports = {\n  random: random,\n  randomIterator: randomIterator\n};\n\n/**\n * Creates seeded PRNG with two methods:\n *   next() and nextDouble()\n */\nfunction random(inputSeed) {\n  var seed = typeof inputSeed === 'number' ? inputSeed : (+ new Date());\n  var randomFunc = function() {\n      // Robert Jenkins' 32 bit integer hash function.\n      seed = ((seed + 0x7ed55d16) + (seed << 12))  & 0xffffffff;\n      seed = ((seed ^ 0xc761c23c) ^ (seed >>> 19)) & 0xffffffff;\n      seed = ((seed + 0x165667b1) + (seed << 5))   & 0xffffffff;\n      seed = ((seed + 0xd3a2646c) ^ (seed << 9))   & 0xffffffff;\n      seed = ((seed + 0xfd7046c5) + (seed << 3))   & 0xffffffff;\n      seed = ((seed ^ 0xb55a4f09) ^ (seed >>> 16)) & 0xffffffff;\n      return (seed & 0xfffffff) / 0x10000000;\n  };\n\n  return {\n      /**\n       * Generates random integer number in the range from 0 (inclusive) to maxValue (exclusive)\n       *\n       * @param maxValue Number REQUIRED. Ommitting this number will result in NaN values from PRNG.\n       */\n      next : function (maxValue) {\n          return Math.floor(randomFunc() * maxValue);\n      },\n\n      /**\n       * Generates random double number in the range from 0 (inclusive) to 1 (exclusive)\n       * This function is the same as Math.random() (except that it could be seeded)\n       */\n      nextDouble : function () {\n          return randomFunc();\n      }\n  };\n}\n\n/*\n * Creates iterator over array, which returns items of array in random order\n * Time complexity is guaranteed to be O(n);\n */\nfunction randomIterator(array, customRandom) {\n    var localRandom = customRandom || random();\n    if (typeof localRandom.next !== 'function') {\n      throw new Error('customRandom does not match expected API: next() function is missing');\n    }\n\n    return {\n        forEach : function (callback) {\n            var i, j, t;\n            for (i = array.length - 1; i > 0; --i) {\n                j = localRandom.next(i + 1); // i inclusive\n                t = array[j];\n                array[j] = array[i];\n                array[i] = t;\n\n                callback(t);\n            }\n\n            if (array.length) {\n                callback(array[0]);\n            }\n        },\n\n        /**\n         * Shuffles array randomly, in place.\n         */\n        shuffle : function () {\n            var i, j, t;\n            for (i = array.length - 1; i > 0; --i) {\n                j = localRandom.next(i + 1); // i inclusive\n                t = array[j];\n                array[j] = array[i];\n                array[i] = t;\n            }\n\n            return array;\n        }\n    };\n}\n","module.exports = merge;\n\n/**\n * Augments `target` with properties in `options`. Does not override\n * target's properties if they are defined and matches expected type in \n * options\n *\n * @returns {Object} merged object\n */\nfunction merge(target, options) {\n  var key;\n  if (!target) { target = {}; }\n  if (options) {\n    for (key in options) {\n      if (options.hasOwnProperty(key)) {\n        var targetHasIt = target.hasOwnProperty(key),\n            optionsValueType = typeof options[key],\n            shouldReplace = !targetHasIt || (typeof target[key] !== optionsValueType);\n\n        if (shouldReplace) {\n          target[key] = options[key];\n        } else if (optionsValueType === 'object') {\n          // go deep, don't care about loops here, we are simple API!:\n          target[key] = merge(target[key], options[key]);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n","module.exports = function(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","// todo: this should be generated at build time.\nmodule.exports = '0.10.1';\n","/**\n * @fileOverview Contains definition of the core graph object.\n */\n\n// TODO: need to change storage layer:\n// 1. Be able to get all nodes O(1)\n// 2. Be able to get number of links O(1)\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates a new graph\n */\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n  if ('uniqueLinkId' in options) {\n    console.warn(\n      'ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\n' +\n      'Use `multigraph` option instead\\n',\n      '\\n',\n      'Note: there is also change in default behavior: From now own each graph\\n'+\n      'is considered to be not a multigraph by default (each edge is unique).'\n    );\n\n    options.multigraph = options.uniqueLinkId;\n  }\n\n  // Dear reader, the non-multigraphs do not guarantee that there is only\n  // one link for a given pair of node. When this option is set to false\n  // we can save some memory and CPU (18% faster for non-multigraph);\n  if (options.multigraph === undefined) options.multigraph = false;\n\n  var nodes = typeof Object.create === 'function' ? Object.create(null) : {},\n    links = [],\n    // Hash of multi-edges. Used to track ids of edges between same nodes\n    multiEdges = {},\n    nodesCount = 0,\n    suspendEvents = 0,\n\n    forEachNode = createNodeIterator(),\n    createLink = options.multigraph ? createUniqueLink : createSingleLink,\n\n    // Our graph API provides means to listen to graph changes. Users can subscribe\n    // to be notified about changes in the graph by using `on` method. However\n    // in some cases they don't use it. To avoid unnecessary memory consumption\n    // we will not record graph changes until we have at least one subscriber.\n    // Code below supports this optimization.\n    //\n    // Accumulates all changes made during graph updates.\n    // Each change element contains:\n    //  changeType - one of the strings: 'add', 'remove' or 'update';\n    //  node - if change is related to node this property is set to changed graph's node;\n    //  link - if change is related to link this property is set to changed graph's link;\n    changes = [],\n    recordLinkChange = noop,\n    recordNodeChange = noop,\n    enterModification = noop,\n    exitModification = noop;\n\n  // this is our public API:\n  var graphPart = {\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodesCount: function () {\n      return nodesCount;\n    },\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinksCount: function () {\n      return links.length;\n    },\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Array of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonim for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Detects whether there is a node with given id\n     * \n     * Operation complexity is O(1)\n     * NOTE: this function is synonim for getNode()\n     *\n     * @returns node if there is one; Falsy value otherwise.\n     */\n    hasNode: getNode,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    getLink: getLink\n  };\n\n  // this will add `on()` and `fire()` methods.\n  eventify(graphPart);\n\n  monitorSubscribers();\n\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on;\n\n    // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal;\n\n      // this will replace current `on` method with real pub/sub from `eventify`.\n      graphPart.on = realOn;\n      // delegate to real `on` handler:\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n\n    var node = getNode(nodeId);\n    if (!node) {\n      node = new Node(nodeId, data);\n      nodesCount++;\n      recordNodeChange(node, 'add');\n    } else {\n      node.data = data;\n      recordNodeChange(node, 'update');\n    }\n\n    nodes[nodeId] = node;\n\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes[nodeId];\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n\n    var prevLinks = node.links;\n    if (prevLinks) {\n      node.links = null;\n      for(var i = 0; i < prevLinks.length; ++i) {\n        removeLink(prevLinks[i]);\n      }\n    }\n\n    delete nodes[nodeId];\n    nodesCount--;\n\n    recordNodeChange(node, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n\n    var link = createLink(fromId, toId, data);\n\n    links.push(link);\n\n    // TODO: this is not cool. On large graphs potentially would consume more memory.\n    addLinkToNode(fromNode, link);\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, 'add');\n\n    exitModification();\n\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Get rid of this method.\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n      var suffix = '@' + (++multiEdges[linkId]);\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link) {\n    if (!link) {\n      return false;\n    }\n    var idx = indexOfElementInArray(link, links);\n    if (idx < 0) {\n      return false;\n    }\n\n    enterModification();\n\n    links.splice(idx, 1);\n\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      idx = indexOfElementInArray(link, fromNode.links);\n      if (idx >= 0) {\n        fromNode.links.splice(idx, 1);\n      }\n    }\n\n    if (toNode) {\n      idx = indexOfElementInArray(link, toNode.links);\n      if (idx >= 0) {\n        toNode.links.splice(idx, 1);\n      }\n    }\n\n    recordLinkChange(link, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    // TODO: Use sorted links to speed this up\n    var node = getNode(fromNodeId),\n      i;\n    if (!node || !node.links) {\n      return null;\n    }\n\n    for (i = 0; i < node.links.length; ++i) {\n      var link = node.links[i];\n      if (link.fromId === fromNodeId && link.toId === toNodeId) {\n        return link;\n      }\n    }\n\n    return null; // no link.\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function(node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    var i, length;\n    if (typeof callback === 'function') {\n      for (i = 0, length = links.length; i < length; ++i) {\n        callback(links[i]);\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n\n      quitFast = callback(nodes[linkedNodeId], link);\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n    }\n  }\n\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes[link.toId], link);\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n    }\n  }\n\n  // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n  function noop() {}\n\n  // Enter, Exit modification allows bulk graph updates without firing events.\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function createNodeIterator() {\n    // Object.keys iterator is 1.3x faster than `for in` loop.\n    // See `https://github.com/anvaka/ngraph.graph/tree/bench-for-in-vs-obj-keys`\n    // branch for perf test\n    return Object.keys ? objectKeysIterator : forInIterator;\n  }\n\n  function objectKeysIterator(callback) {\n    if (typeof callback !== 'function') {\n      return;\n    }\n\n    var keys = Object.keys(nodes);\n    for (var i = 0; i < keys.length; ++i) {\n      if (callback(nodes[keys[i]])) {\n        return true; // client doesn't want to proceed. Return.\n      }\n    }\n  }\n\n  function forInIterator(callback) {\n    if (typeof callback !== 'function') {\n      return;\n    }\n    var node;\n\n    for (node in nodes) {\n      if (callback(nodes[node])) {\n        return true; // client doesn't want to proceed. Return.\n      }\n    }\n  }\n}\n\n// need this for old browsers. Should this be a separate module?\nfunction indexOfElementInArray(element, array) {\n  if (!array) return -1;\n\n  if (array.indexOf) {\n    return array.indexOf(element);\n  }\n\n  var len = array.length,\n    i;\n\n  for (i = 0; i < len; i += 1) {\n    if (array[i] === element) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * Internal structure to represent node;\n */\nfunction Node(id, data) {\n  this.id = id;\n  this.links = null;\n  this.data = data;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.push(link);\n  } else {\n    node.links = [link];\n  }\n}\n\n/**\n * Internal structure to represent links;\n */\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction hashCode(str) {\n  var hash = 0, i, chr, len;\n  if (str.length == 0) return hash;\n  for (i = 0, len = str.length; i < len; i++) {\n    chr   = str.charCodeAt(i);\n    hash  = ((hash << 5) - hash) + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return fromId.toString() + ' ' + toId.toString();\n}\n","module.exports = load;\n\nvar createGraph = require('ngraph.graph');\n\nfunction load(jsonGraph, nodeTransform, linkTransform) {\n  var stored;\n  nodeTransform = nodeTransform || id;\n  linkTransform = linkTransform || id;\n  if (typeof jsonGraph === 'string') {\n    stored = JSON.parse(jsonGraph);\n  } else {\n    stored = jsonGraph;\n  }\n\n  var graph = createGraph(),\n      i;\n\n  if (stored.links === undefined || stored.nodes === undefined) {\n    throw new Error('Cannot load graph without links and nodes');\n  }\n\n  for (i = 0; i < stored.nodes.length; ++i) {\n    var parsedNode = nodeTransform(stored.nodes[i]);\n    if (!parsedNode.hasOwnProperty('id')) {\n      throw new Error('Graph node format is invalid: Node id is missing');\n    }\n\n    graph.addNode(parsedNode.id, parsedNode.data);\n  }\n\n  for (i = 0; i < stored.links.length; ++i) {\n    var link = linkTransform(stored.links[i]);\n    if (!link.hasOwnProperty('fromId') || !link.hasOwnProperty('toId')) {\n      throw new Error('Graph link format is invalid. Both fromId and toId are required');\n    }\n\n    graph.addLink(link.fromId, link.toId, link.data);\n  }\n\n  return graph;\n}\n\nfunction id(x) { return x; }\n","module.exports = save;\n\nfunction save(graph, customNodeTransform, customLinkTransform) {\n  // Object contains `nodes` and `links` arrays.\n  var result = {\n    nodes: [],\n    links: []\n  };\n\n  var nodeTransform = customNodeTransform || defaultTransformForNode;\n  var linkTransform = customLinkTransform || defaultTransformForLink;\n\n  graph.forEachNode(saveNode);\n  graph.forEachLink(saveLink);\n\n  return JSON.stringify(result);\n\n  function saveNode(node) {\n    // Each node of the graph is processed to take only required fields\n    // `id` and `data`\n    result.nodes.push(nodeTransform(node));\n  }\n\n  function saveLink(link) {\n    // Each link of the graph is also processed to take `fromId`, `toId` and\n    // `data`\n    result.links.push(linkTransform(link));\n  }\n\n  function defaultTransformForNode(node) {\n    var result = {\n      id: node.id\n    };\n    // We don't want to store undefined fields when it's not necessary:\n    if (node.data !== undefined) {\n      result.data = node.data;\n    }\n\n    return result;\n  }\n\n  function defaultTransformForLink(link) {\n    var result = {\n      fromId: link.fromId,\n      toId: link.toId,\n    };\n\n    if (link.data !== undefined) {\n      result.data = link.data;\n    }\n\n    return result;\n  }\n}\n","module.exports = degree;\n\n/**\n * Calculates graph nodes degree centrality (in/out or both).\n *\n * @see http://en.wikipedia.org/wiki/Centrality#Degree_centrality\n *\n * @param {ngraph.graph} graph object for which we are calculating centrality.\n * @param {string} [kind=both] What kind of degree centrality needs to be calculated:\n *   'in'    - calculate in-degree centrality\n *   'out'   - calculate out-degree centrality\n *   'inout' - (default) generic degree centrality is calculated\n */\nfunction degree(graph, kind) {\n  var getNodeDegree;\n  var result = Object.create(null);\n\n  kind = (kind || 'both').toLowerCase();\n  if (kind === 'both' || kind === 'inout') {\n    getNodeDegree = inoutDegreeCalculator;\n  } else if (kind === 'in') {\n    getNodeDegree = inDegreeCalculator;\n  } else if (kind === 'out') {\n    getNodeDegree = outDegreeCalculator;\n  } else {\n    throw new Error('Expected centrality degree kind is: in, out or both');\n  }\n\n  graph.forEachNode(calculateNodeDegree);\n\n  return result;\n\n  function calculateNodeDegree(node) {\n    var links = graph.getLinks(node.id);\n    result[node.id] = getNodeDegree(links, node.id);\n  }\n}\n\nfunction inDegreeCalculator(links, nodeId) {\n  var total = 0;\n  if (!links) return total;\n\n  for (var i = 0; i < links.length; i += 1) {\n    total += (links[i].toId === nodeId) ? 1 : 0;\n  }\n  return total;\n}\n\nfunction outDegreeCalculator(links, nodeId) {\n  var total = 0;\n  if (!links) return total;\n\n  for (var i = 0; i < links.length; i += 1) {\n    total += (links[i].fromId === nodeId) ? 1 : 0;\n  }\n  return total;\n}\n\nfunction inoutDegreeCalculator(links) {\n  if (!links) return 0;\n\n  return links.length;\n}\n","module.exports = betweennes;\n\n/**\n * I'm using http://www.inf.uni-konstanz.de/algo/publications/b-vspbc-08.pdf\n * as a reference for this implementation\n */\nfunction betweennes(graph, oriented) {\n  var Q = [],\n    S = []; // Queue and Stack\n  // list of predcessors on shorteest paths from source\n  var pred = Object.create(null);\n  // distance from source\n  var dist = Object.create(null);\n  // number of shortest paths from source to key\n  var sigma = Object.create(null);\n  // dependency of source on key\n  var delta = Object.create(null);\n\n  var currentNode;\n  var centrality = Object.create(null);\n\n  graph.forEachNode(setCentralityToZero);\n  graph.forEachNode(calculateCentrality);\n\n  if (!oriented) {\n    // The centrality scores need to be divided by two if the graph is not oriented,\n    // since all shortest paths are considered twice\n    Object.keys(centrality).forEach(divideByTwo);\n  }\n\n  return centrality;\n\n  function divideByTwo(key) {\n    centrality[key] /= 2;\n  }\n\n  function setCentralityToZero(node) {\n    centrality[node.id] = 0;\n  }\n\n  function calculateCentrality(node) {\n    currentNode = node.id;\n    singleSourceShortestPath(currentNode);\n    accumulate();\n  }\n\n  function accumulate() {\n    graph.forEachNode(setDeltaToZero);\n    while (S.length) {\n      var w = S.pop();\n      var coeff = (1 + delta[w])/sigma[w];\n      var predcessors = pred[w];\n      for (var idx = 0; idx < predcessors.length; ++idx) {\n        var v = predcessors[idx];\n        delta[v] += sigma[v] * coeff;\n      }\n      if (w !== currentNode) {\n        centrality[w] += delta[w];\n      }\n    }\n  }\n\n  function setDeltaToZero(node) {\n    delta[node.id] = 0;\n  }\n\n  function singleSourceShortestPath(source) {\n    graph.forEachNode(initNode);\n    dist[source] = 0;\n    sigma[source] = 1;\n    Q.push(source);\n\n    while (Q.length) {\n      var v = Q.shift();\n      S.push(v);\n      graph.forEachLinkedNode(v, toId, oriented);\n    }\n\n    function toId(otherNode) {\n      // NOTE: This code will also consider multi-edges, which are often\n      // ignored by popular software (Gephi/NetworkX). Depending on your use\n      // case this may not be desired and deduping needs to be performed. To\n      // save memory I'm not deduping here...\n      processNode(otherNode.id);\n    }\n\n    function initNode(node) {\n      var nodeId = node.id;\n      pred[nodeId] = []; // empty list\n      dist[nodeId] = -1;\n      sigma[nodeId] = 0;\n    }\n\n    function processNode(w) {\n      // path discovery\n      if (dist[w] === -1) {\n        // Node w is found for the first time\n        dist[w] = dist[v] + 1;\n        Q.push(w);\n      }\n      // path counting\n      if (dist[w] === dist[v] + 1) {\n        // edge (v, w) on a shortest path\n        sigma[w] += sigma[v];\n        pred[w].push(v);\n      }\n    }\n  }\n}\n","module.exports = closeness;\r\n\r\n/**\r\n * In a connected graph, the normalized closeness centrality of a node is the average\r\n * length of the shortest path between the node and all other nodes in the\r\n * graph. Thus the more central a node is, the closer it is to all other nodes.\r\n */\r\nfunction closeness(graph, oriented) {\r\n  var Q = [];\r\n  // list of predcessors on shortest paths from source\r\n  // distance from source\r\n  var dist = Object.create(null);\r\n\r\n  var currentNode;\r\n  var centrality = Object.create(null);\r\n\r\n  graph.forEachNode(setCentralityToZero);\r\n  graph.forEachNode(calculateCentrality);\r\n\r\n  return centrality;\r\n\r\n  function setCentralityToZero(node) {\r\n    centrality[node.id] = 0;\r\n  }\r\n\r\n  function calculateCentrality(node) {\r\n    currentNode = node.id;\r\n    singleSourceShortestPath(currentNode);\r\n    accumulate();\r\n  }\r\n\r\n  function accumulate() {\r\n    // Add all distances for node to array, excluding -1s\r\n    var distances = Object.keys(dist).map(function(key) {return dist[key]}).filter(function(val){return val !== -1});\r\n    // Set number of reachable nodes\r\n    var reachableNodesTotal = distances.length;\r\n    // Compute sum of all distances for node\r\n    var totalDistance = distances.reduce(function(a,b) { return a + b });\r\n    if (totalDistance > 0) {\r\n      centrality[currentNode] = ((reachableNodesTotal - 1) / totalDistance); \r\n    } else {\r\n      centrality[currentNode] = 0;\r\n    }\r\n  }\r\n\r\n  function singleSourceShortestPath(source) {\r\n    graph.forEachNode(initNode);\r\n    dist[source] = 0;\r\n    Q.push(source);\r\n\r\n    while (Q.length) {\r\n      var v = Q.shift();\r\n      graph.forEachLinkedNode(v, processNode, oriented);\r\n    }\r\n\r\n    function initNode(node) {\r\n      var nodeId = node.id;\r\n      dist[nodeId] = -1;\r\n    }\r\n\r\n    function processNode(otherNode) {\r\n      var w = otherNode.id\r\n      if (dist[w] === -1) {\r\n        // Node w is found for the first time\r\n        dist[w] = dist[v] + 1;\r\n        Q.push(w);\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports = eccentricity;\r\n\r\n/**\r\n * The eccentricity centrality of a node is the greatest distance between that node and\r\n * any other node in the network. \r\n */\r\nfunction eccentricity(graph, oriented) {\r\n  var Q = [];\r\n  // distance from source\r\n  var dist = Object.create(null);\r\n\r\n  var currentNode;\r\n  var centrality = Object.create(null);\r\n\r\n  graph.forEachNode(setCentralityToZero);\r\n  graph.forEachNode(calculateCentrality);\r\n\r\n  return centrality;\r\n\r\n  function setCentralityToZero(node) {\r\n    centrality[node.id] = 0;\r\n  }\r\n\r\n  function calculateCentrality(node) {\r\n    currentNode = node.id;\r\n    singleSourceShortestPath(currentNode);\r\n    accumulate();\r\n  }\r\n\r\n  function accumulate() {\r\n    var maxDist = 0;\r\n    Object.keys(dist).forEach(function (key) {\r\n      var val = dist[key];\r\n      if (maxDist < val) maxDist = val;\r\n    });\r\n\r\n    centrality[currentNode] = maxDist;\r\n  }\r\n\r\n  function singleSourceShortestPath(source) {\r\n    graph.forEachNode(initNode);\r\n    dist[source] = 0;\r\n    Q.push(source);\r\n\r\n    while (Q.length) {\r\n      var v = Q.shift();\r\n      graph.forEachLinkedNode(v, processNode, oriented);\r\n    }\r\n\r\n    function initNode(node) {\r\n      var nodeId = node.id;\r\n      dist[nodeId] = -1;\r\n    }\r\n\r\n    function processNode(otherNode) {\r\n      var w = otherNode.id\r\n      if (dist[w] === -1) {\r\n        // Node w is found for the first time\r\n        dist[w] = dist[v] + 1;\r\n        Q.push(w);\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports.degree = require('./src/degree.js');\nmodule.exports.betweenness = require('./src/betweenness.js');\nmodule.exports.closeness = require('./src/closeness.js');\nmodule.exports.eccentricity = require('./src/eccentricity.js');\n","var centrality = require('ngraph.centrality');\n\nmodule.exports = centralityWrapper;\n\nfunction centralityWrapper() {\n  // TODO: This should not be a function\n  return {\n    betweennessCentrality: betweennessCentrality,\n    degreeCentrality: degreeCentrality\n  };\n}\n\nfunction betweennessCentrality(g) {\n  var betweenness = centrality.betweenness(g);\n  return toVivaGraphCentralityFormat(betweenness);\n}\n\nfunction degreeCentrality(g, kind) {\n  var degree = centrality.degree(g, kind);\n  return toVivaGraphCentralityFormat(degree);\n}\n\nfunction toVivaGraphCentralityFormat(centrality) {\n  return Object.keys(centrality).sort(byValue).map(toKeyValue);\n\n  function byValue(x, y) {\n    return centrality[y] - centrality[x];\n  }\n\n  function toKeyValue(key) {\n    return {\n      key: key,\n      value: centrality[key]\n    };\n  }\n}\n","/**\r\n * @fileOverview Contains collection of primitive operations under graph.\r\n *\r\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\r\n */\r\nmodule.exports = operations;\r\n\r\nfunction operations() {\r\n\r\n    return {\r\n        /**\r\n         * Gets graph density, which is a ratio of actual number of edges to maximum\r\n         * number of edges. I.e. graph density 1 means all nodes are connected with each other with an edge.\r\n         * Density 0 - graph has no edges. Runtime: O(1)\r\n         * \r\n         * @param graph represents oriented graph structure.\r\n         * @param directed (optional boolean) represents if the graph should be treated as a directed graph.\r\n         * \r\n         * @returns density of the graph if graph has nodes. NaN otherwise. Returns density for undirected graph by default but returns density for directed graph if a boolean 'true' is passed along with the graph.\r\n         */\r\n        density : function (graph,directed) {\r\n            var nodes = graph.getNodesCount();\r\n            if (nodes === 0) {\r\n                return NaN;\r\n            }\r\n            if(directed){\r\n                return graph.getLinksCount() / (nodes * (nodes - 1));\r\n            } else {\r\n                return 2 * graph.getLinksCount() / (nodes * (nodes - 1));\r\n            }\r\n        }\r\n    };\r\n};\r\n","module.exports = intersect;\n\n/**\n * Original authors: Mukesh Prasad, Appeared in Graphics Gem II book\n * http://www.opensource.apple.com/source/graphviz/graphviz-498/graphviz/dynagraph/common/xlines.c\n * and adopted to javascript version by Andrei Kashcha.\n *\n * This function computes whether two line segments,\n * respectively joining the input points (x1,y1) -- (x2,y2)\n * and the input points (x3,y3) -- (x4,y4) intersect.\n * If the lines intersect, the output variables x, y are\n * set to coordinates of the point of intersection.\n *\n * @param {Number} x1 First line segment coordinates\n * @param {Number} y1 First line segment coordinates\n * @param {Number} x2 First line segment coordinates\n * @param {Number} x2 First line segment coordinates\n *\n * @param {Number} x3 Second line segment coordinates\n * @param {Number} y3 Second line segment coordinates\n * @param {Number} x4 Second line segment coordinates\n * @param {Number} x4 Second line segment coordinates\n *\n * @return {Object} x, y coordinates of intersection point or falsy value if no\n * intersection found..\n */\nfunction intersect(\n  x1, y1, x2, y2, // first line segment\n  x3, y3, x4, y4  // second line segment\n) {\n\n  var a1, a2, b1, b2, c1, c2, /* Coefficients of line eqns. */\n    r1, r2, r3, r4, /* 'Sign' values */\n    denom, offset, num, /* Intermediate values */\n    result = {\n      x: 0,\n      y: 0\n    };\n\n  /* Compute a1, b1, c1, where line joining points 1 and 2\n   * is \"a1 x  +  b1 y  +  c1  =  0\".\n   */\n  a1 = y2 - y1;\n  b1 = x1 - x2;\n  c1 = x2 * y1 - x1 * y2;\n\n  /* Compute r3 and r4.\n   */\n  r3 = a1 * x3 + b1 * y3 + c1;\n  r4 = a1 * x4 + b1 * y4 + c1;\n\n  /* Check signs of r3 and r4.  If both point 3 and point 4 lie on\n   * same side of line 1, the line segments do not intersect.\n   */\n\n  if (r3 !== 0 && r4 !== 0 && ((r3 >= 0) === (r4 >= 4))) {\n    return null; //no intersection.\n  }\n\n  /* Compute a2, b2, c2 */\n  a2 = y4 - y3;\n  b2 = x3 - x4;\n  c2 = x4 * y3 - x3 * y4;\n\n  /* Compute r1 and r2 */\n\n  r1 = a2 * x1 + b2 * y1 + c2;\n  r2 = a2 * x2 + b2 * y2 + c2;\n\n  /* Check signs of r1 and r2.  If both point 1 and point 2 lie\n   * on same side of second line segment, the line segments do\n   * not intersect.\n   */\n  if (r1 !== 0 && r2 !== 0 && ((r1 >= 0) === (r2 >= 0))) {\n    return null; // no intersection;\n  }\n  /* Line segments intersect: compute intersection point.\n   */\n\n  denom = a1 * b2 - a2 * b1;\n  if (denom === 0) {\n    return null; // Actually collinear..\n  }\n\n  offset = denom < 0 ? -denom / 2 : denom / 2;\n  offset = 0.0;\n\n  /* The denom/2 is to get rounding instead of truncating.  It\n   * is added or subtracted to the numerator, depending upon the\n   * sign of the numerator.\n   */\n  num = b1 * c2 - b2 * c1;\n  result.x = (num < 0 ? num - offset : num + offset) / denom;\n\n  num = a2 * c1 - a1 * c2;\n  result.y = (num < 0 ? num - offset : num + offset) / denom;\n\n  return result;\n}\n","var intersect = require('gintersect');\n\nmodule.exports = intersectRect;\n\nfunction intersectRect(left, top, right, bottom, x1, y1, x2, y2) {\n  return intersect(left, top, left, bottom, x1, y1, x2, y2) ||\n    intersect(left, bottom, right, bottom, x1, y1, x2, y2) ||\n    intersect(right, bottom, right, top, x1, y1, x2, y2) ||\n    intersect(right, top, left, top, x1, y1, x2, y2);\n}\n","/**\n * @fileOverview Utility functions for webgl rendering.\n *\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\n */\n\nmodule.exports = webgl;\n\nfunction webgl(gl) {\n\n  return {\n    createProgram: createProgram,\n    extendArray: extendArray,\n    copyArrayPart: copyArrayPart,\n    swapArrayPart: swapArrayPart,\n    getLocations: getLocations,\n    context: gl\n  };\n\n  function createShader(shaderText, type) {\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, shaderText);\n    gl.compileShader(shader);\n\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      var msg = gl.getShaderInfoLog(shader);\n      window.alert(msg);\n      throw msg;\n    }\n\n    return shader;\n  }\n\n  function createProgram(vertexShaderSrc, fragmentShaderSrc) {\n    var program = gl.createProgram();\n    var vs = createShader(vertexShaderSrc, gl.VERTEX_SHADER);\n    var fs = createShader(fragmentShaderSrc, gl.FRAGMENT_SHADER);\n\n    gl.attachShader(program, vs);\n    gl.attachShader(program, fs);\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      var msg = gl.getShaderInfoLog(program);\n      window.alert(msg);\n      throw msg;\n    }\n\n    return program;\n  }\n\n  function extendArray(buffer, itemsInBuffer, elementsPerItem) {\n    if ((itemsInBuffer + 1) * elementsPerItem > buffer.length) {\n      // Every time we run out of space create new array twice bigger.\n      // TODO: it seems buffer size is limited. Consider using multiple arrays for huge graphs\n      var extendedArray = new Float32Array(buffer.length * elementsPerItem * 2);\n      extendedArray.set(buffer);\n\n      return extendedArray;\n    }\n\n    return buffer;\n  }\n\n  function getLocations(program, uniformOrAttributeNames) {\n    var foundLocations = {};\n    for (var i = 0; i < uniformOrAttributeNames.length; ++i) {\n      var name = uniformOrAttributeNames[i];\n      var location = -1;\n      if (name[0] === 'a' && name[1] === '_') {\n        location = gl.getAttribLocation(program, name);\n        if (location === -1) {\n          throw new Error(\"Program doesn't have required attribute: \" + name);\n        }\n\n        foundLocations[name.slice(2)] = location;\n      } else if (name[0] === 'u' && name[1] === '_') {\n        location = gl.getUniformLocation(program, name);\n        if (location === null) {\n          throw new Error(\"Program doesn't have required uniform: \" + name);\n        }\n\n        foundLocations[name.slice(2)] = location;\n      } else {\n        throw new Error(\"Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'\");\n      }\n    }\n\n    return foundLocations;\n  }\n}\n\nfunction copyArrayPart(array, to, from, elementsCount) {\n  for (var i = 0; i < elementsCount; ++i) {\n    array[to + i] = array[from + i];\n  }\n}\n\nfunction swapArrayPart(array, from, to, elementsCount) {\n  for (var i = 0; i < elementsCount; ++i) {\n    var tmp = array[from + i];\n    array[from + i] = array[to + i];\n    array[to + i] = tmp;\n  }\n}\n","module.exports = createNullEvents();\n\nfunction createNullEvents() {\n  return {\n    on: noop,\n    off: noop,\n    stop: noop\n  };\n}\n\nfunction noop() { }\n","var nullEvents = require('./nullEvents.js');\n\nmodule.exports = createDocumentEvents();\n\nfunction createDocumentEvents() {\n  if (typeof document === undefined) {\n    return nullEvents;\n  }\n\n  return {\n    on: on,\n    off: off\n  };\n}\n\nfunction on(eventName, handler) {\n  document.addEventListener(eventName, handler);\n}\n\nfunction off(eventName, handler) {\n  document.removeEventListener(eventName, handler);\n}\n","var documentEvents = require('../Utils/documentEvents.js');\n\nmodule.exports = webglInputEvents;\n\n/**\n * Monitors graph-related mouse input in webgl graphics and notifies subscribers.\n *\n * @param {Viva.Graph.View.webglGraphics} webglGraphics\n */\nfunction webglInputEvents(webglGraphics) {\n  if (webglGraphics.webglInputEvents) {\n    // Don't listen twice, if we are already attached to this graphics:\n    return webglGraphics.webglInputEvents;\n  }\n\n  var mouseCapturedNode = null,\n    mouseEnterCallback = [],\n    mouseLeaveCallback = [],\n    mouseDownCallback = [],\n    mouseUpCallback = [],\n    mouseMoveCallback = [],\n    clickCallback = [],\n    dblClickCallback = [],\n    prevSelectStart,\n    boundRect;\n\n  var root = webglGraphics.getGraphicsRoot();\n  startListen(root);\n\n  var api = {\n    mouseEnter: mouseEnter,\n    mouseLeave: mouseLeave,\n    mouseDown: mouseDown,\n    mouseUp: mouseUp,\n    mouseMove: mouseMove,\n    click: click,\n    dblClick: dblClick,\n    mouseCapture: mouseCapture,\n    releaseMouseCapture: releaseMouseCapture\n  };\n\n  // TODO I don't remember why this is needed:\n  webglGraphics.webglInputEvents = api;\n\n  return api;\n\n  function releaseMouseCapture() {\n    mouseCapturedNode = null;\n  }\n\n  function mouseCapture(node) {\n    mouseCapturedNode = node;\n  }\n\n  function dblClick(callback) {\n    if (typeof callback === 'function') {\n      dblClickCallback.push(callback);\n    }\n    return api;\n  }\n\n  function click(callback) {\n    if (typeof callback === 'function') {\n      clickCallback.push(callback);\n    }\n    return api;\n  }\n\n  function mouseMove(callback) {\n    if (typeof callback === 'function') {\n      mouseMoveCallback.push(callback);\n    }\n    return api;\n  }\n\n  function mouseUp(callback) {\n    if (typeof callback === 'function') {\n      mouseUpCallback.push(callback);\n    }\n    return api;\n  }\n\n  function mouseDown(callback) {\n    if (typeof callback === 'function') {\n      mouseDownCallback.push(callback);\n    }\n    return api;\n  }\n\n  function mouseLeave(callback) {\n    if (typeof callback === 'function') {\n      mouseLeaveCallback.push(callback);\n    }\n    return api;\n  }\n\n  function mouseEnter(callback) {\n    if (typeof callback === 'function') {\n      mouseEnterCallback.push(callback);\n    }\n    return api;\n  }\n\n  function preciseCheck(nodeUI, x, y) {\n    if (nodeUI && nodeUI.size) {\n      var pos = nodeUI.position,\n        half = nodeUI.size;\n\n      return pos.x - half < x && x < pos.x + half &&\n        pos.y - half < y && y < pos.y + half;\n    }\n\n    return true;\n  }\n\n  function getNodeAtClientPos(pos) {\n    return webglGraphics.getNodeAtClientPos(pos, preciseCheck);\n  }\n\n  function stopPropagation(e) {\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    } else {\n      e.cancelBubble = true;\n    }\n  }\n\n  function handleDisabledEvent(e) {\n    stopPropagation(e);\n    return false;\n  }\n\n  function invoke(callbacksChain, args) {\n    var i, stopPropagation;\n    for (i = 0; i < callbacksChain.length; i += 1) {\n      stopPropagation = callbacksChain[i].apply(undefined, args);\n      if (stopPropagation) {\n        return true;\n      }\n    }\n  }\n\n  function startListen(root) {\n    var pos = {\n        x: 0,\n        y: 0\n      },\n      lastFound = null,\n      lastUpdate = 1,\n      lastClickTime = +new Date(),\n\n      handleMouseMove = function(e) {\n        invoke(mouseMoveCallback, [lastFound, e]);\n        pos.x = e.clientX;\n        pos.y = e.clientY;\n      },\n\n      handleMouseUp = function() {\n        documentEvents.off('mousemove', handleMouseMove);\n        documentEvents.off('mouseup', handleMouseUp);\n      },\n\n      updateBoundRect = function() {\n        boundRect = root.getBoundingClientRect();\n      };\n\n    window.addEventListener('resize', updateBoundRect);\n    updateBoundRect();\n\n    // mouse move inside container serves only to track mouse enter/leave events.\n    root.addEventListener('mousemove',\n      function(e) {\n        if (mouseCapturedNode) {\n          return;\n        }\n        if (lastUpdate++ % 7 === 0) {\n          // since there is no bullet proof method to detect resize\n          // event, we preemptively update the bounding rectangle\n          updateBoundRect();\n          lastUpdate = 1;\n        }\n        var cancelBubble = false,\n          node;\n\n        pos.x = e.clientX - boundRect.left;\n        pos.y = e.clientY - boundRect.top;\n\n        node = getNodeAtClientPos(pos);\n\n        if (node && lastFound !== node) {\n          if(lastFound){ \n            invoke(mouseLeaveCallback, [lastFound]);\n          }\n          lastFound = node;\n          cancelBubble = cancelBubble || invoke(mouseEnterCallback, [lastFound]);\n        } else if (node === null && lastFound !== node) {\n          cancelBubble = cancelBubble || invoke(mouseLeaveCallback, [lastFound]);\n          lastFound = null;\n        }\n\n        if (cancelBubble) {\n          stopPropagation(e);\n        }\n      });\n\n    root.addEventListener('mousedown',\n      function(e) {\n        var cancelBubble = false,\n          args;\n        updateBoundRect();\n        pos.x = e.clientX - boundRect.left;\n        pos.y = e.clientY - boundRect.top;\n\n        args = [getNodeAtClientPos(pos), e];\n        if (args[0]) {\n          cancelBubble = invoke(mouseDownCallback, args);\n          // we clicked on a node. Following drag should be handled on document events:\n          documentEvents.on('mousemove', handleMouseMove);\n          documentEvents.on('mouseup', handleMouseUp);\n\n          prevSelectStart = window.document.onselectstart;\n\n          window.document.onselectstart = handleDisabledEvent;\n\n          lastFound = args[0];\n        } else {\n          lastFound = null;\n        }\n        if (cancelBubble) {\n          stopPropagation(e);\n        }\n      });\n\n    root.addEventListener('mouseup',\n      function(e) {\n        var clickTime = +new Date(),\n          args;\n\n        pos.x = e.clientX - boundRect.left;\n        pos.y = e.clientY - boundRect.top;\n\n        var nodeAtClientPos = getNodeAtClientPos(pos);\n        var sameNode = nodeAtClientPos === lastFound;\n        args = [nodeAtClientPos || lastFound, e];\n        if (args[0]) {\n          window.document.onselectstart = prevSelectStart;\n\n          if (clickTime - lastClickTime < 400 && sameNode) {\n            invoke(dblClickCallback, args);\n          } else {\n            invoke(clickCallback, args);\n          }\n          lastClickTime = clickTime;\n\n          if (invoke(mouseUpCallback, args)) {\n            stopPropagation(e);\n          }\n        }\n      });\n  }\n}\n","module.exports = random;\n\n// TODO: Deprecate?\nmodule.exports.random = random,\nmodule.exports.randomIterator = randomIterator\n\n/**\n * Creates seeded PRNG with two methods:\n *   next() and nextDouble()\n */\nfunction random(inputSeed) {\n  var seed = typeof inputSeed === 'number' ? inputSeed : (+new Date());\n  return new Generator(seed)\n}\n\nfunction Generator(seed) {\n  this.seed = seed;\n}\n\n/**\n  * Generates random integer number in the range from 0 (inclusive) to maxValue (exclusive)\n  *\n  * @param maxValue Number REQUIRED. Omitting this number will result in NaN values from PRNG.\n  */\nGenerator.prototype.next = next;\n\n/**\n  * Generates random double number in the range from 0 (inclusive) to 1 (exclusive)\n  * This function is the same as Math.random() (except that it could be seeded)\n  */\nGenerator.prototype.nextDouble = nextDouble;\n\n/**\n * Returns a random real number uniformly in [0, 1)\n */\nGenerator.prototype.uniform = nextDouble;\n\nGenerator.prototype.gaussian = gaussian;\n\nfunction gaussian() {\n  // use the polar form of the Box-Muller transform\n  // based on https://introcs.cs.princeton.edu/java/23recursion/StdRandom.java\n  var r, x, y;\n  do {\n    x = this.nextDouble() * 2 - 1;\n    y = this.nextDouble() * 2 - 1;\n    r = x * x + y * y;\n  } while (r >= 1 || r === 0);\n\n  return x * Math.sqrt(-2 * Math.log(r)/r);\n}\n\nfunction nextDouble() {\n  var seed = this.seed;\n  // Robert Jenkins' 32 bit integer hash function.\n  seed = ((seed + 0x7ed55d16) + (seed << 12)) & 0xffffffff;\n  seed = ((seed ^ 0xc761c23c) ^ (seed >>> 19)) & 0xffffffff;\n  seed = ((seed + 0x165667b1) + (seed << 5)) & 0xffffffff;\n  seed = ((seed + 0xd3a2646c) ^ (seed << 9)) & 0xffffffff;\n  seed = ((seed + 0xfd7046c5) + (seed << 3)) & 0xffffffff;\n  seed = ((seed ^ 0xb55a4f09) ^ (seed >>> 16)) & 0xffffffff;\n  this.seed = seed;\n  return (seed & 0xfffffff) / 0x10000000;\n}\n\nfunction next(maxValue) {\n  return Math.floor(this.nextDouble() * maxValue);\n}\n\n/*\n * Creates iterator over array, which returns items of array in random order\n * Time complexity is guaranteed to be O(n);\n */\nfunction randomIterator(array, customRandom) {\n  var localRandom = customRandom || random();\n  if (typeof localRandom.next !== 'function') {\n    throw new Error('customRandom does not match expected API: next() function is missing');\n  }\n\n  return {\n    forEach: forEach,\n\n    /**\n     * Shuffles array randomly, in place.\n     */\n    shuffle: shuffle\n  };\n\n  function shuffle() {\n    var i, j, t;\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n    }\n\n    return array;\n  }\n\n  function forEach(callback) {\n    var i, j, t;\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n\n      callback(t);\n    }\n\n    if (array.length) {\n      callback(array[0]);\n    }\n  }\n}","var createGraph = require('ngraph.graph');\n\nmodule.exports = factory(createGraph);\n\n// Allow other developers have their own createGraph\nmodule.exports.factory = factory;\n\nfunction factory(createGraph) {\n  return {\n    ladder: ladder,\n    complete: complete,\n    completeBipartite: completeBipartite,\n    balancedBinTree: balancedBinTree,\n    path: path,\n    circularLadder: circularLadder,\n    grid: grid,\n    grid3: grid3,\n    noLinks: noLinks,\n    wattsStrogatz: wattsStrogatz,\n    cliqueCircle: cliqueCircle\n  };\n\n\n  function ladder(n) {\n  /**\n  * Ladder graph is a graph in form of ladder\n  * @param {Number} n Represents number of steps in the ladder\n  */\n    if (!n || n < 0) {\n      throw new Error(\"Invalid number of nodes\");\n    }\n\n    var g = createGraph(),\n        i;\n\n    for (i = 0; i < n - 1; ++i) {\n      g.addLink(i, i + 1);\n      // first row\n      g.addLink(n + i, n + i + 1);\n      // second row\n      g.addLink(i, n + i);\n      // ladder's step\n    }\n\n    g.addLink(n - 1, 2 * n - 1);\n    // last step in the ladder;\n\n    return g;\n  }\n\n  function circularLadder(n) {\n  /**\n  * Circular ladder with n steps.\n  *\n  * @param {Number} n of steps in the ladder.\n  */\n      if (!n || n < 0) {\n          throw new Error(\"Invalid number of nodes\");\n      }\n\n      var g = ladder(n);\n\n      g.addLink(0, n - 1);\n      g.addLink(n, 2 * n - 1);\n      return g;\n  }\n\n  function complete(n) {\n  /**\n  * Complete graph Kn.\n  *\n  * @param {Number} n represents number of nodes in the complete graph.\n  */\n    if (!n || n < 1) {\n      throw new Error(\"At least two nodes are expected for complete graph\");\n    }\n\n    var g = createGraph(),\n        i,\n        j;\n\n    for (i = 0; i < n; ++i) {\n      for (j = i + 1; j < n; ++j) {\n        if (i !== j) {\n          g.addLink(i, j);\n        }\n      }\n    }\n\n    return g;\n  }\n\n  function completeBipartite (n, m) {\n  /**\n  * Complete bipartite graph K n,m. Each node in the\n  * first partition is connected to all nodes in the second partition.\n  *\n  * @param {Number} n represents number of nodes in the first graph partition\n  * @param {Number} m represents number of nodes in the second graph partition\n  */\n    if (!n || !m || n < 0 || m < 0) {\n      throw new Error(\"Graph dimensions are invalid. Number of nodes in each partition should be greater than 0\");\n    }\n\n    var g = createGraph(),\n        i, j;\n\n    for (i = 0; i < n; ++i) {\n      for (j = n; j < n + m; ++j) {\n        g.addLink(i, j);\n      }\n    }\n\n    return g;\n  }\n\n  function path(n) {\n  /**\n  * Path graph with n steps.\n  *\n  * @param {Number} n number of nodes in the path\n  */\n    if (!n || n < 0) {\n      throw new Error(\"Invalid number of nodes\");\n    }\n\n    var g = createGraph(),\n        i;\n\n    g.addNode(0);\n\n    for (i = 1; i < n; ++i) {\n      g.addLink(i - 1, i);\n    }\n\n    return g;\n  }\n\n\n  function grid(n, m) {\n  /**\n  * Grid graph with n rows and m columns.\n  *\n  * @param {Number} n of rows in the graph.\n  * @param {Number} m of columns in the graph.\n  */\n    if (n < 1 || m < 1) {\n      throw new Error(\"Invalid number of nodes in grid graph\");\n    }\n    var g = createGraph(),\n        i,\n        j;\n    if (n === 1 && m === 1) {\n      g.addNode(0);\n      return g;\n    }\n\n    for (i = 0; i < n; ++i) {\n      for (j = 0; j < m; ++j) {\n        var node = i + j * n;\n        if (i > 0) { g.addLink(node, i - 1 + j * n); }\n        if (j > 0) { g.addLink(node, i + (j - 1) * n); }\n      }\n    }\n\n    return g;\n  }\n\n  function grid3(n, m, z) {\n  /**\n  * 3D grid with n rows and m columns and z levels.\n  *\n  * @param {Number} n of rows in the graph.\n  * @param {Number} m of columns in the graph.\n  * @param {Number} z of levels in the graph.\n  */\n    if (n < 1 || m < 1 || z < 1) {\n      throw new Error(\"Invalid number of nodes in grid3 graph\");\n    }\n    var g = createGraph(),\n        i, j, k;\n\n    if (n === 1 && m === 1 && z === 1) {\n      g.addNode(0);\n      return g;\n    }\n\n    for (k = 0; k < z; ++k) {\n      for (i = 0; i < n; ++i) {\n        for (j = 0; j < m; ++j) {\n          var level = k * n * m;\n          var node = i + j * n + level;\n          if (i > 0) { g.addLink(node, i - 1 + j * n + level); }\n          if (j > 0) { g.addLink(node, i + (j - 1) * n + level); }\n          if (k > 0) { g.addLink(node, i + j * n + (k - 1) * n * m ); }\n        }\n      }\n    }\n\n    return g;\n  }\n\n  function balancedBinTree(n) {\n  /**\n  * Balanced binary tree with n levels.\n  *\n  * @param {Number} n of levels in the binary tree\n  */\n    if (n < 0) {\n      throw new Error(\"Invalid number of nodes in balanced tree\");\n    }\n    var g = createGraph(),\n        count = Math.pow(2, n),\n        level;\n\n    if (n === 0) {\n      g.addNode(1);\n    }\n\n    for (level = 1; level < count; ++level) {\n      var root = level,\n        left = root * 2,\n        right = root * 2 + 1;\n\n      g.addLink(root, left);\n      g.addLink(root, right);\n    }\n\n    return g;\n  }\n\n  function noLinks(n) {\n  /**\n  * Graph with no links\n  *\n  * @param {Number} n of nodes in the graph\n  */\n    if (n < 0) {\n      throw new Error(\"Number of nodes should be >= 0\");\n    }\n\n    var g = createGraph(), i;\n    for (i = 0; i < n; ++i) {\n      g.addNode(i);\n    }\n\n    return g;\n  }\n\n  function cliqueCircle(cliqueCount, cliqueSize) {\n  /**\n  * A circular graph with cliques instead of individual nodes\n  *\n  * @param {Number} cliqueCount number of cliques inside circle\n  * @param {Number} cliqueSize number of nodes inside each clique\n  */\n\n    if (cliqueCount < 1) throw new Error('Invalid number of cliqueCount in cliqueCircle');\n    if (cliqueSize < 1) throw new Error('Invalid number of cliqueSize in cliqueCircle');\n\n    var graph = createGraph();\n\n    for (var i = 0; i < cliqueCount; ++i) {\n      appendClique(cliqueSize, i * cliqueSize)\n\n      if (i > 0) {\n        graph.addLink(i * cliqueSize, i * cliqueSize - 1);\n      }\n    }\n    graph.addLink(0, graph.getNodesCount() - 1);\n\n    return graph;\n\n    function appendClique(size, from) {\n      for (var i = 0; i < size; ++i) {\n        graph.addNode(i + from)\n      }\n\n      for (var i = 0; i < size; ++i) {\n        for (var j = i + 1; j < size; ++j) {\n          graph.addLink(i + from, j + from)\n        }\n      }\n    }\n  }\n\n  function wattsStrogatz(n, k, p, seed) {\n  /**\n  * Watts-Strogatz small-world graph.\n  *\n  * @param {Number} n The number of nodes\n  * @param {Number} k Each node is connected to k nearest neighbors in ring topology\n  * @param {Number} p The probability of rewiring each edge\n\n  * @see https://github.com/networkx/networkx/blob/master/networkx/generators/random_graphs.py\n  */\n    if (k >= n) throw new Error('Choose smaller `k`. It cannot be larger than number of nodes `n`');\n\n\n    var random = require('ngraph.random').random(seed || 42);\n\n    var g = createGraph(), i, to;\n    for (i = 0; i < n; ++i) {\n      g.addNode(i);\n    }\n\n    // connect each node to k/2 neighbors\n    var neighborsSize = Math.floor(k/2 + 1);\n    for (var j = 1; j < neighborsSize; ++j) {\n      for (i = 0; i < n; ++i) {\n        to = (j + i) % n;\n        g.addLink(i, to);\n      }\n    }\n\n    // rewire edges from each node\n    // loop over all nodes in order (label) and neighbors in order (distance)\n    // no self loops or multiple edges allowed\n    for (j = 1; j < neighborsSize; ++j) {\n      for (i = 0; i < n; ++i) {\n        if (random.nextDouble() < p) {\n          var from = i;\n          to = (j + i) % n;\n\n          var newTo = random.next(n);\n          var needsRewire = (newTo === from || g.hasLink(from, newTo));\n          if (needsRewire && g.getLinks(from).length === n - 1) {\n            // we cannot rewire this node, it has too many links.\n            continue;\n          }\n          // Enforce no self-loops or multiple edges\n          while (needsRewire) {\n            newTo = random.next(n);\n            needsRewire = (newTo === from || g.hasLink(from, newTo));\n          }\n          var link = g.hasLink(from, to);\n          g.removeLink(link);\n          g.addLink(from, newTo);\n        }\n      }\n    }\n\n    return g;\n  }\n}\n","module.exports = browserInfo();\r\n\r\nfunction browserInfo() {\r\n  if (typeof window === \"undefined\" || !window.hasOwnProperty(\"navigator\")) {\r\n    return {\r\n      browser : \"\",\r\n      version : \"0\"\r\n    };\r\n  }\r\n\r\n  var ua = window.navigator.userAgent.toLowerCase(),\r\n  // Useragent RegExp\r\n  rwebkit = /(webkit)[ \\/]([\\w.]+)/,\r\n  ropera = /(opera)(?:.*version)?[ \\/]([\\w.]+)/,\r\n  rmsie = /(msie) ([\\w.]+)/,\r\n  rmozilla = /(mozilla)(?:.*? rv:([\\w.]+))?/,\r\n  match = rwebkit.exec(ua) ||\r\n    ropera.exec(ua) ||\r\n    rmsie.exec(ua) ||\r\n    (ua.indexOf(\"compatible\") < 0 && rmozilla.exec(ua)) ||\r\n    [];\r\n\r\n  return {\r\n    browser: match[1] || \"\",\r\n    version: match[2] || \"0\"\r\n  };\r\n}\r\n","/**\n * Finds the absolute position of an element on a page\n */\nmodule.exports = findElementPosition;\n\nfunction findElementPosition(obj) {\n    var curleft = 0,\n        curtop = 0;\n    if (obj.offsetParent) {\n        do {\n            curleft += obj.offsetLeft;\n            curtop += obj.offsetTop;\n        } while ((obj = obj.offsetParent) !== null);\n    }\n\n    return [curleft, curtop];\n}\n","/**\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\n */\n\nmodule.exports = dragndrop;\n\nvar documentEvents = require('../Utils/documentEvents.js');\nvar browserInfo = require('../Utils/browserInfo.js');\nvar findElementPosition = require('../Utils/findElementPosition.js');\n\n// TODO: Move to input namespace\n// TODO: Methods should be extracted into the prototype. This class\n// does not need to consume so much memory for every tracked element\nfunction dragndrop(element) {\n    var start,\n        drag,\n        end,\n        scroll,\n        prevSelectStart,\n        prevDragStart,\n\n        startX = 0,\n        startY = 0,\n        dragObject,\n        touchInProgress = false,\n        pinchZoomLength = 0,\n\n        getMousePos = function (e) {\n            var posx = 0,\n                posy = 0;\n\n            e = e || window.event;\n\n            if (e.pageX || e.pageY) {\n                posx = e.pageX;\n                posy = e.pageY;\n            } else if (e.clientX || e.clientY) {\n                posx = e.clientX + window.document.body.scrollLeft + window.document.documentElement.scrollLeft;\n                posy = e.clientY + window.document.body.scrollTop + window.document.documentElement.scrollTop;\n            }\n\n            return [posx, posy];\n        },\n\n        move = function (e, clientX, clientY) {\n            if (drag) {\n                drag(e, {x : clientX - startX, y : clientY - startY });\n            }\n\n            startX = clientX;\n            startY = clientY;\n        },\n\n        stopPropagation = function (e) {\n            if (e.stopPropagation) { e.stopPropagation(); } else { e.cancelBubble = true; }\n        },\n        preventDefault = function (e) {\n            if (e.preventDefault) { e.preventDefault(); }\n        },\n\n        handleDisabledEvent = function (e) {\n            stopPropagation(e);\n            return false;\n        },\n\n        handleMouseMove = function (e) {\n            e = e || window.event;\n\n            move(e, e.clientX, e.clientY);\n        },\n\n        handleMouseDown = function (e) {\n            e = e || window.event;\n            if (touchInProgress) {\n                // modern browsers will fire mousedown for touch events too\n                // we do not want this, since touch is handled separately.\n                stopPropagation(e);\n                return false;\n            }\n            // for IE, left click == 1\n            // for Firefox, left click == 0\n            var isLeftButton = ((e.button === 1 && window.event !== null) || e.button === 0);\n\n            if (isLeftButton) {\n                startX = e.clientX;\n                startY = e.clientY;\n\n                // TODO: bump zIndex?\n                dragObject = e.target || e.srcElement;\n\n                if (start) { start(e, {x: startX, y : startY}); }\n\n                documentEvents.on('mousemove', handleMouseMove);\n                documentEvents.on('mouseup', handleMouseUp);\n\n\n                stopPropagation(e);\n                // TODO: What if event already there? Not bullet proof:\n                prevSelectStart = window.document.onselectstart;\n                prevDragStart = window.document.ondragstart;\n\n                window.document.onselectstart = handleDisabledEvent;\n                dragObject.ondragstart = handleDisabledEvent;\n\n                // prevent text selection (except IE)\n                return false;\n            }\n        },\n\n        handleMouseUp = function (e) {\n            e = e || window.event;\n\n            documentEvents.off('mousemove', handleMouseMove);\n            documentEvents.off('mouseup', handleMouseUp);\n\n            window.document.onselectstart = prevSelectStart;\n            dragObject.ondragstart = prevDragStart;\n            dragObject = null;\n            if (end) { end(e); }\n        },\n\n        handleMouseWheel = function (e) {\n            if (typeof scroll !== 'function') {\n                return;\n            }\n\n            e = e || window.event;\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            e.returnValue = false;\n            var delta,\n                mousePos = getMousePos(e),\n                elementOffset = findElementPosition(element),\n                relMousePos = {\n                    x: mousePos[0] - elementOffset[0],\n                    y: mousePos[1] - elementOffset[1]\n                };\n\n            if (e.wheelDelta) {\n                delta = e.wheelDelta / 360; // Chrome/Safari\n            } else {\n                delta = e.detail / -9; // Mozilla\n            }\n\n            scroll(e, delta, relMousePos);\n        },\n\n        updateScrollEvents = function (scrollCallback) {\n            if (!scroll && scrollCallback) {\n                // client is interested in scrolling. Start listening to events:\n                if (browserInfo.browser === 'webkit') {\n                    element.addEventListener('mousewheel', handleMouseWheel, false); // Chrome/Safari\n                } else {\n                    element.addEventListener('DOMMouseScroll', handleMouseWheel, false); // Others\n                }\n            } else if (scroll && !scrollCallback) {\n                if (browserInfo.browser === 'webkit') {\n                    element.removeEventListener('mousewheel', handleMouseWheel, false); // Chrome/Safari\n                } else {\n                    element.removeEventListener('DOMMouseScroll', handleMouseWheel, false); // Others\n                }\n            }\n\n            scroll = scrollCallback;\n        },\n\n        getPinchZoomLength = function(finger1, finger2) {\n            return (finger1.clientX - finger2.clientX) * (finger1.clientX - finger2.clientX) +\n                   (finger1.clientY - finger2.clientY) * (finger1.clientY - finger2.clientY);\n        },\n\n        handleTouchMove = function (e) {\n            if (e.touches.length === 1) {\n                stopPropagation(e);\n\n                var touch = e.touches[0];\n                move(e, touch.clientX, touch.clientY);\n            } else if (e.touches.length === 2) {\n                // it's a zoom:\n                var currentPinchLength = getPinchZoomLength(e.touches[0], e.touches[1]);\n                var delta = 0;\n                if (currentPinchLength < pinchZoomLength) {\n                    delta = -1;\n                } else if (currentPinchLength > pinchZoomLength) {\n                    delta = 1;\n                }\n                scroll(e, delta, {x: e.touches[0].clientX, y: e.touches[0].clientY});\n                pinchZoomLength = currentPinchLength;\n                stopPropagation(e);\n                preventDefault(e);\n            }\n        },\n\n        handleTouchEnd = function (e) {\n            touchInProgress = false;\n            documentEvents.off('touchmove', handleTouchMove);\n            documentEvents.off('touchend', handleTouchEnd);\n            documentEvents.off('touchcancel', handleTouchEnd);\n            dragObject = null;\n            if (end) { end(e); }\n        },\n\n        handleSignleFingerTouch = function (e, touch) {\n            stopPropagation(e);\n            preventDefault(e);\n\n            startX = touch.clientX;\n            startY = touch.clientY;\n\n            dragObject = e.target || e.srcElement;\n\n            if (start) { start(e, {x: startX, y : startY}); }\n            // TODO: can I enter into the state when touch is in progress\n            // but it's still a single finger touch?\n            if (!touchInProgress) {\n                touchInProgress = true;\n                documentEvents.on('touchmove', handleTouchMove);\n                documentEvents.on('touchend', handleTouchEnd);\n                documentEvents.on('touchcancel', handleTouchEnd);\n            }\n        },\n\n        handleTouchStart = function (e) {\n            if (e.touches.length === 1) {\n                return handleSignleFingerTouch(e, e.touches[0]);\n            } else if (e.touches.length === 2) {\n                // handleTouchMove() will care about pinch zoom.\n                stopPropagation(e);\n                preventDefault(e);\n\n                pinchZoomLength = getPinchZoomLength(e.touches[0], e.touches[1]);\n\n            }\n            // don't care about the rest.\n        };\n\n\n    element.addEventListener('mousedown', handleMouseDown);\n    element.addEventListener('touchstart', handleTouchStart);\n\n    return {\n        onStart : function (callback) {\n            start = callback;\n            return this;\n        },\n\n        onDrag : function (callback) {\n            drag = callback;\n            return this;\n        },\n\n        onStop : function (callback) {\n            end = callback;\n            return this;\n        },\n\n        /**\n         * Occurs when mouse wheel event happens. callback = function(e, scrollDelta, scrollPoint);\n         */\n        onScroll : function (callback) {\n            updateScrollEvents(callback);\n            return this;\n        },\n\n        release : function () {\n            // TODO: could be unsafe. We might wanna release dragObject, etc.\n            element.removeEventListener('mousedown', handleMouseDown);\n            element.removeEventListener('touchstart', handleTouchStart);\n\n            documentEvents.off('mousemove', handleMouseMove);\n            documentEvents.off('mouseup', handleMouseUp);\n            documentEvents.off('touchmove', handleTouchMove);\n            documentEvents.off('touchend', handleTouchEnd);\n            documentEvents.off('touchcancel', handleTouchEnd);\n\n            updateScrollEvents(null);\n        }\n    };\n}\n","/**\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\n */\n\nmodule.exports = domInputManager;\n\nvar dragndrop = require('./dragndrop.js');\n\nfunction domInputManager(graph, graphics) {\n  var nodeEvents = {};\n  return {\n    /**\n     * Called by renderer to listen to drag-n-drop events from node. E.g. for SVG\n     * graphics we may listen to DOM events, whereas for WebGL the graphics\n     * should provide custom eventing mechanism.\n     *\n     * @param node - to be monitored.\n     * @param handlers - object with set of three callbacks:\n     *   onStart: function(),\n     *   onDrag: function(e, offset),\n     *   onStop: function()\n     */\n    bindDragNDrop: bindDragNDrop\n  };\n\n  function bindDragNDrop(node, handlers) {\n    var events;\n    if (handlers) {\n      var nodeUI = graphics.getNodeUI(node.id);\n      events = dragndrop(nodeUI);\n      if (typeof handlers.onStart === 'function') {\n        events.onStart(handlers.onStart);\n      }\n      if (typeof handlers.onDrag === 'function') {\n        events.onDrag(handlers.onDrag);\n      }\n      if (typeof handlers.onStop === 'function') {\n        events.onStop(handlers.onStop);\n      }\n\n      nodeEvents[node.id] = events;\n    } else if ((events = nodeEvents[node.id])) {\n      events.release();\n      delete nodeEvents[node.id];\n    }\n  }\n}\n","/**\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\n */\n\nmodule.exports = webglInputManager;\n\nvar createInputEvents = require('../WebGL/webglInputEvents.js');\n\nfunction webglInputManager(graph, graphics) {\n    var inputEvents = createInputEvents(graphics),\n        draggedNode = null,\n        internalHandlers = {},\n        pos = {x : 0, y : 0};\n\n    inputEvents.mouseDown(function (node, e) {\n        draggedNode = node;\n        pos.x = e.clientX;\n        pos.y = e.clientY;\n\n        inputEvents.mouseCapture(draggedNode);\n\n        var handlers = internalHandlers[node.id];\n        if (handlers && handlers.onStart) {\n            handlers.onStart(e, pos);\n        }\n\n        return true;\n    }).mouseUp(function (node) {\n        inputEvents.releaseMouseCapture(draggedNode);\n\n        draggedNode = null;\n        var handlers = internalHandlers[node.id];\n        if (handlers && handlers.onStop) {\n            handlers.onStop();\n        }\n        return true;\n    }).mouseMove(function (node, e) {\n        if (draggedNode) {\n            var handlers = internalHandlers[draggedNode.id];\n            if (handlers && handlers.onDrag) {\n                handlers.onDrag(e, {x : e.clientX - pos.x, y : e.clientY - pos.y });\n            }\n\n            pos.x = e.clientX;\n            pos.y = e.clientY;\n            return true;\n        }\n    });\n\n    return {\n        /**\n         * Called by renderer to listen to drag-n-drop events from node. E.g. for SVG\n         * graphics we may listen to DOM events, whereas for WebGL we graphics\n         * should provide custom eventing mechanism.\n         *\n         * @param node - to be monitored.\n         * @param handlers - object with set of three callbacks:\n         *   onStart: function(),\n         *   onDrag: function(e, offset),\n         *   onStop: function()\n         */\n        bindDragNDrop : function (node, handlers) {\n            internalHandlers[node.id] = handlers;\n            if (!handlers) {\n                delete internalHandlers[node.id];\n            }\n        }\n    };\n}\n","/**\r\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\r\n */\r\n\r\nmodule.exports = createTimer();\r\n\r\nfunction createTimer() {\r\n  var lastTime = 0,\r\n    vendors = ['ms', 'moz', 'webkit', 'o'],\r\n    i,\r\n    scope;\r\n\r\n  if (typeof window !== 'undefined') {\r\n    scope = window;\r\n  } else if (typeof global !== 'undefined') {\r\n    scope = global;\r\n  } else {\r\n    scope = {\r\n      setTimeout: noop,\r\n      clearTimeout: noop\r\n    };\r\n  }\r\n\r\n  for (i = 0; i < vendors.length && !scope.requestAnimationFrame; ++i) {\r\n    var vendorPrefix = vendors[i];\r\n    scope.requestAnimationFrame = scope[vendorPrefix + 'RequestAnimationFrame'];\r\n    scope.cancelAnimationFrame =\r\n      scope[vendorPrefix + 'CancelAnimationFrame'] || scope[vendorPrefix + 'CancelRequestAnimationFrame'];\r\n  }\r\n\r\n  if (!scope.requestAnimationFrame) {\r\n    scope.requestAnimationFrame = rafPolyfill;\r\n  }\r\n\r\n  if (!scope.cancelAnimationFrame) {\r\n    scope.cancelAnimationFrame = cancelRafPolyfill;\r\n  }\r\n\r\n  return timer;\r\n\r\n  /**\r\n   * Timer that fires callback with given interval (in ms) until\r\n   * callback returns true;\r\n   */\r\n  function timer(callback) {\r\n    var intervalId;\r\n    startTimer(); // start it right away.\r\n\r\n    return {\r\n      /**\r\n       * Stops execution of the callback\r\n       */\r\n      stop: stopTimer,\r\n\r\n      restart: restart\r\n    };\r\n\r\n    function startTimer() {\r\n      intervalId = scope.requestAnimationFrame(startTimer);\r\n      if (!callback()) {\r\n        stopTimer();\r\n      }\r\n    }\r\n\r\n    function stopTimer() {\r\n      scope.cancelAnimationFrame(intervalId);\r\n      intervalId = 0;\r\n    }\r\n\r\n    function restart() {\r\n      if (!intervalId) {\r\n        startTimer();\r\n      }\r\n    }\r\n  }\r\n\r\n  function rafPolyfill(callback) {\r\n    var currTime = new Date().getTime();\r\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n    var id = scope.setTimeout(function() {\r\n      callback(currTime + timeToCall);\r\n    }, timeToCall);\r\n    lastTime = currTime + timeToCall;\r\n    return id;\r\n  }\r\n\r\n  function cancelRafPolyfill(id) {\r\n    scope.clearTimeout(id);\r\n  }\r\n}\r\n\r\nfunction noop() {}\r\n","module.exports = getDimension;\r\n\r\nfunction getDimension(container) {\r\n    if (!container) {\r\n        throw {\r\n            message : 'Cannot get dimensions of undefined container'\r\n        };\r\n    }\r\n\r\n    // TODO: Potential cross browser bug.\r\n    var width = container.clientWidth;\r\n    var height = container.clientHeight;\r\n\r\n    return {\r\n        left : 0,\r\n        top : 0,\r\n        width : width,\r\n        height : height\r\n    };\r\n}\r\n","/**\n * This module provides compatibility layer with 0.6.x library. It will be\n * removed in the next version\n */\n\nvar events = require('ngraph.events');\n\nmodule.exports = backwardCompatibleEvents;\n\nfunction backwardCompatibleEvents(g) {\n  console.log(\"This method is deprecated. Please use Viva.events() instead\");\n\n  if (!g) {\n    return g;\n  }\n\n  var eventsDefined = (g.on !== undefined) ||\n    (g.off !== undefined) ||\n    (g.fire !== undefined);\n\n  if (eventsDefined) {\n    // events already defined, ignore\n    return {\n      extend: function() {\n        return g;\n      },\n      on: g.on,\n      stop: g.off\n    };\n  }\n\n  return {\n    extend: extend,\n    on: g.on,\n    stop: g.off\n  };\n\n  function extend() {\n    var backwardCompatible = events(g);\n    backwardCompatible.addEventListener = backwardCompatible.on;\n    return backwardCompatible;\n  }\n}\n","module.exports = Spring;\n\n/**\n * Represents a physical spring. Spring connects two bodies, has rest length\n * stiffness coefficient and optional weight\n */\nfunction Spring(fromBody, toBody, length, coeff, weight) {\n    this.from = fromBody;\n    this.to = toBody;\n    this.length = length;\n    this.coeff = coeff;\n\n    this.weight = typeof weight === 'number' ? weight : 1;\n};\n","module.exports = exposeProperties;\n\n/**\n * Augments `target` object with getter/setter functions, which modify settings\n *\n * @example\n *  var target = {};\n *  exposeProperties({ age: 42}, target);\n *  target.age(); // returns 42\n *  target.age(24); // make age 24;\n *\n *  var filteredTarget = {};\n *  exposeProperties({ age: 42, name: 'John'}, filteredTarget, ['name']);\n *  filteredTarget.name(); // returns 'John'\n *  filteredTarget.age === undefined; // true\n */\nfunction exposeProperties(settings, target, filter) {\n  var needsFilter = Object.prototype.toString.call(filter) === '[object Array]';\n  if (needsFilter) {\n    for (var i = 0; i < filter.length; ++i) {\n      augment(settings, target, filter[i]);\n    }\n  } else {\n    for (var key in settings) {\n      augment(settings, target, key);\n    }\n  }\n}\n\nfunction augment(source, target, key) {\n  if (source.hasOwnProperty(key)) {\n    if (typeof target[key] === 'function') {\n      // this accessor is already defined. Ignore it\n      return;\n    }\n    target[key] = function (value) {\n      if (value !== undefined) {\n        source[key] = value;\n        return target;\n      }\n      return source[key];\n    }\n  }\n}\n","/**\n * Internal data structure to represent 2D QuadTree node\n */\nmodule.exports = function Node() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain boides:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n  this.quad0 = null;\n  this.quad1 = null;\n  this.quad2 = null;\n  this.quad3 = null;\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  this.massX = 0;\n  this.massY = 0;\n\n  // bounding box coordinates\n  this.left = 0;\n  this.top = 0;\n  this.bottom = 0;\n  this.right = 0;\n};\n","module.exports = InsertStack;\n\n/**\n * Our implmentation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressue: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n","module.exports = function isSamePosition(point1, point2) {\n    var dx = Math.abs(point1.x - point2.x);\n    var dy = Math.abs(point1.y - point2.y);\n\n    return (dx < 1e-8 && dy < 1e-8);\n};\n","/**\n * This is Barnes Hut simulation algorithm for 2d case. Implementation\n * is highly optimized (avoids recusion and gc pressure)\n *\n * http://www.cs.princeton.edu/courses/archive/fall03/cs126/assignments/barnes-hut.html\n */\n\nmodule.exports = function(options) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  // we require deterministic randomness here\n  var random = require('ngraph.random').random(1984),\n    Node = require('./node'),\n    InsertStack = require('./insertStack'),\n    isSamePosition = require('./isSamePosition');\n\n  var gravity = options.gravity,\n    updateQueue = [],\n    insertStack = new InsertStack(),\n    theta = options.theta,\n\n    nodesCache = [],\n    currentInCache = 0,\n    root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n    /**\n     * Gets root node if its present\n     */\n    getRoot: function() {\n      return root;\n    },\n    updateBodyForce: update,\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n      node.quad0 = null;\n      node.quad1 = null;\n      node.quad2 = null;\n      node.quad3 = null;\n      node.body = null;\n      node.mass = node.massX = node.massY = 0;\n      node.left = node.right = node.top = node.bottom = 0;\n    } else {\n      node = new Node();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue,\n      v,\n      dx,\n      dy,\n      r, fx = 0,\n      fy = 0,\n      queueLength = 1,\n      shiftIdx = 0,\n      pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx],\n        body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        dx = body.pos.x - sourceBody.pos.x;\n        dy = body.pos.y - sourceBody.pos.y;\n        r = Math.sqrt(dx * dx + dy * dy);\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n        }\n\n        // This is standard gravition force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        fx += v * dx;\n        fy += v * dy;\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        dx = node.massX / node.mass - sourceBody.pos.x;\n        dy = node.massY / node.mass - sourceBody.pos.y;\n        r = Math.sqrt(dx * dx + dy * dy);\n\n        if (r === 0) {\n          // Sorry about code duplucation. I don't want to create many functions\n          // right away. Just want to see performance first.\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n        }\n        // If s / r < , treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.right - node.left) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was squarified during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          fx += v * dx;\n          fy += v * dy;\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n          if (node.quad0) {\n            queue[pushIdx] = node.quad0;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n          if (node.quad1) {\n            queue[pushIdx] = node.quad1;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n          if (node.quad2) {\n            queue[pushIdx] = node.quad2;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n          if (node.quad3) {\n            queue[pushIdx] = node.quad3;\n            queueLength += 1;\n            pushIdx += 1;\n          }\n        }\n      }\n    }\n\n    sourceBody.force.x += fx;\n    sourceBody.force.y += fy;\n  }\n\n  function insertBodies(bodies) {\n    var x1 = Number.MAX_VALUE,\n      y1 = Number.MAX_VALUE,\n      x2 = Number.MIN_VALUE,\n      y2 = Number.MIN_VALUE,\n      i,\n      max = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    i = max;\n    while (i--) {\n      var x = bodies[i].pos.x;\n      var y = bodies[i].pos.y;\n      if (x < x1) {\n        x1 = x;\n      }\n      if (x > x2) {\n        x2 = x;\n      }\n      if (y < y1) {\n        y1 = y;\n      }\n      if (y > y2) {\n        y2 = y;\n      }\n    }\n\n    // Squarify the bounds.\n    var dx = x2 - x1,\n      dy = y2 - y1;\n    if (dx > dy) {\n      y2 = y1 + dx;\n    } else {\n      x2 = x1 + dy;\n    }\n\n    currentInCache = 0;\n    root = newNode();\n    root.left = x1;\n    root.right = x2;\n    root.top = y1;\n    root.bottom = y2;\n\n    i = max - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop(),\n        node = stackItem.node,\n        body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        var x = body.pos.x;\n        var y = body.pos.y;\n        node.mass = node.mass + body.mass;\n        node.massX = node.massX + body.mass * x;\n        node.massY = node.massY + body.mass * y;\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0, // Assume we are in the 0's quad.\n          left = node.left,\n          right = (node.right + left) / 2,\n          top = node.top,\n          bottom = (node.bottom + top) / 2;\n\n        if (x > right) { // somewhere in the eastern part.\n          quadIdx = quadIdx + 1;\n          left = right;\n          right = node.right;\n        }\n        if (y > bottom) { // and in south.\n          quadIdx = quadIdx + 2;\n          top = bottom;\n          bottom = node.bottom;\n        }\n\n        var child = getChild(node, quadIdx);\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          child.left = left;\n          child.top = top;\n          child.right = right;\n          child.bottom = bottom;\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            var dx = (node.right - node.left) * offset;\n            var dy = (node.bottom - node.top) * offset;\n\n            oldBody.pos.x = node.left + dx;\n            oldBody.pos.y = node.top + dy;\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n};\n\nfunction getChild(node, idx) {\n  if (idx === 0) return node.quad0;\n  if (idx === 1) return node.quad1;\n  if (idx === 2) return node.quad2;\n  if (idx === 3) return node.quad3;\n  return null;\n}\n\nfunction setChild(node, idx, child) {\n  if (idx === 0) node.quad0 = child;\n  else if (idx === 1) node.quad1 = child;\n  else if (idx === 2) node.quad2 = child;\n  else if (idx === 3) node.quad3 = child;\n}\n","module.exports = function (bodies, settings) {\n  var random = require('ngraph.random').random(42);\n  var boundingBox =  { x1: 0, y1: 0, x2: 0, y2: 0 };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset : function () {\n      boundingBox.x1 = boundingBox.y1 = 0;\n      boundingBox.x2 = boundingBox.y2 = 0;\n    },\n\n    getBestNewPosition: function (neighbors) {\n      var graphRect = boundingBox;\n\n      var baseX = 0, baseY = 0;\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          baseX += neighbors[i].pos.x;\n          baseY += neighbors[i].pos.y;\n        }\n\n        baseX /= neighbors.length;\n        baseY /= neighbors.length;\n      } else {\n        baseX = (graphRect.x1 + graphRect.x2) / 2;\n        baseY = (graphRect.y1 + graphRect.y2) / 2;\n      }\n\n      var springLength = settings.springLength;\n      return {\n        x: baseX + random.next(springLength) - springLength / 2,\n        y: baseY + random.next(springLength) - springLength / 2\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) { return; } // don't have to wory here.\n\n    var x1 = Number.MAX_VALUE,\n        y1 = Number.MAX_VALUE,\n        x2 = Number.MIN_VALUE,\n        y2 = Number.MIN_VALUE;\n\n    while(i--) {\n      // this is O(n), could it be done faster with quadtree?\n      // how about pinned nodes?\n      var body = bodies[i];\n      if (body.isPinned) {\n        body.pos.x = body.prevPos.x;\n        body.pos.y = body.prevPos.y;\n      } else {\n        body.prevPos.x = body.pos.x;\n        body.prevPos.y = body.pos.y;\n      }\n      if (body.pos.x < x1) {\n        x1 = body.pos.x;\n      }\n      if (body.pos.x > x2) {\n        x2 = body.pos.x;\n      }\n      if (body.pos.y < y1) {\n        y1 = body.pos.y;\n      }\n      if (body.pos.y > y2) {\n        y2 = body.pos.y;\n      }\n    }\n\n    boundingBox.x1 = x1;\n    boundingBox.x2 = x2;\n    boundingBox.y1 = y1;\n    boundingBox.y2 = y2;\n  }\n}\n","/**\n * Represents drag force, which reduces force value on each step by given\n * coefficient.\n *\n * @param {Object} options for the drag force\n * @param {Number=} options.dragCoeff drag force coefficient. 0.1 by default\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge'),\n      expose = require('ngraph.expose');\n\n  options = merge(options, {\n    dragCoeff: 0.02\n  });\n\n  var api = {\n    update : function (body) {\n      body.force.x -= options.dragCoeff * body.velocity.x;\n      body.force.y -= options.dragCoeff * body.velocity.y;\n    }\n  };\n\n  // let easy access to dragCoeff:\n  expose(options, api, ['dragCoeff']);\n\n  return api;\n};\n","/**\n * Represents spring force, which updates forces acting on two bodies, conntected\n * by a spring.\n *\n * @param {Object} options for the spring force\n * @param {Number=} options.springCoeff spring force coefficient.\n * @param {Number=} options.springLength desired length of a spring at rest.\n */\nmodule.exports = function (options) {\n  var merge = require('ngraph.merge');\n  var random = require('ngraph.random').random(42);\n  var expose = require('ngraph.expose');\n\n  options = merge(options, {\n    springCoeff: 0.0002,\n    springLength: 80\n  });\n\n  var api = {\n    /**\n     * Upsates forces acting on a spring\n     */\n    update : function (spring) {\n      var body1 = spring.from,\n          body2 = spring.to,\n          length = spring.length < 0 ? options.springLength : spring.length,\n          dx = body2.pos.x - body1.pos.x,\n          dy = body2.pos.y - body1.pos.y,\n          r = Math.sqrt(dx * dx + dy * dy);\n\n      if (r === 0) {\n          dx = (random.nextDouble() - 0.5) / 50;\n          dy = (random.nextDouble() - 0.5) / 50;\n          r = Math.sqrt(dx * dx + dy * dy);\n      }\n\n      var d = r - length;\n      var coeff = ((!spring.coeff || spring.coeff < 0) ? options.springCoeff : spring.coeff) * d / r * spring.weight;\n\n      body1.force.x += coeff * dx;\n      body1.force.y += coeff * dy;\n\n      body2.force.x -= coeff * dx;\n      body2.force.y -= coeff * dy;\n    }\n  };\n\n  expose(options, api, ['springCoeff', 'springLength']);\n  return api;\n}\n","/**\n * Performs forces integration, using given timestep. Uses Euler method to solve\n * differential equation (http://en.wikipedia.org/wiki/Euler_method ).\n *\n * @returns {Number} squared distance of total position updates.\n */\n\nmodule.exports = integrate;\n\nfunction integrate(bodies, timeStep) {\n  var dx = 0, tx = 0,\n      dy = 0, ty = 0,\n      i,\n      max = bodies.length;\n\n  if (max === 0) {\n    return 0;\n  }\n\n  for (i = 0; i < max; ++i) {\n    var body = bodies[i],\n        coeff = timeStep / body.mass;\n\n    body.velocity.x += coeff * body.force.x;\n    body.velocity.y += coeff * body.force.y;\n    var vx = body.velocity.x,\n        vy = body.velocity.y,\n        v = Math.sqrt(vx * vx + vy * vy);\n\n    if (v > 1) {\n      body.velocity.x = vx / v;\n      body.velocity.y = vy / v;\n    }\n\n    dx = timeStep * body.velocity.x;\n    dy = timeStep * body.velocity.y;\n\n    body.pos.x += dx;\n    body.pos.y += dy;\n\n    tx += Math.abs(dx); ty += Math.abs(dy);\n  }\n\n  return (tx * tx + ty * ty)/max;\n}\n","module.exports = {\n  Body: Body,\n  Vector2d: Vector2d,\n  Body3d: Body3d,\n  Vector3d: Vector3d\n};\n\nfunction Body(x, y) {\n  this.pos = new Vector2d(x, y);\n  this.prevPos = new Vector2d(x, y);\n  this.force = new Vector2d();\n  this.velocity = new Vector2d();\n  this.mass = 1;\n}\n\nBody.prototype.setPosition = function (x, y) {\n  this.prevPos.x = this.pos.x = x;\n  this.prevPos.y = this.pos.y = y;\n};\n\nfunction Vector2d(x, y) {\n  if (x && typeof x !== 'number') {\n    // could be another vector\n    this.x = typeof x.x === 'number' ? x.x : 0;\n    this.y = typeof x.y === 'number' ? x.y : 0;\n  } else {\n    this.x = typeof x === 'number' ? x : 0;\n    this.y = typeof y === 'number' ? y : 0;\n  }\n}\n\nVector2d.prototype.reset = function () {\n  this.x = this.y = 0;\n};\n\nfunction Body3d(x, y, z) {\n  this.pos = new Vector3d(x, y, z);\n  this.prevPos = new Vector3d(x, y, z);\n  this.force = new Vector3d();\n  this.velocity = new Vector3d();\n  this.mass = 1;\n}\n\nBody3d.prototype.setPosition = function (x, y, z) {\n  this.prevPos.x = this.pos.x = x;\n  this.prevPos.y = this.pos.y = y;\n  this.prevPos.z = this.pos.z = z;\n};\n\nfunction Vector3d(x, y, z) {\n  if (x && typeof x !== 'number') {\n    // could be another vector\n    this.x = typeof x.x === 'number' ? x.x : 0;\n    this.y = typeof x.y === 'number' ? x.y : 0;\n    this.z = typeof x.z === 'number' ? x.z : 0;\n  } else {\n    this.x = typeof x === 'number' ? x : 0;\n    this.y = typeof y === 'number' ? y : 0;\n    this.z = typeof z === 'number' ? z : 0;\n  }\n};\n\nVector3d.prototype.reset = function () {\n  this.x = this.y = this.z = 0;\n};\n","var physics = require('ngraph.physics.primitives');\n\nmodule.exports = function(pos) {\n  return new physics.Body(pos);\n}\n","/**\n * Manages a simulation of physical forces acting on bodies and springs.\n */\nmodule.exports = physicsSimulator;\n\nfunction physicsSimulator(settings) {\n  var Spring = require('./lib/spring');\n  var expose = require('ngraph.expose');\n  var merge = require('ngraph.merge');\n  var eventify = require('ngraph.events');\n\n  settings = merge(settings, {\n      /**\n       * Ideal length for links (springs in physical model).\n       */\n      springLength: 30,\n\n      /**\n       * Hook's law coefficient. 1 - solid spring.\n       */\n      springCoeff: 0.0008,\n\n      /**\n       * Coulomb's law coefficient. It's used to repel nodes thus should be negative\n       * if you make it positive nodes start attract each other :).\n       */\n      gravity: -1.2,\n\n      /**\n       * Theta coefficient from Barnes Hut simulation. Ranged between (0, 1).\n       * The closer it's to 1 the more nodes algorithm will have to go through.\n       * Setting it to one makes Barnes Hut simulation no different from\n       * brute-force forces calculation (each node is considered).\n       */\n      theta: 0.8,\n\n      /**\n       * Drag force coefficient. Used to slow down system, thus should be less than 1.\n       * The closer it is to 0 the less tight system will be.\n       */\n      dragCoeff: 0.02,\n\n      /**\n       * Default time step (dt) for forces integration\n       */\n      timeStep : 20,\n  });\n\n  // We allow clients to override basic factory methods:\n  var createQuadTree = settings.createQuadTree || require('ngraph.quadtreebh');\n  var createBounds = settings.createBounds || require('./lib/bounds');\n  var createDragForce = settings.createDragForce || require('./lib/dragForce');\n  var createSpringForce = settings.createSpringForce || require('./lib/springForce');\n  var integrate = settings.integrator || require('./lib/eulerIntegrator');\n  var createBody = settings.createBody || require('./lib/createBody');\n\n  var bodies = [], // Bodies in this simulation.\n      springs = [], // Springs in this simulation.\n      quadTree =  createQuadTree(settings),\n      bounds = createBounds(bodies, settings),\n      springForce = createSpringForce(settings),\n      dragForce = createDragForce(settings);\n\n  var bboxNeedsUpdate = true;\n  var totalMovement = 0; // how much movement we made on last step\n\n  var publicApi = {\n    /**\n     * Array of bodies, registered with current simulator\n     *\n     * Note: To add new body, use addBody() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    bodies: bodies,\n\n    quadTree: quadTree,\n\n    /**\n     * Array of springs, registered with current simulator\n     *\n     * Note: To add new spring, use addSpring() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    springs: springs,\n\n    /**\n     * Returns settings with which current simulator was initialized\n     */\n    settings: settings,\n\n    /**\n     * Performs one step of force simulation.\n     *\n     * @returns {boolean} true if system is considered stable; False otherwise.\n     */\n    step: function () {\n      accumulateForces();\n\n      var movement = integrate(bodies, settings.timeStep);\n      bounds.update();\n\n      return movement;\n    },\n\n    /**\n     * Adds body to the system\n     *\n     * @param {ngraph.physics.primitives.Body} body physical body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBody: function (body) {\n      if (!body) {\n        throw new Error('Body is required');\n      }\n      bodies.push(body);\n\n      return body;\n    },\n\n    /**\n     * Adds body to the system at given position\n     *\n     * @param {Object} pos position of a body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBodyAt: function (pos) {\n      if (!pos) {\n        throw new Error('Body position is required');\n      }\n      var body = createBody(pos);\n      bodies.push(body);\n\n      return body;\n    },\n\n    /**\n     * Removes body from the system\n     *\n     * @param {ngraph.physics.primitives.Body} body to remove\n     *\n     * @returns {Boolean} true if body found and removed. falsy otherwise;\n     */\n    removeBody: function (body) {\n      if (!body) { return; }\n\n      var idx = bodies.indexOf(body);\n      if (idx < 0) { return; }\n\n      bodies.splice(idx, 1);\n      if (bodies.length === 0) {\n        bounds.reset();\n      }\n      return true;\n    },\n\n    /**\n     * Adds a spring to this simulation.\n     *\n     * @returns {Object} - a handle for a spring. If you want to later remove\n     * spring pass it to removeSpring() method.\n     */\n    addSpring: function (body1, body2, springLength, springWeight, springCoefficient) {\n      if (!body1 || !body2) {\n        throw new Error('Cannot add null spring to force simulator');\n      }\n\n      if (typeof springLength !== 'number') {\n        springLength = -1; // assume global configuration\n      }\n\n      var spring = new Spring(body1, body2, springLength, springCoefficient >= 0 ? springCoefficient : -1, springWeight);\n      springs.push(spring);\n\n      // TODO: could mark simulator as dirty.\n      return spring;\n    },\n\n    /**\n     * Returns amount of movement performed on last step() call\n     */\n    getTotalMovement: function () {\n      return totalMovement;\n    },\n\n    /**\n     * Removes spring from the system\n     *\n     * @param {Object} spring to remove. Spring is an object returned by addSpring\n     *\n     * @returns {Boolean} true if spring found and removed. falsy otherwise;\n     */\n    removeSpring: function (spring) {\n      if (!spring) { return; }\n      var idx = springs.indexOf(spring);\n      if (idx > -1) {\n        springs.splice(idx, 1);\n        return true;\n      }\n    },\n\n    getBestNewBodyPosition: function (neighbors) {\n      return bounds.getBestNewPosition(neighbors);\n    },\n\n    /**\n     * Returns bounding box which covers all bodies\n     */\n    getBBox: function () {\n      if (bboxNeedsUpdate) {\n        bounds.update();\n        bboxNeedsUpdate = false;\n      }\n      return bounds.box;\n    },\n\n    invalidateBBox: function () {\n      bboxNeedsUpdate = true;\n    },\n\n    gravity: function (value) {\n      if (value !== undefined) {\n        settings.gravity = value;\n        quadTree.options({gravity: value});\n        return this;\n      } else {\n        return settings.gravity;\n      }\n    },\n\n    theta: function (value) {\n      if (value !== undefined) {\n        settings.theta = value;\n        quadTree.options({theta: value});\n        return this;\n      } else {\n        return settings.theta;\n      }\n    }\n  };\n\n  // allow settings modification via public API:\n  expose(settings, publicApi);\n\n  eventify(publicApi);\n\n  return publicApi;\n\n  function accumulateForces() {\n    // Accumulate forces acting on bodies.\n    var body,\n        i = bodies.length;\n\n    if (i) {\n      // only add bodies if there the array is not empty:\n      quadTree.insertBodies(bodies); // performance: O(n * log n)\n      while (i--) {\n        body = bodies[i];\n        // If body is pinned there is no point updating its forces - it should\n        // never move:\n        if (!body.isPinned) {\n          body.force.reset();\n\n          quadTree.updateBodyForce(body);\n          dragForce.update(body);\n        }\n      }\n    }\n\n    i = springs.length;\n    while(i--) {\n      springForce.update(springs[i]);\n    }\n  }\n};\n","module.exports = function(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","module.exports = createLayout;\nmodule.exports.simulator = require('ngraph.physics.simulator');\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates force based layout for a given graph.\n *\n * @param {ngraph.graph} graph which needs to be laid out\n * @param {object} physicsSettings if you need custom settings\n * for physics simulator you can pass your own settings here. If it's not passed\n * a default one will be created.\n */\nfunction createLayout(graph, physicsSettings) {\n  if (!graph) {\n    throw new Error('Graph structure cannot be undefined');\n  }\n\n  var createSimulator = require('ngraph.physics.simulator');\n  var physicsSimulator = createSimulator(physicsSettings);\n\n  var nodeMass = defaultNodeMass\n  if (physicsSettings && typeof physicsSettings.nodeMass === 'function') {\n    nodeMass = physicsSettings.nodeMass\n  }\n\n  var nodeBodies = Object.create(null);\n  var springs = {};\n  var bodiesCount = 0;\n\n  var springTransform = physicsSimulator.settings.springTransform || noop;\n\n  // Initialize physics with what we have in the graph:\n  initPhysics();\n  listenToEvents();\n\n  var wasStable = false;\n\n  var api = {\n    /**\n     * Performs one step of iterative layout algorithm\n     *\n     * @returns {boolean} true if the system should be considered stable; Flase otherwise.\n     * The system is stable if no further call to `step()` can improve the layout.\n     */\n    step: function() {\n      if (bodiesCount === 0) return true; // TODO: This will never fire 'stable'\n\n      var lastMove = physicsSimulator.step();\n\n      // Save the movement in case if someone wants to query it in the step\n      // callback.\n      api.lastMove = lastMove;\n\n      // Allow listeners to perform low-level actions after nodes are updated.\n      api.fire('step');\n\n      var ratio = lastMove/bodiesCount;\n      var isStableNow = ratio <= 0.01; // TODO: The number is somewhat arbitrary...\n\n      if (wasStable !== isStableNow) {\n        wasStable = isStableNow;\n        onStableChanged(isStableNow);\n      }\n\n      return isStableNow;\n    },\n\n    /**\n     * For a given `nodeId` returns position\n     */\n    getNodePosition: function (nodeId) {\n      return getInitializedBody(nodeId).pos;\n    },\n\n    /**\n     * Sets position of a node to a given coordinates\n     * @param {string} nodeId node identifier\n     * @param {number} x position of a node\n     * @param {number} y position of a node\n     * @param {number=} z position of node (only if applicable to body)\n     */\n    setNodePosition: function (nodeId) {\n      var body = getInitializedBody(nodeId);\n      body.setPosition.apply(body, Array.prototype.slice.call(arguments, 1));\n      physicsSimulator.invalidateBBox();\n    },\n\n    /**\n     * @returns {Object} Link position by link id\n     * @returns {Object.from} {x, y} coordinates of link start\n     * @returns {Object.to} {x, y} coordinates of link end\n     */\n    getLinkPosition: function (linkId) {\n      var spring = springs[linkId];\n      if (spring) {\n        return {\n          from: spring.from.pos,\n          to: spring.to.pos\n        };\n      }\n    },\n\n    /**\n     * @returns {Object} area required to fit in the graph. Object contains\n     * `x1`, `y1` - top left coordinates\n     * `x2`, `y2` - bottom right coordinates\n     */\n    getGraphRect: function () {\n      return physicsSimulator.getBBox();\n    },\n\n    /**\n     * Iterates over each body in the layout simulator and performs a callback(body, nodeId)\n     */\n    forEachBody: forEachBody,\n\n    /*\n     * Requests layout algorithm to pin/unpin node to its current position\n     * Pinned nodes should not be affected by layout algorithm and always\n     * remain at their position\n     */\n    pinNode: function (node, isPinned) {\n      var body = getInitializedBody(node.id);\n       body.isPinned = !!isPinned;\n    },\n\n    /**\n     * Checks whether given graph's node is currently pinned\n     */\n    isNodePinned: function (node) {\n      return getInitializedBody(node.id).isPinned;\n    },\n\n    /**\n     * Request to release all resources\n     */\n    dispose: function() {\n      graph.off('changed', onGraphChanged);\n      api.fire('disposed');\n    },\n\n    /**\n     * Gets physical body for a given node id. If node is not found undefined\n     * value is returned.\n     */\n    getBody: getBody,\n\n    /**\n     * Gets spring for a given edge.\n     *\n     * @param {string} linkId link identifer. If two arguments are passed then\n     * this argument is treated as formNodeId\n     * @param {string=} toId when defined this parameter denotes head of the link\n     * and first argument is trated as tail of the link (fromId)\n     */\n    getSpring: getSpring,\n\n    /**\n     * [Read only] Gets current physics simulator\n     */\n    simulator: physicsSimulator,\n\n    /**\n     * Gets the graph that was used for layout\n     */\n    graph: graph,\n\n    /**\n     * Gets amount of movement performed during last step opeartion\n     */\n    lastMove: 0\n  };\n\n  eventify(api);\n\n  return api;\n\n  function forEachBody(cb) {\n    Object.keys(nodeBodies).forEach(function(bodyId) {\n      cb(nodeBodies[bodyId], bodyId);\n    });\n  }\n\n  function getSpring(fromId, toId) {\n    var linkId;\n    if (toId === undefined) {\n      if (typeof fromId !== 'object') {\n        // assume fromId as a linkId:\n        linkId = fromId;\n      } else {\n        // assume fromId to be a link object:\n        linkId = fromId.id;\n      }\n    } else {\n      // toId is defined, should grab link:\n      var link = graph.hasLink(fromId, toId);\n      if (!link) return;\n      linkId = link.id;\n    }\n\n    return springs[linkId];\n  }\n\n  function getBody(nodeId) {\n    return nodeBodies[nodeId];\n  }\n\n  function listenToEvents() {\n    graph.on('changed', onGraphChanged);\n  }\n\n  function onStableChanged(isStable) {\n    api.fire('stable', isStable);\n  }\n\n  function onGraphChanged(changes) {\n    for (var i = 0; i < changes.length; ++i) {\n      var change = changes[i];\n      if (change.changeType === 'add') {\n        if (change.node) {\n          initBody(change.node.id);\n        }\n        if (change.link) {\n          initLink(change.link);\n        }\n      } else if (change.changeType === 'remove') {\n        if (change.node) {\n          releaseNode(change.node);\n        }\n        if (change.link) {\n          releaseLink(change.link);\n        }\n      }\n    }\n    bodiesCount = graph.getNodesCount();\n  }\n\n  function initPhysics() {\n    bodiesCount = 0;\n\n    graph.forEachNode(function (node) {\n      initBody(node.id);\n      bodiesCount += 1;\n    });\n\n    graph.forEachLink(initLink);\n  }\n\n  function initBody(nodeId) {\n    var body = nodeBodies[nodeId];\n    if (!body) {\n      var node = graph.getNode(nodeId);\n      if (!node) {\n        throw new Error('initBody() was called with unknown node id');\n      }\n\n      var pos = node.position;\n      if (!pos) {\n        var neighbors = getNeighborBodies(node);\n        pos = physicsSimulator.getBestNewBodyPosition(neighbors);\n      }\n\n      body = physicsSimulator.addBodyAt(pos);\n      body.id = nodeId;\n\n      nodeBodies[nodeId] = body;\n      updateBodyMass(nodeId);\n\n      if (isNodeOriginallyPinned(node)) {\n        body.isPinned = true;\n      }\n    }\n  }\n\n  function releaseNode(node) {\n    var nodeId = node.id;\n    var body = nodeBodies[nodeId];\n    if (body) {\n      nodeBodies[nodeId] = null;\n      delete nodeBodies[nodeId];\n\n      physicsSimulator.removeBody(body);\n    }\n  }\n\n  function initLink(link) {\n    updateBodyMass(link.fromId);\n    updateBodyMass(link.toId);\n\n    var fromBody = nodeBodies[link.fromId],\n        toBody  = nodeBodies[link.toId],\n        spring = physicsSimulator.addSpring(fromBody, toBody, link.length);\n\n    springTransform(link, spring);\n\n    springs[link.id] = spring;\n  }\n\n  function releaseLink(link) {\n    var spring = springs[link.id];\n    if (spring) {\n      var from = graph.getNode(link.fromId),\n          to = graph.getNode(link.toId);\n\n      if (from) updateBodyMass(from.id);\n      if (to) updateBodyMass(to.id);\n\n      delete springs[link.id];\n\n      physicsSimulator.removeSpring(spring);\n    }\n  }\n\n  function getNeighborBodies(node) {\n    // TODO: Could probably be done better on memory\n    var neighbors = [];\n    if (!node.links) {\n      return neighbors;\n    }\n    var maxNeighbors = Math.min(node.links.length, 2);\n    for (var i = 0; i < maxNeighbors; ++i) {\n      var link = node.links[i];\n      var otherBody = link.fromId !== node.id ? nodeBodies[link.fromId] : nodeBodies[link.toId];\n      if (otherBody && otherBody.pos) {\n        neighbors.push(otherBody);\n      }\n    }\n\n    return neighbors;\n  }\n\n  function updateBodyMass(nodeId) {\n    var body = nodeBodies[nodeId];\n    body.mass = nodeMass(nodeId);\n    if (Number.isNaN(body.mass)) {\n      throw new Error('Node mass should be a number')\n    }\n  }\n\n  /**\n   * Checks whether graph node has in its settings pinned attribute,\n   * which means layout algorithm cannot move it. Node can be preconfigured\n   * as pinned, if it has \"isPinned\" attribute, or when node.data has it.\n   *\n   * @param {Object} node a graph node to check\n   * @return {Boolean} true if node should be treated as pinned; false otherwise.\n   */\n  function isNodeOriginallyPinned(node) {\n    return (node && (node.isPinned || (node.data && node.data.isPinned)));\n  }\n\n  function getInitializedBody(nodeId) {\n    var body = nodeBodies[nodeId];\n    if (!body) {\n      initBody(nodeId);\n      body = nodeBodies[nodeId];\n    }\n    return body;\n  }\n\n  /**\n   * Calculates mass of a body, which corresponds to node with given id.\n   *\n   * @param {String|Number} nodeId identifier of a node, for which body mass needs to be calculated\n   * @returns {Number} recommended mass of the body;\n   */\n  function defaultNodeMass(nodeId) {\n    var links = graph.getLinks(nodeId);\n    if (!links) return 1;\n    return 1 + links.length / 3.0;\n  }\n}\n\nfunction noop() { }\n","module.exports = Rect;\n\n/**\n * Very generic rectangle.\n */\nfunction Rect (x1, y1, x2, y2) {\n    this.x1 = x1 || 0;\n    this.y1 = y1 || 0;\n    this.x2 = x2 || 0;\n    this.y2 = y2 || 0;\n}\n","module.exports = constant;\n\nvar merge = require('ngraph.merge');\nvar random = require('ngraph.random').random;\nvar Rect = require('../Utils/rect.js');\n\n/**\n * Does not really perform any layouting algorithm but is compliant\n * with renderer interface. Allowing clients to provide specific positioning\n * callback and get static layout of the graph\n *\n * @param {Viva.Graph.graph} graph to layout\n * @param {Object} userSettings\n */\nfunction constant(graph, userSettings) {\n    userSettings = merge(userSettings, {\n        maxX : 1024,\n        maxY : 1024,\n        seed : 'Deterministic randomness made me do this'\n    });\n    // This class simply follows API, it does not use some of the arguments:\n    /*jshint unused: false */\n    var rand = random(userSettings.seed),\n        graphRect = new Rect(Number.MAX_VALUE, Number.MAX_VALUE, Number.MIN_VALUE, Number.MIN_VALUE),\n        layoutLinks = {},\n\n        placeNodeCallback = function (node) {\n            return {\n              x: rand.next(userSettings.maxX),\n              y: rand.next(userSettings.maxY)\n            };\n        },\n\n        updateGraphRect = function (position, graphRect) {\n            if (position.x < graphRect.x1) { graphRect.x1 = position.x; }\n            if (position.x > graphRect.x2) { graphRect.x2 = position.x; }\n            if (position.y < graphRect.y1) { graphRect.y1 = position.y; }\n            if (position.y > graphRect.y2) { graphRect.y2 = position.y; }\n        },\n\n        layoutNodes = typeof Object.create === 'function' ? Object.create(null) : {},\n\n        ensureNodeInitialized = function (node) {\n            layoutNodes[node.id] = placeNodeCallback(node);\n            updateGraphRect(layoutNodes[node.id], graphRect);\n        },\n\n        updateNodePositions = function () {\n            if (graph.getNodesCount() === 0) { return; }\n\n            graphRect.x1 = Number.MAX_VALUE;\n            graphRect.y1 = Number.MAX_VALUE;\n            graphRect.x2 = Number.MIN_VALUE;\n            graphRect.y2 = Number.MIN_VALUE;\n\n            graph.forEachNode(ensureNodeInitialized);\n        },\n\n        ensureLinkInitialized = function (link) {\n          layoutLinks[link.id] = link;\n        },\n\n        onGraphChanged = function(changes) {\n            for (var i = 0; i < changes.length; ++i) {\n                var change = changes[i];\n                if (change.node) {\n                    if (change.changeType === 'add') {\n                        ensureNodeInitialized(change.node);\n                    } else {\n                        delete layoutNodes[change.node.id];\n                    }\n                } if (change.link) {\n                    if (change.changeType === 'add') {\n                        ensureLinkInitialized(change.link);\n                    } else {\n                        delete layoutLinks[change.link.id];\n                    }\n                }\n            }\n        };\n\n    graph.forEachNode(ensureNodeInitialized);\n    graph.forEachLink(ensureLinkInitialized);\n    graph.on('changed', onGraphChanged);\n\n    return {\n        /**\n         * Attempts to layout graph within given number of iterations.\n         *\n         * @param {integer} [iterationsCount] number of algorithm's iterations.\n         *  The constant layout ignores this parameter.\n         */\n        run : function (iterationsCount) {\n            this.step();\n        },\n\n        /**\n         * One step of layout algorithm.\n         */\n        step : function () {\n            updateNodePositions();\n\n            return true; // no need to continue.\n        },\n\n        /**\n         * Returns rectangle structure {x1, y1, x2, y2}, which represents\n         * current space occupied by graph.\n         */\n        getGraphRect : function () {\n            return graphRect;\n        },\n\n        /**\n         * Request to release all resources\n         */\n        dispose : function () {\n            graph.off('change', onGraphChanged);\n        },\n\n        /*\n         * Checks whether given node is pinned; all nodes in this layout are pinned.\n         */\n        isNodePinned: function (node) {\n            return true;\n        },\n\n        /*\n         * Requests layout algorithm to pin/unpin node to its current position\n         * Pinned nodes should not be affected by layout algorithm and always\n         * remain at their position\n         */\n        pinNode: function (node, isPinned) {\n           // noop\n        },\n\n        /*\n         * Gets position of a node by its id. If node was not seen by this\n         * layout algorithm undefined value is returned;\n         */\n        getNodePosition: getNodePosition,\n\n        /**\n         * Returns {from, to} position of a link.\n         */\n        getLinkPosition: function (linkId) {\n          var link = layoutLinks[linkId];\n          return {\n              from : getNodePosition(link.fromId),\n              to : getNodePosition(link.toId)\n          };\n        },\n\n        /**\n         * Sets position of a node to a given coordinates\n         */\n        setNodePosition: function (nodeId, x, y) {\n            var pos = layoutNodes[nodeId];\n            if (pos) {\n                pos.x = x;\n                pos.y = y;\n            }\n        },\n\n        // Layout specific methods:\n\n        /**\n         * Based on argument either update default node placement callback or\n         * attempts to place given node using current placement callback.\n         * Setting new node callback triggers position update for all nodes.\n         *\n         * @param {Object} newPlaceNodeCallbackOrNode - if it is a function then\n         * default node placement callback is replaced with new one. Node placement\n         * callback has a form of function (node) {}, and is expected to return an\n         * object with x and y properties set to numbers.\n         *\n         * Otherwise if it's not a function the argument is treated as graph node\n         * and current node placement callback will be used to place it.\n         */\n        placeNode : function (newPlaceNodeCallbackOrNode) {\n            if (typeof newPlaceNodeCallbackOrNode === 'function') {\n                placeNodeCallback = newPlaceNodeCallbackOrNode;\n                updateNodePositions();\n                return this;\n            }\n\n            // it is not a request to update placeNodeCallback, trying to place\n            // a node using current callback:\n            return placeNodeCallback(newPlaceNodeCallbackOrNode);\n        }\n\n    };\n\n    function getNodePosition(nodeId) {\n        return layoutNodes[nodeId];\n    }\n}\n","module.exports = Texture;\n\n/**\n * Single texture in the webglAtlas.\n */\nfunction Texture(size) {\n  this.canvas = window.document.createElement(\"canvas\");\n  this.ctx = this.canvas.getContext(\"2d\");\n  this.isDirty = false;\n  this.canvas.width = this.canvas.height = size;\n}\n","var Texture = require('./texture.js');\n\nmodule.exports = webglAtlas;\n\n/**\n * My naive implementation of textures atlas. It allows clients to load\n * multiple images into atlas and get canvas representing all of them.\n *\n * @param tilesPerTexture - indicates how many images can be loaded to one\n *          texture of the atlas. If number of loaded images exceeds this\n *          parameter a new canvas will be created.\n */\nfunction webglAtlas(tilesPerTexture) {\n  var tilesPerRow = Math.sqrt(tilesPerTexture || 1024) << 0,\n    tileSize = tilesPerRow,\n    lastLoadedIdx = 1,\n    loadedImages = {},\n    dirtyTimeoutId,\n    skipedDirty = 0,\n    textures = [],\n    trackedUrls = [];\n\n  if (!isPowerOf2(tilesPerTexture)) {\n    throw \"Tiles per texture should be power of two.\";\n  }\n\n  // this is the return object\n  var api = {\n    /**\n     * indicates whether atlas has changed texture in it. If true then\n     * some of the textures has isDirty flag set as well.\n     */\n    isDirty: false,\n\n    /**\n     * Clears any signs of atlas changes.\n     */\n    clearDirty: clearDirty,\n\n    /**\n     * Removes given url from collection of tiles in the atlas.\n     */\n    remove: remove,\n\n    /**\n     * Gets all textures in the atlas.\n     */\n    getTextures: getTextures,\n\n    /**\n     * Gets coordinates of the given image in the atlas. Coordinates is an object:\n     * {offset : int } - where offset is an absolute position of the image in the\n     * atlas.\n     *\n     * Absolute means it can be larger than tilesPerTexture parameter, and in that\n     * case clients should get next texture in getTextures() collection.\n     */\n    getCoordinates: getCoordinates,\n\n    /**\n     * Asynchronously Loads the image to the atlas. Cross-domain security\n     * limitation applies.\n     */\n    load: load\n  };\n\n  return api;\n\n  function clearDirty() {\n    var i;\n    api.isDirty = false;\n    for (i = 0; i < textures.length; ++i) {\n      textures[i].isDirty = false;\n    }\n  }\n\n  function remove(imgUrl) {\n    var coordinates = loadedImages[imgUrl];\n    if (!coordinates) {\n      return false;\n    }\n    delete loadedImages[imgUrl];\n    lastLoadedIdx -= 1;\n\n\n    if (lastLoadedIdx === coordinates.offset) {\n      return true; // Ignore if it's last image in the whole set.\n    }\n\n    var tileToRemove = getTileCoordinates(coordinates.offset),\n      lastTileInSet = getTileCoordinates(lastLoadedIdx);\n\n    copy(lastTileInSet, tileToRemove);\n\n    var replacedOffset = loadedImages[trackedUrls[lastLoadedIdx]];\n    replacedOffset.offset = coordinates.offset;\n    trackedUrls[coordinates.offset] = trackedUrls[lastLoadedIdx];\n\n    markDirty();\n    return true;\n  }\n\n  function getTextures() {\n    return textures; // I trust you...\n  }\n\n  function getCoordinates(imgUrl) {\n    return loadedImages[imgUrl];\n  }\n\n  function load(imgUrl, callback) {\n    if (loadedImages.hasOwnProperty(imgUrl)) {\n      callback(loadedImages[imgUrl]);\n    } else {\n      var img = new window.Image(),\n        imgId = lastLoadedIdx;\n\n      lastLoadedIdx += 1;\n      img.crossOrigin = \"anonymous\";\n      img.onload = function() {\n        markDirty();\n        drawAt(imgId, img, callback);\n      };\n\n      img.src = imgUrl;\n    }\n  }\n\n  function createTexture() {\n    var texture = new Texture(tilesPerRow * tileSize);\n    textures.push(texture);\n  }\n\n  function drawAt(tileNumber, img, callback) {\n    var tilePosition = getTileCoordinates(tileNumber),\n      coordinates = {\n        offset: tileNumber\n      };\n\n    if (tilePosition.textureNumber >= textures.length) {\n      createTexture();\n    }\n    var currentTexture = textures[tilePosition.textureNumber];\n\n    currentTexture.ctx.drawImage(img, tilePosition.col * tileSize, tilePosition.row * tileSize, tileSize, tileSize);\n    trackedUrls[tileNumber] = img.src;\n\n    loadedImages[img.src] = coordinates;\n    currentTexture.isDirty = true;\n\n    callback(coordinates);\n  }\n\n  function getTileCoordinates(absolutePosition) {\n    var textureNumber = (absolutePosition / tilesPerTexture) << 0,\n      localTileNumber = (absolutePosition % tilesPerTexture),\n      row = (localTileNumber / tilesPerRow) << 0,\n      col = (localTileNumber % tilesPerRow);\n\n    return {\n      textureNumber: textureNumber,\n      row: row,\n      col: col\n    };\n  }\n\n  function markDirtyNow() {\n    api.isDirty = true;\n    skipedDirty = 0;\n    dirtyTimeoutId = null;\n  }\n\n  function markDirty() {\n    // delay this call, since it results in texture reload\n    if (dirtyTimeoutId) {\n      window.clearTimeout(dirtyTimeoutId);\n      skipedDirty += 1;\n      dirtyTimeoutId = null;\n    }\n\n    if (skipedDirty > 10) {\n      markDirtyNow();\n    } else {\n      dirtyTimeoutId = window.setTimeout(markDirtyNow, 400);\n    }\n  }\n\n  function copy(from, to) {\n    var fromCanvas = textures[from.textureNumber].canvas,\n      toCtx = textures[to.textureNumber].ctx,\n      x = to.col * tileSize,\n      y = to.row * tileSize;\n\n    toCtx.drawImage(fromCanvas, from.col * tileSize, from.row * tileSize, tileSize, tileSize, x, y, tileSize, tileSize);\n    textures[from.textureNumber].isDirty = true;\n    textures[to.textureNumber].isDirty = true;\n  }\n}\n\nfunction isPowerOf2(n) {\n  return (n & (n - 1)) === 0;\n}\n","/**\n * @fileOverview Defines an image nodes for webglGraphics class.\n * Shape of nodes is square.\n *\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\n */\n\nvar WebglAtlas = require('./webglAtlas.js');\nvar glUtils = require('./webgl.js');\n\nmodule.exports = webglImageNodeProgram;\n\n/**\n * Defines simple UI for nodes in webgl renderer. Each node is rendered as an image.\n * \n * @param {number} tilesPerTexture\n * \n */\nfunction webglImageNodeProgram(tilesPerTexture) {\n  // WebGL is gian state machine, we store some properties of the state here:\n  var ATTRIBUTES_PER_PRIMITIVE = 18;\n  var nodesFS = createNodeFragmentShader();\n  var nodesVS = createNodeVertexShader();\n  var tilesPerTexture = tilesPerTexture || 1024; // TODO: Get based on max texture size\n  var atlas;\n  var program;\n  var gl;\n  var buffer;\n  var utils;\n  var locations;\n  var nodesCount = 0;\n  var nodes = new Float32Array(64);\n  var width;\n  var height;\n  var transform;\n  var sizeDirty;\n\n\n  return {\n    load: load,\n\n    /**\n     * Updates position of current node in the buffer of nodes.\n     *\n     * @param idx - index of current node.\n     * @param pos - new position of the node.\n     */\n    position: position,\n\n    createNode: createNode,\n\n    removeNode: removeNode,\n\n    replaceProperties: replaceProperties,\n\n    updateTransform: updateTransform,\n\n    updateSize: updateSize,\n\n    render: render\n  };\n\n  function refreshTexture(texture, idx) {\n    if (texture.nativeObject) {\n      gl.deleteTexture(texture.nativeObject);\n    }\n\n    var nativeObject = gl.createTexture();\n    gl.activeTexture(gl[\"TEXTURE\" + idx]);\n    gl.bindTexture(gl.TEXTURE_2D, nativeObject);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.canvas);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.uniform1i(locations[\"sampler\" + idx], idx);\n\n    texture.nativeObject = nativeObject;\n  }\n\n  function ensureAtlasTextureUpdated() {\n    if (atlas.isDirty) {\n      var textures = atlas.getTextures(),\n        i;\n      for (i = 0; i < textures.length; ++i) {\n        if (textures[i].isDirty || !textures[i].nativeObject) {\n          refreshTexture(textures[i], i);\n        }\n      }\n\n      atlas.clearDirty();\n    }\n  }\n\n  function load(glContext) {\n    gl = glContext;\n    utils = glUtils(glContext);\n\n    atlas = new WebglAtlas(tilesPerTexture);\n\n    program = utils.createProgram(nodesVS, nodesFS);\n    gl.useProgram(program);\n    locations = utils.getLocations(program, [\"a_vertexPos\", \"a_customAttributes\", \"u_screenSize\", \"u_transform\", \"u_sampler0\", \"u_sampler1\", \"u_sampler2\", \"u_sampler3\", \"u_tilesPerTexture\"]);\n\n    gl.uniform1f(locations.tilesPerTexture, tilesPerTexture);\n\n    gl.enableVertexAttribArray(locations.vertexPos);\n    gl.enableVertexAttribArray(locations.customAttributes);\n\n    buffer = gl.createBuffer();\n  }\n\n  function position(nodeUI, pos) {\n    var idx = nodeUI.id * ATTRIBUTES_PER_PRIMITIVE;\n    nodes[idx] = pos.x - nodeUI.size;\n    nodes[idx + 1] = -pos.y - nodeUI.size;\n    nodes[idx + 2] = nodeUI._offset * 4;\n\n    nodes[idx + 3] = pos.x + nodeUI.size;\n    nodes[idx + 4] = -pos.y - nodeUI.size;\n    nodes[idx + 5] = nodeUI._offset * 4 + 1;\n\n    nodes[idx + 6] = pos.x - nodeUI.size;\n    nodes[idx + 7] = -pos.y + nodeUI.size;\n    nodes[idx + 8] = nodeUI._offset * 4 + 2;\n\n    nodes[idx + 9] = pos.x - nodeUI.size;\n    nodes[idx + 10] = -pos.y + nodeUI.size;\n    nodes[idx + 11] = nodeUI._offset * 4 + 2;\n\n    nodes[idx + 12] = pos.x + nodeUI.size;\n    nodes[idx + 13] = -pos.y - nodeUI.size;\n    nodes[idx + 14] = nodeUI._offset * 4 + 1;\n\n    nodes[idx + 15] = pos.x + nodeUI.size;\n    nodes[idx + 16] = -pos.y + nodeUI.size;\n    nodes[idx + 17] = nodeUI._offset * 4 + 3;\n  }\n\n  function createNode(ui) {\n    nodes = utils.extendArray(nodes, nodesCount, ATTRIBUTES_PER_PRIMITIVE);\n    nodesCount += 1;\n\n    var coordinates = atlas.getCoordinates(ui.src);\n    if (coordinates) {\n      ui._offset = coordinates.offset;\n    } else {\n      ui._offset = 0;\n      // Image is not yet loaded into the atlas. Reload it:\n      atlas.load(ui.src, function(coordinates) {\n        ui._offset = coordinates.offset;\n      });\n    }\n  }\n\n  function removeNode(nodeUI) {\n    if (nodesCount > 0) {\n      nodesCount -= 1;\n    }\n\n    if (nodeUI.id < nodesCount && nodesCount > 0) {\n      if (nodeUI.src) {\n        atlas.remove(nodeUI.src);\n      }\n\n      utils.copyArrayPart(nodes, nodeUI.id * ATTRIBUTES_PER_PRIMITIVE, nodesCount * ATTRIBUTES_PER_PRIMITIVE, ATTRIBUTES_PER_PRIMITIVE);\n    }\n  }\n\n  function replaceProperties(replacedNode, newNode) {\n    newNode._offset = replacedNode._offset;\n  }\n\n  function updateTransform(newTransform) {\n    sizeDirty = true;\n    transform = newTransform;\n  }\n\n  function updateSize(w, h) {\n    width = w;\n    height = h;\n    sizeDirty = true;\n  }\n\n  function render() {\n    gl.useProgram(program);\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, nodes, gl.DYNAMIC_DRAW);\n\n    if (sizeDirty) {\n      sizeDirty = false;\n      gl.uniformMatrix4fv(locations.transform, false, transform);\n      gl.uniform2f(locations.screenSize, width, height);\n    }\n\n    gl.vertexAttribPointer(locations.vertexPos, 2, gl.FLOAT, false, 3 * Float32Array.BYTES_PER_ELEMENT, 0);\n    gl.vertexAttribPointer(locations.customAttributes, 1, gl.FLOAT, false, 3 * Float32Array.BYTES_PER_ELEMENT, 2 * 4);\n\n    ensureAtlasTextureUpdated();\n\n    gl.drawArrays(gl.TRIANGLES, 0, nodesCount * 6);\n  }\n}\n\n// TODO: Use glslify for shaders\nfunction createNodeFragmentShader() {\n  return [\n    \"precision mediump float;\",\n    \"varying vec4 color;\",\n    \"varying vec3 vTextureCoord;\",\n    \"uniform sampler2D u_sampler0;\",\n    \"uniform sampler2D u_sampler1;\",\n    \"uniform sampler2D u_sampler2;\",\n    \"uniform sampler2D u_sampler3;\",\n\n    \"void main(void) {\",\n    \"   if (vTextureCoord.z == 0.) {\",\n    \"     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);\",\n    \"   } else if (vTextureCoord.z == 1.) {\",\n    \"     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);\",\n    \"   } else if (vTextureCoord.z == 2.) {\",\n    \"     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);\",\n    \"   } else if (vTextureCoord.z == 3.) {\",\n    \"     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);\",\n    \"   } else { gl_FragColor = vec4(0, 1, 0, 1); }\",\n    \"}\"\n  ].join(\"\\n\");\n}\n\nfunction createNodeVertexShader() {\n  return [\n    \"attribute vec2 a_vertexPos;\",\n\n    \"attribute float a_customAttributes;\",\n    \"uniform vec2 u_screenSize;\",\n    \"uniform mat4 u_transform;\",\n    \"uniform float u_tilesPerTexture;\",\n    \"varying vec3 vTextureCoord;\",\n\n    \"void main(void) {\",\n    \"   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);\",\n    \"float corner = mod(a_customAttributes, 4.);\",\n    \"float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);\",\n    \"float tilesPerRow = sqrt(u_tilesPerTexture);\",\n    \"float tileSize = 1./tilesPerRow;\",\n    \"float tileColumn = mod(tileIndex, tilesPerRow);\",\n    \"float tileRow = floor(tileIndex/tilesPerRow);\",\n\n    \"if(corner == 0.0) {\",\n    \"  vTextureCoord.xy = vec2(0, 1);\",\n    \"} else if(corner == 1.0) {\",\n    \"  vTextureCoord.xy = vec2(1, 1);\",\n    \"} else if(corner == 2.0) {\",\n    \"  vTextureCoord.xy = vec2(0, 0);\",\n    \"} else {\",\n    \"  vTextureCoord.xy = vec2(1, 0);\",\n    \"}\",\n\n    \"vTextureCoord *= tileSize;\",\n    \"vTextureCoord.x += tileColumn * tileSize;\",\n    \"vTextureCoord.y += tileRow * tileSize;\",\n    \"vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);\",\n    \"}\"\n  ].join(\"\\n\");\n}\n","/**\n * @fileOverview Defines a naive form of links for webglGraphics class.\n * This form allows to change color of links.\n **/\n\nvar glUtils = require('./webgl.js');\n\nmodule.exports = webglLinkProgram;\n\n/**\n * Defines UI for links in webgl renderer.\n */\nfunction webglLinkProgram() {\n    var ATTRIBUTES_PER_PRIMITIVE = 6, // primitive is Line with two points. Each has x,y and color = 3 * 2 attributes.\n        BYTES_PER_LINK = 2 * (2 * Float32Array.BYTES_PER_ELEMENT + Uint32Array.BYTES_PER_ELEMENT), // two nodes * (x, y + color)\n        linksFS = [\n            'precision mediump float;',\n            'varying vec4 color;',\n            'void main(void) {',\n            '   gl_FragColor = color;',\n            '}'\n        ].join('\\n'),\n\n        linksVS = [\n            'attribute vec2 a_vertexPos;',\n            'attribute vec4 a_color;',\n\n            'uniform vec2 u_screenSize;',\n            'uniform mat4 u_transform;',\n\n            'varying vec4 color;',\n\n            'void main(void) {',\n            '   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);',\n            '   color = a_color.abgr;',\n            '}'\n        ].join('\\n'),\n\n        program,\n        gl,\n        buffer,\n        utils,\n        locations,\n        linksCount = 0,\n        frontLinkId, // used to track z-index of links.\n        storage = new ArrayBuffer(16 * BYTES_PER_LINK),\n        positions = new Float32Array(storage),\n        colors = new Uint32Array(storage),\n        width,\n        height,\n        transform,\n        sizeDirty,\n\n        ensureEnoughStorage = function () {\n            // TODO: this is a duplicate of webglNodeProgram code. Extract it to webgl.js\n            if ((linksCount+1)*BYTES_PER_LINK > storage.byteLength) {\n                // Every time we run out of space create new array twice bigger.\n                // TODO: it seems buffer size is limited. Consider using multiple arrays for huge graphs\n                var extendedStorage = new ArrayBuffer(storage.byteLength * 2),\n                    extendedPositions = new Float32Array(extendedStorage),\n                    extendedColors = new Uint32Array(extendedStorage);\n\n                extendedColors.set(colors); // should be enough to copy just one view.\n                positions = extendedPositions;\n                colors = extendedColors;\n                storage = extendedStorage;\n            }\n        };\n\n    return {\n        load : function (glContext) {\n            gl = glContext;\n            utils = glUtils(glContext);\n\n            program = utils.createProgram(linksVS, linksFS);\n            gl.useProgram(program);\n            locations = utils.getLocations(program, ['a_vertexPos', 'a_color', 'u_screenSize', 'u_transform']);\n\n            gl.enableVertexAttribArray(locations.vertexPos);\n            gl.enableVertexAttribArray(locations.color);\n\n            buffer = gl.createBuffer();\n        },\n\n        position: function (linkUi, fromPos, toPos) {\n            var linkIdx = linkUi.id,\n                offset = linkIdx * ATTRIBUTES_PER_PRIMITIVE;\n            positions[offset] = fromPos.x;\n            positions[offset + 1] = fromPos.y;\n            colors[offset + 2] = linkUi.color;\n\n            positions[offset + 3] = toPos.x;\n            positions[offset + 4] = toPos.y;\n            colors[offset + 5] = linkUi.color;\n        },\n\n        createLink : function (ui) {\n            ensureEnoughStorage();\n\n            linksCount += 1;\n            frontLinkId = ui.id;\n        },\n\n        removeLink : function (ui) {\n            if (linksCount > 0) { linksCount -= 1; }\n            // swap removed link with the last link. This will give us O(1) performance for links removal:\n            if (ui.id < linksCount && linksCount > 0) {\n                // using colors as a view to array buffer is okay here.\n                utils.copyArrayPart(colors, ui.id * ATTRIBUTES_PER_PRIMITIVE, linksCount * ATTRIBUTES_PER_PRIMITIVE, ATTRIBUTES_PER_PRIMITIVE);\n            }\n        },\n\n        updateTransform : function (newTransform) {\n            sizeDirty = true;\n            transform = newTransform;\n        },\n\n        updateSize : function (w, h) {\n            width = w;\n            height = h;\n            sizeDirty = true;\n        },\n\n        render : function () {\n            gl.useProgram(program);\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.bufferData(gl.ARRAY_BUFFER, storage, gl.DYNAMIC_DRAW);\n\n            if (sizeDirty) {\n                sizeDirty = false;\n                gl.uniformMatrix4fv(locations.transform, false, transform);\n                gl.uniform2f(locations.screenSize, width, height);\n            }\n\n            gl.vertexAttribPointer(locations.vertexPos, 2, gl.FLOAT, false, 3 * Float32Array.BYTES_PER_ELEMENT, 0);\n            gl.vertexAttribPointer(locations.color, 4, gl.UNSIGNED_BYTE, true, 3 * Float32Array.BYTES_PER_ELEMENT, 2 * 4);\n\n            gl.drawArrays(gl.LINES, 0, linksCount * 2);\n\n            frontLinkId = linksCount - 1;\n        },\n\n        bringToFront : function (link) {\n            if (frontLinkId > link.id) {\n                utils.swapArrayPart(positions, link.id * ATTRIBUTES_PER_PRIMITIVE, frontLinkId * ATTRIBUTES_PER_PRIMITIVE, ATTRIBUTES_PER_PRIMITIVE);\n            }\n            if (frontLinkId > 0) {\n                frontLinkId -= 1;\n            }\n        },\n\n        getFrontLinkId : function () {\n            return frontLinkId;\n        }\n    };\n}\n","/**\n * @fileOverview Defines a naive form of nodes for webglGraphics class.\n * This form allows to change color of node. Shape of nodes is rectangular.\n *\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\n */\n\nvar glUtils = require('./webgl.js');\n\nmodule.exports = webglNodeProgram;\n\n/**\n * Defines simple UI for nodes in webgl renderer. Each node is rendered as square. Color and size can be changed.\n */\nfunction webglNodeProgram() {\n  var ATTRIBUTES_PER_PRIMITIVE = 4; // Primitive is point, x, y, size, color\n  // x, y, z - floats, color = uint.\n  var BYTES_PER_NODE = 3 * Float32Array.BYTES_PER_ELEMENT + Uint32Array.BYTES_PER_ELEMENT;\n  var nodesFS = [\n    'precision mediump float;',\n    'varying vec4 color;',\n\n    'void main(void) {',\n    '   gl_FragColor = color;',\n    '}'\n  ].join('\\n');\n  var nodesVS = [\n    'attribute vec3 a_vertexPos;',\n    'attribute vec4 a_color;',\n    'uniform vec2 u_screenSize;',\n    'uniform mat4 u_transform;',\n    'varying vec4 color;',\n\n    'void main(void) {',\n    '   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);',\n    '   gl_PointSize = a_vertexPos.z * u_transform[0][0];',\n    '   color = a_color.abgr;',\n    '}'\n  ].join('\\n');\n\n  var program;\n  var gl;\n  var buffer;\n  var locations;\n  var utils;\n  var storage = new ArrayBuffer(16 * BYTES_PER_NODE);\n  var positions = new Float32Array(storage);\n  var colors = new Uint32Array(storage);\n  var nodesCount = 0;\n  var width;\n  var height;\n  var transform;\n  var sizeDirty;\n\n  return {\n    load: load,\n\n    /**\n     * Updates position of node in the buffer of nodes.\n     *\n     * @param idx - index of current node.\n     * @param pos - new position of the node.\n     */\n    position: position,\n\n    updateTransform: updateTransform,\n\n    updateSize: updateSize,\n\n    removeNode: removeNode,\n\n    createNode: createNode,\n\n    replaceProperties: replaceProperties,\n\n    render: render\n  };\n\n  function ensureEnoughStorage() {\n    if ((nodesCount + 1) * BYTES_PER_NODE >= storage.byteLength) {\n      // Every time we run out of space create new array twice bigger.\n      // TODO: it seems buffer size is limited. Consider using multiple arrays for huge graphs\n      var extendedStorage = new ArrayBuffer(storage.byteLength * 2),\n        extendedPositions = new Float32Array(extendedStorage),\n        extendedColors = new Uint32Array(extendedStorage);\n\n      extendedColors.set(colors); // should be enough to copy just one view.\n      positions = extendedPositions;\n      colors = extendedColors;\n      storage = extendedStorage;\n    }\n  }\n\n  function load(glContext) {\n    gl = glContext;\n    utils = glUtils(glContext);\n\n    program = utils.createProgram(nodesVS, nodesFS);\n    gl.useProgram(program);\n    locations = utils.getLocations(program, ['a_vertexPos', 'a_color', 'u_screenSize', 'u_transform']);\n\n    gl.enableVertexAttribArray(locations.vertexPos);\n    gl.enableVertexAttribArray(locations.color);\n\n    buffer = gl.createBuffer();\n  }\n\n  function position(nodeUI, pos) {\n    var idx = nodeUI.id;\n\n    positions[idx * ATTRIBUTES_PER_PRIMITIVE] = pos.x;\n    positions[idx * ATTRIBUTES_PER_PRIMITIVE + 1] = -pos.y;\n    positions[idx * ATTRIBUTES_PER_PRIMITIVE + 2] = nodeUI.size;\n\n    colors[idx * ATTRIBUTES_PER_PRIMITIVE + 3] = nodeUI.color;\n  }\n\n  function updateTransform(newTransform) {\n    sizeDirty = true;\n    transform = newTransform;\n  }\n\n  function updateSize(w, h) {\n    width = w;\n    height = h;\n    sizeDirty = true;\n  }\n\n  function removeNode(node) {\n      if (nodesCount > 0) {\n        nodesCount -= 1;\n      }\n\n      if (node.id < nodesCount && nodesCount > 0) {\n        // we can use colors as a 'view' into array array buffer.\n        utils.copyArrayPart(colors, node.id * ATTRIBUTES_PER_PRIMITIVE, nodesCount * ATTRIBUTES_PER_PRIMITIVE, ATTRIBUTES_PER_PRIMITIVE);\n      }\n    }\n\n  function createNode() {\n    ensureEnoughStorage();\n    nodesCount += 1;\n  }\n\n  function replaceProperties(/* replacedNode, newNode */) {}\n\n  function render() {\n    gl.useProgram(program);\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, storage, gl.DYNAMIC_DRAW);\n\n    if (sizeDirty) {\n      sizeDirty = false;\n      gl.uniformMatrix4fv(locations.transform, false, transform);\n      gl.uniform2f(locations.screenSize, width, height);\n    }\n\n    gl.vertexAttribPointer(locations.vertexPos, 3, gl.FLOAT, false, ATTRIBUTES_PER_PRIMITIVE * Float32Array.BYTES_PER_ELEMENT, 0);\n    gl.vertexAttribPointer(locations.color, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES_PER_PRIMITIVE * Float32Array.BYTES_PER_ELEMENT, 3 * 4);\n\n    gl.drawArrays(gl.POINTS, 0, nodesCount);\n  }\n}\n","module.exports = parseColor;\n\nfunction parseColor(color) {\n  var parsedColor = 0x009ee8ff;\n\n  if (typeof color === 'string' && color) {\n    if (color.length === 4) { // #rgb\n      color = color.replace(/([^#])/g, '$1$1'); // duplicate each letter except first #.\n    }\n    if (color.length === 9) { // #rrggbbaa\n      parsedColor = parseInt(color.substr(1), 16);\n    } else if (color.length === 7) { // or #rrggbb.\n      parsedColor = (parseInt(color.substr(1), 16) << 8) | 0xff;\n    } else {\n      throw 'Color expected in hex format with preceding \"#\". E.g. #00ff00. Got value: ' + color;\n    }\n  } else if (typeof color === 'number') {\n    parsedColor = color;\n  }\n\n  return parsedColor;\n}\n","var parseColor = require('./parseColor.js');\n\nmodule.exports = webglLine;\n\n/**\n * Defines a webgl line. This class has no rendering logic at all,\n * it's just passed to corresponding shader and the shader should\n * figure out how to render it.\n *\n */\nfunction webglLine(color) {\n  return {\n    /**\n     * Gets or sets color of the line. If you set this property externally\n     * make sure it always come as integer of 0xRRGGBBAA format\n     */\n    color: parseColor(color)\n  };\n}\n","var parseColor = require('./parseColor.js');\n\nmodule.exports = webglSquare;\n\n/**\n * Can be used as a callback in the webglGraphics.node() function, to\n * create a custom looking node.\n *\n * @param size - size of the node in pixels.\n * @param color - color of the node in '#rrggbbaa' or '#rgb' format.\n */\nfunction webglSquare(size, color) {\n  return {\n    /**\n     * Gets or sets size of the square side.\n     */\n    size: typeof size === 'number' ? size : 10,\n\n    /**\n     * Gets or sets color of the square.\n     */\n    color: parseColor(color)\n  };\n}\n","module.exports = webglImage;\n\n/**\n * Represents a model for image.\n */\nfunction webglImage(size, src) {\n    return {\n        /**\n         * Gets texture index where current image is placed.\n         */\n        _texture : 0,\n\n        /**\n         * Gets offset in the texture where current image is placed.\n         */\n        _offset : 0,\n\n        /**\n         * Gets size of the square with the image.\n         */\n        size : typeof size === 'number' ? size : 32,\n\n        /**\n         * Source of the image. If image is coming not from your domain\n         * certain origin restrictions applies.\n         * See http://www.khronos.org/registry/webgl/specs/latest/#4.2 for more details.\n         */\n        src  : src\n    };\n}\n","/**\r\n * @fileOverview Defines a graph renderer that uses WebGL based drawings.\r\n *\r\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\r\n */\r\n\r\nmodule.exports = webglGraphics;\r\n\r\nvar webglInputManager = require('../Input/webglInputManager.js');\r\nvar webglLinkProgram = require('../WebGL/webglLinkProgram.js');\r\nvar webglNodeProgram = require('../WebGL/webglNodeProgram.js');\r\nvar webglSquare = require('../WebGL/webglSquare.js');\r\nvar webglLine = require('../WebGL/webglLine.js');\r\nvar eventify = require('ngraph.events');\r\nvar merge = require('ngraph.merge');\r\n\r\n/**\r\n * Performs webgl-based graph rendering. This module does not perform\r\n * layout, but only visualizes nodes and edges of the graph.\r\n *\r\n * @param options - to customize graphics  behavior. Currently supported parameter\r\n *  enableBlending - true by default, allows to use transparency in node/links colors.\r\n *  preserveDrawingBuffer - false by default, tells webgl to preserve drawing buffer.\r\n *                    See https://www.khronos.org/registry/webgl/specs/1.0/#5.2\r\n */\r\n\r\nfunction webglGraphics(options) {\r\n    options = merge(options, {\r\n        enableBlending : true,\r\n        preserveDrawingBuffer : false,\r\n        clearColor: false,\r\n        clearColorValue : {\r\n            r : 1,\r\n            g : 1,\r\n            b : 1,\r\n            a : 1\r\n        }\r\n    });\r\n\r\n    var container,\r\n        graphicsRoot,\r\n        gl,\r\n        width,\r\n        height,\r\n        nodesCount = 0,\r\n        linksCount = 0,\r\n        transform = [\r\n            1, 0, 0, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1\r\n        ],\r\n        userPlaceNodeCallback,\r\n        userPlaceLinkCallback,\r\n        nodes = [],\r\n        links = [],\r\n        initCallback,\r\n\r\n        allNodes = {},\r\n        allLinks = {},\r\n        linkProgram = webglLinkProgram(),\r\n        nodeProgram = webglNodeProgram(),\r\n/*jshint unused: false */\r\n        nodeUIBuilder = function (node) {\r\n            return webglSquare(); // Just make a square, using provided gl context (a nodeProgram);\r\n        },\r\n\r\n        linkUIBuilder = function (link) {\r\n            return webglLine(0xb3b3b3ff);\r\n        },\r\n/*jshint unused: true */\r\n        updateTransformUniform = function () {\r\n            linkProgram.updateTransform(transform);\r\n            nodeProgram.updateTransform(transform);\r\n        },\r\n\r\n        resetScaleInternal = function () {\r\n            transform = [1, 0, 0, 0,\r\n                        0, 1, 0, 0,\r\n                        0, 0, 1, 0,\r\n                        0, 0, 0, 1];\r\n        },\r\n\r\n        updateSize = function () {\r\n            if (container && graphicsRoot) {\r\n                width = graphicsRoot.width = Math.max(container.offsetWidth, 1);\r\n                height = graphicsRoot.height = Math.max(container.offsetHeight, 1);\r\n                if (gl) { gl.viewport(0, 0, width, height); }\r\n                if (linkProgram) { linkProgram.updateSize(width / 2, height / 2); }\r\n                if (nodeProgram) { nodeProgram.updateSize(width / 2, height / 2); }\r\n            }\r\n        },\r\n\r\n        fireRescaled = function (graphics) {\r\n            graphics.fire(\"rescaled\");\r\n        };\r\n\r\n    graphicsRoot = window.document.createElement(\"canvas\");\r\n\r\n    var graphics = {\r\n        getLinkUI: function (linkId) {\r\n            return allLinks[linkId];\r\n        },\r\n\r\n        getNodeUI: function (nodeId) {\r\n            return allNodes[nodeId];\r\n        },\r\n\r\n        /**\r\n         * Sets the callback that creates node representation.\r\n         *\r\n         * @param builderCallback a callback function that accepts graph node\r\n         * as a parameter and must return an element representing this node.\r\n         *\r\n         * @returns If builderCallbackOrNode is a valid callback function, instance of this is returned;\r\n         * Otherwise undefined value is returned\r\n         */\r\n        node : function (builderCallback) {\r\n            if (typeof builderCallback !== \"function\") {\r\n                return; // todo: throw? This is not compatible with old versions\r\n            }\r\n\r\n            nodeUIBuilder = builderCallback;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sets the callback that creates link representation\r\n         *\r\n         * @param builderCallback a callback function that accepts graph link\r\n         * as a parameter and must return an element representing this link.\r\n         *\r\n         * @returns If builderCallback is a valid callback function, instance of this is returned;\r\n         * Otherwise undefined value is returned.\r\n         */\r\n        link : function (builderCallback) {\r\n            if (typeof builderCallback !== \"function\") {\r\n                return; // todo: throw? This is not compatible with old versions\r\n            }\r\n\r\n            linkUIBuilder = builderCallback;\r\n            return this;\r\n        },\r\n\r\n\r\n        /**\r\n         * Allows to override default position setter for the node with a new\r\n         * function. newPlaceCallback(nodeUI, position) is function which\r\n         * is used by updateNodePosition().\r\n         */\r\n        placeNode : function (newPlaceCallback) {\r\n            userPlaceNodeCallback = newPlaceCallback;\r\n            return this;\r\n        },\r\n\r\n        placeLink : function (newPlaceLinkCallback) {\r\n            userPlaceLinkCallback = newPlaceLinkCallback;\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Custom input manager listens to mouse events to process nodes drag-n-drop inside WebGL canvas\r\n         */\r\n        inputManager : webglInputManager,\r\n\r\n        /**\r\n         * Called every time before renderer starts rendering.\r\n         */\r\n        beginRender : function () {\r\n            // this function could be replaced by this.init,\r\n            // based on user options.\r\n        },\r\n\r\n        /**\r\n         * Called every time when renderer finishes one step of rendering.\r\n         */\r\n        endRender : function () {\r\n            if (linksCount > 0) {\r\n                linkProgram.render();\r\n            }\r\n            if (nodesCount > 0) {\r\n                nodeProgram.render();\r\n            }\r\n        },\r\n\r\n        bringLinkToFront : function (linkUI) {\r\n            var frontLinkId = linkProgram.getFrontLinkId(),\r\n                srcLinkId,\r\n                temp;\r\n\r\n            linkProgram.bringToFront(linkUI);\r\n\r\n            if (frontLinkId > linkUI.id) {\r\n                srcLinkId = linkUI.id;\r\n\r\n                temp = links[frontLinkId];\r\n                links[frontLinkId] = links[srcLinkId];\r\n                links[frontLinkId].id = frontLinkId;\r\n                links[srcLinkId] = temp;\r\n                links[srcLinkId].id = srcLinkId;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets translate operation that should be applied to all nodes and links.\r\n         */\r\n        graphCenterChanged : function (x, y) {\r\n            transform[12] = (2 * x / width) - 1;\r\n            transform[13] = 1 - (2 * y / height);\r\n            updateTransformUniform();\r\n        },\r\n\r\n        /**\r\n         * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n         * provider prepare to render given link of the graph\r\n         *\r\n         * @param link - model of a link\r\n         */\r\n        addLink: function (link, boundPosition) {\r\n            var uiid = linksCount++,\r\n                ui = linkUIBuilder(link);\r\n            ui.id = uiid;\r\n            ui.pos = boundPosition;\r\n\r\n            linkProgram.createLink(ui);\r\n\r\n            links[uiid] = ui;\r\n            allLinks[link.id] = ui;\r\n            return ui;\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider prepare to render given node of the graph.\r\n        *\r\n        * @param nodeUI visual representation of the node created by node() execution.\r\n        **/\r\n        addNode : function (node, boundPosition) {\r\n            var uiid = nodesCount++,\r\n                ui = nodeUIBuilder(node);\r\n\r\n            ui.id = uiid;\r\n            ui.position = boundPosition;\r\n            ui.node = node;\r\n\r\n            nodeProgram.createNode(ui);\r\n\r\n            nodes[uiid] = ui;\r\n            allNodes[node.id] = ui;\r\n            return ui;\r\n        },\r\n\r\n        translateRel : function (dx, dy) {\r\n            transform[12] += (2 * transform[0] * dx / width) / transform[0];\r\n            transform[13] -= (2 * transform[5] * dy / height) / transform[5];\r\n            updateTransformUniform();\r\n        },\r\n\r\n        scale : function (scaleFactor, scrollPoint) {\r\n            // Transform scroll point to clip-space coordinates:\r\n            var cx = 2 * scrollPoint.x / width - 1,\r\n                cy = 1 - (2 * scrollPoint.y) / height;\r\n\r\n            cx -= transform[12];\r\n            cy -= transform[13];\r\n\r\n            transform[12] += cx * (1 - scaleFactor);\r\n            transform[13] += cy * (1 - scaleFactor);\r\n\r\n            transform[0] *= scaleFactor;\r\n            transform[5] *= scaleFactor;\r\n\r\n            updateTransformUniform();\r\n            fireRescaled(this);\r\n\r\n            return transform[0];\r\n        },\r\n\r\n        resetScale : function () {\r\n            resetScaleInternal();\r\n\r\n            if (gl) {\r\n                updateSize();\r\n                // TODO: what is this?\r\n                // gl.useProgram(linksProgram);\r\n                // gl.uniform2f(linksProgram.screenSize, width, height);\r\n                updateTransformUniform();\r\n            }\r\n            return this;\r\n        },\r\n\r\n       /**\r\n        * Resizes the graphic without resetting the scale. \r\n        * Useful with viva graph in a dynamic container\r\n        */\r\n        updateSize: updateSize,\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider prepare to render.\r\n        */\r\n        init : function (c) {\r\n            var contextParameters = {};\r\n\r\n            if (options.preserveDrawingBuffer) {\r\n                contextParameters.preserveDrawingBuffer = true;\r\n            }\r\n\r\n            container = c;\r\n\r\n            updateSize();\r\n            resetScaleInternal();\r\n            container.appendChild(graphicsRoot);\r\n\r\n\r\n            gl = graphicsRoot.getContext(\"experimental-webgl\", contextParameters);\r\n            if (!gl) {\r\n                var msg = \"Could not initialize WebGL. Seems like the browser doesn't support it.\";\r\n                window.alert(msg);\r\n                throw msg;\r\n            }\r\n            if (options.enableBlending) {\r\n                gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n                gl.enable(gl.BLEND);\r\n            }\r\n            if (options.clearColor) {\r\n                var color = options.clearColorValue;\r\n                gl.clearColor(color.r, color.g, color.b, color.a);\r\n                // TODO: not the best way, really. Should come up with something better\r\n                // what if we need more updates inside beginRender, like depth buffer?\r\n                this.beginRender = function () {\r\n                    gl.clear(gl.COLOR_BUFFER_BIT);\r\n                };\r\n            }\r\n\r\n            linkProgram.load(gl);\r\n            linkProgram.updateSize(width / 2, height / 2);\r\n\r\n            nodeProgram.load(gl);\r\n            nodeProgram.updateSize(width / 2, height / 2);\r\n\r\n            updateTransformUniform();\r\n\r\n            // Notify the world if someone waited for update. TODO: should send an event\r\n            if (typeof initCallback === \"function\") {\r\n                initCallback(graphicsRoot);\r\n            }\r\n        },\r\n\r\n        /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider release occupied resources.\r\n        */\r\n        release : function (container) {\r\n            if (graphicsRoot && container) {\r\n                container.removeChild(graphicsRoot);\r\n                // TODO: anything else?\r\n            }\r\n        },\r\n\r\n       /**\r\n        * Checks whether webgl is supported by this browser.\r\n        */\r\n        isSupported : function () {\r\n            var c = window.document.createElement(\"canvas\"),\r\n                gl = c && c.getContext && c.getContext(\"experimental-webgl\");\r\n            return gl;\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider remove link from rendering surface.\r\n        *\r\n        * @param linkUI visual representation of the link created by link() execution.\r\n        **/\r\n        releaseLink : function (link) {\r\n            if (linksCount > 0) { linksCount -= 1; }\r\n            var linkUI = allLinks[link.id];\r\n            delete allLinks[link.id];\r\n\r\n            linkProgram.removeLink(linkUI);\r\n\r\n            var linkIdToRemove = linkUI.id;\r\n            if (linkIdToRemove < linksCount) {\r\n                if (linksCount === 0 || linksCount === linkIdToRemove) {\r\n                    return; // no more links or removed link is the last one.\r\n                }\r\n\r\n                var lastLinkUI = links[linksCount];\r\n                links[linkIdToRemove] = lastLinkUI;\r\n                lastLinkUI.id = linkIdToRemove;\r\n            }\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider remove node from rendering surface.\r\n        *\r\n        * @param nodeUI visual representation of the node created by node() execution.\r\n        **/\r\n        releaseNode : function (node) {\r\n            if (nodesCount > 0) { nodesCount -= 1; }\r\n            var nodeUI = allNodes[node.id];\r\n            delete allNodes[node.id];\r\n\r\n            nodeProgram.removeNode(nodeUI);\r\n\r\n            var nodeIdToRemove = nodeUI.id;\r\n            if (nodeIdToRemove < nodesCount) {\r\n                if (nodesCount === 0 || nodesCount === nodeIdToRemove) {\r\n                    return; // no more nodes or removed node is the last in the list.\r\n                }\r\n\r\n                var lastNodeUI = nodes[nodesCount];\r\n\r\n                nodes[nodeIdToRemove] = lastNodeUI;\r\n                lastNodeUI.id = nodeIdToRemove;\r\n\r\n                // Since concrete shaders may cache properties in the UI element\r\n                // we are letting them to make this swap (e.g. image node shader\r\n                // uses this approach to update node's offset in the atlas)\r\n                nodeProgram.replaceProperties(nodeUI, lastNodeUI);\r\n            }\r\n        },\r\n\r\n        renderNodes: function () {\r\n            var pos = {x : 0, y : 0};\r\n            // WebGL coordinate system is different. Would be better\r\n            // to have this transform in the shader code, but it would\r\n            // require every shader to be updated..\r\n            for (var i = 0; i < nodesCount; ++i) {\r\n                var ui = nodes[i];\r\n                pos.x = ui.position.x;\r\n                pos.y = ui.position.y;\r\n                if (userPlaceNodeCallback) {\r\n                    userPlaceNodeCallback(ui, pos);\r\n                }\r\n\r\n                nodeProgram.position(ui, pos);\r\n            }\r\n        },\r\n\r\n        renderLinks: function () {\r\n            if (this.omitLinksRendering) { return; }\r\n\r\n            var toPos = {x : 0, y : 0};\r\n            var fromPos = {x : 0, y : 0};\r\n            for (var i = 0; i < linksCount; ++i) {\r\n                var ui = links[i];\r\n                var pos = ui.pos.from;\r\n                fromPos.x = pos.x;\r\n                fromPos.y = -pos.y;\r\n                pos = ui.pos.to;\r\n                toPos.x = pos.x;\r\n                toPos.y = -pos.y;\r\n                if (userPlaceLinkCallback) {\r\n                    userPlaceLinkCallback(ui, fromPos, toPos);\r\n                }\r\n\r\n                linkProgram.position(ui, fromPos, toPos);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns root element which hosts graphics.\r\n         */\r\n        getGraphicsRoot : function (callbackWhenReady) {\r\n            // todo: should fire an event, instead of having this context.\r\n            if (typeof callbackWhenReady === \"function\") {\r\n                if (graphicsRoot) {\r\n                    callbackWhenReady(graphicsRoot);\r\n                } else {\r\n                    initCallback = callbackWhenReady;\r\n                }\r\n            }\r\n            return graphicsRoot;\r\n        },\r\n\r\n        /**\r\n         * Updates default shader which renders nodes\r\n         *\r\n         * @param newProgram to use for nodes.\r\n         */\r\n        setNodeProgram : function (newProgram) {\r\n            if (!gl && newProgram) {\r\n                // Nothing created yet. Just set shader to the new one\r\n                // and let initialization logic take care about the rest.\r\n                nodeProgram = newProgram;\r\n            } else if (newProgram) {\r\n                throw \"Not implemented. Cannot swap shader on the fly... Yet.\";\r\n                // TODO: unload old shader and reinit.\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Updates default shader which renders links\r\n         *\r\n         * @param newProgram to use for links.\r\n         */\r\n        setLinkProgram : function (newProgram) {\r\n            if (!gl && newProgram) {\r\n                // Nothing created yet. Just set shader to the new one\r\n                // and let initialization logic take care about the rest.\r\n                linkProgram = newProgram;\r\n            } else if (newProgram) {\r\n                throw \"Not implemented. Cannot swap shader on the fly... Yet.\";\r\n                // TODO: unload old shader and reinit.\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Transforms client coordinates into layout coordinates. Client coordinates\r\n         * are DOM coordinates relative to the rendering container. Layout\r\n         * coordinates are those assigned by by layout algorithm to each node.\r\n         *\r\n         * @param {Object} p - a point object with `x` and `y` attributes.\r\n         * This method mutates p.\r\n         */\r\n        transformClientToGraphCoordinates: function (p) {\r\n          // TODO: could be a problem when container has margins?\r\n            // normalize\r\n            p.x = ((2 * p.x) / width) - 1;\r\n            p.y = 1 - ((2 * p.y) / height);\r\n\r\n            // apply transform\r\n            p.x = (p.x - transform[12]) / transform[0];\r\n            p.y = (p.y - transform[13]) / transform[5];\r\n\r\n            // transform to graph coordinates\r\n            p.x = p.x * (width / 2);\r\n            p.y = p.y * (-height / 2);\r\n\r\n            return p;\r\n        },\r\n\r\n        /**\r\n         * Transforms WebGL coordinates into client coordinates. Reverse of \r\n         * `transformClientToGraphCoordinates()`\r\n         *\r\n         * @param {Object} p - a point object with `x` and `y` attributes, which\r\n         * represents a layout coordinate. This method mutates p.\r\n         */\r\n        transformGraphToClientCoordinates: function (p) {\r\n          // TODO: could be a problem when container has margins?\r\n            // transform from graph coordinates\r\n            p.x = p.x / (width / 2);\r\n            p.y = p.y / (-height / 2);\r\n\r\n            // apply transform\r\n            p.x = (p.x * transform[0]) + transform[12];\r\n            p.y = (p.y * transform[5]) + transform[13];\r\n\r\n            // denormalize\r\n            p.x = ((p.x + 1) * width) / 2;\r\n            p.y = ((1 - p.y) * height) / 2;\r\n\r\n            return p;\r\n        },\r\n\r\n        getNodeAtClientPos: function (clientPos, preciseCheck) {\r\n            if (typeof preciseCheck !== \"function\") {\r\n                // we don't know anything about your node structure here :(\r\n                // potentially this could be delegated to node program, but for\r\n                // right now, we are giving up if you don't pass boundary check\r\n                // callback. It answers to a question is nodeUI covers  (x, y)\r\n                return null;\r\n            }\r\n            // first transform to graph coordinates:\r\n            this.transformClientToGraphCoordinates(clientPos);\r\n            // now using precise check iterate over each node and find one within box:\r\n            // TODO: This is poor O(N) performance.\r\n            for (var i = 0; i < nodesCount; ++i) {\r\n                if (preciseCheck(nodes[i], clientPos.x, clientPos.y)) {\r\n                    return nodes[i].node;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    };\r\n\r\n    // Let graphics fire events before we return it to the caller.\r\n    eventify(graphics);\r\n\r\n    return graphics;\r\n}\r\n","module.exports = createDomparser();\n\nfunction createDomparser() {\n  if (typeof DOMParser === 'undefined') {\n    return {\n      parseFromString: fail\n    };\n  }\n  return new DOMParser();\n}\n\nfunction fail() {\n  throw new Error('DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg');\n}\n","var parser = require('./domparser.js');\nvar svg = require('../');\n\nmodule.exports = compile;\n\nfunction compile(svgText) {\n  try {\n    svgText = addNamespaces(svgText);\n    return svg(parser.parseFromString(svgText, \"text/xml\").documentElement);\n  } catch (e) {\n    throw e;\n  }\n}\n\nfunction addNamespaces(text) {\n  if (!text) return;\n\n  var namespaces = 'xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\"';\n  var match = text.match(/^<\\w+/);\n  if (match) {\n    var tagLength = match[0].length;\n    return text.substr(0, tagLength) + ' ' + namespaces + ' ' + text.substr(tagLength);\n  } else {\n    throw new Error('Cannot parse input text: invalid xml?');\n  }\n}\n","module.exports = template;\n\nvar BINDING_EXPR = /{{(.+?)}}/;\n\nfunction template(domNode) {\n  var allBindings = Object.create(null);\n  extractAllBindings(domNode, allBindings);\n\n  return {\n    link: function(model) {\n      Object.keys(allBindings).forEach(function(key) {\n        var setter = allBindings[key];\n        setter.forEach(changeModel);\n      });\n\n      function changeModel(setter) {\n        setter(model);\n      }\n    }\n  };\n}\n\nfunction extractAllBindings(domNode, allBindings) {\n  var nodeType = domNode.nodeType;\n  var typeSupported = (nodeType === 1) || (nodeType === 3);\n  if (!typeSupported) return;\n  var i;\n  if (domNode.hasChildNodes()) {\n    var domChildren = domNode.childNodes;\n    for (i = 0; i < domChildren.length; ++i) {\n      extractAllBindings(domChildren[i], allBindings);\n    }\n  }\n\n  if (nodeType === 3) { // text:\n    bindTextContent(domNode, allBindings);\n  }\n\n  if (!domNode.attributes) return; // this might be a text. Need to figure out what to do in that case\n\n  var attrs = domNode.attributes;\n  for (i = 0; i < attrs.length; ++i) {\n    bindDomAttribute(attrs[i], domNode, allBindings);\n  }\n}\n\nfunction bindDomAttribute(domAttribute, element, allBindings) {\n  var value = domAttribute.value;\n  if (!value) return; // unary attribute?\n\n  var modelNameMatch = value.match(BINDING_EXPR);\n  if (!modelNameMatch) return; // does not look like a binding\n\n  var attrName = domAttribute.localName;\n  var modelPropertyName = modelNameMatch[1];\n  var isSimpleValue = modelPropertyName.indexOf('.') < 0;\n\n  if (!isSimpleValue) throw new Error('simplesvg currently does not support nested bindings');\n\n  var propertyBindings = allBindings[modelPropertyName];\n  if (!propertyBindings) {\n    propertyBindings = allBindings[modelPropertyName] = [attributeSetter];\n  } else {\n    propertyBindings.push(attributeSetter);\n  }\n\n  function attributeSetter(model) {\n    element.setAttributeNS(null, attrName, model[modelPropertyName]);\n  }\n}\nfunction bindTextContent(element, allBindings) {\n  // todo reduce duplication\n  var value = element.nodeValue;\n  if (!value) return; // unary attribute?\n\n  var modelNameMatch = value.match(BINDING_EXPR);\n  if (!modelNameMatch) return; // does not look like a binding\n\n  var modelPropertyName = modelNameMatch[1];\n  var isSimpleValue = modelPropertyName.indexOf('.') < 0;\n\n  var propertyBindings = allBindings[modelPropertyName];\n  if (!propertyBindings) {\n    propertyBindings = allBindings[modelPropertyName] = [textSetter];\n  } else {\n    propertyBindings.push(textSetter);\n  }\n\n  function textSetter(model) {\n    element.nodeValue = model[modelPropertyName];\n  }\n}\n","addEventListener.removeEventListener = removeEventListener\naddEventListener.addEventListener = addEventListener\n\nmodule.exports = addEventListener\n\nvar Events = null\n\nfunction addEventListener(el, eventName, listener, useCapture) {\n  Events = Events || (\n    document.addEventListener ?\n    {add: stdAttach, rm: stdDetach} :\n    {add: oldIEAttach, rm: oldIEDetach}\n  )\n  \n  return Events.add(el, eventName, listener, useCapture)\n}\n\nfunction removeEventListener(el, eventName, listener, useCapture) {\n  Events = Events || (\n    document.addEventListener ?\n    {add: stdAttach, rm: stdDetach} :\n    {add: oldIEAttach, rm: oldIEDetach}\n  )\n  \n  return Events.rm(el, eventName, listener, useCapture)\n}\n\nfunction stdAttach(el, eventName, listener, useCapture) {\n  el.addEventListener(eventName, listener, useCapture)\n}\n\nfunction stdDetach(el, eventName, listener, useCapture) {\n  el.removeEventListener(eventName, listener, useCapture)\n}\n\nfunction oldIEAttach(el, eventName, listener, useCapture) {\n  if(useCapture) {\n    throw new Error('cannot useCapture in oldIE')\n  }\n\n  el.attachEvent('on' + eventName, listener)\n}\n\nfunction oldIEDetach(el, eventName, listener, useCapture) {\n  el.detachEvent('on' + eventName, listener)\n}\n","module.exports = svg;\n\nsvg.compile = require('./lib/compile');\n\nvar compileTemplate = svg.compileTemplate = require('./lib/compile_template');\n\nvar domEvents = require('add-event-listener');\n\nvar svgns = \"http://www.w3.org/2000/svg\";\nvar xlinkns = \"http://www.w3.org/1999/xlink\";\n\nfunction svg(element, attrBag) {\n  var svgElement = augment(element);\n  if (attrBag === undefined) {\n    return svgElement;\n  }\n\n  var attributes = Object.keys(attrBag);\n  for (var i = 0; i < attributes.length; ++i) {\n    var attributeName = attributes[i];\n    var value = attrBag[attributeName];\n    if (attributeName === 'link') {\n      svgElement.link(value);\n    } else {\n      svgElement.attr(attributeName, value);\n    }\n  }\n\n  return svgElement;\n}\n\nfunction augment(element) {\n  var svgElement = element;\n\n  if (typeof element === \"string\") {\n    svgElement = window.document.createElementNS(svgns, element);\n  } else if (element.simplesvg) {\n    return element;\n  }\n\n  var compiledTempalte;\n\n  svgElement.simplesvg = true; // this is not good, since we are monkey patching svg\n  svgElement.attr = attr;\n  svgElement.append = append;\n  svgElement.link = link;\n  svgElement.text = text;\n\n  // add easy eventing\n  svgElement.on = on;\n  svgElement.off = off;\n\n  // data binding:\n  svgElement.dataSource = dataSource;\n\n  return svgElement;\n\n  function dataSource(model) {\n    if (!compiledTempalte) compiledTempalte = compileTemplate(svgElement);\n    compiledTempalte.link(model);\n    return svgElement;\n  }\n\n  function on(name, cb, useCapture) {\n    domEvents.addEventListener(svgElement, name, cb, useCapture);\n    return svgElement;\n  }\n\n  function off(name, cb, useCapture) {\n    domEvents.removeEventListener(svgElement, name, cb, useCapture);\n    return svgElement;\n  }\n\n  function append(content) {\n    var child = svg(content);\n    svgElement.appendChild(child);\n\n    return child;\n  }\n\n  function attr(name, value) {\n    if (arguments.length === 2) {\n      if (value !== null) {\n        svgElement.setAttributeNS(null, name, value);\n      } else {\n        svgElement.removeAttributeNS(null, name);\n      }\n\n      return svgElement;\n    }\n\n    return svgElement.getAttributeNS(null, name);\n  }\n\n  function link(target) {\n    if (arguments.length) {\n      svgElement.setAttributeNS(xlinkns, \"xlink:href\", target);\n      return svgElement;\n    }\n\n    return svgElement.getAttributeNS(xlinkns, \"xlink:href\");\n  }\n\n  function text(textContent) {\n    if (textContent !== undefined) {\n        svgElement.textContent = textContent;\n        return svgElement;\n    }\n    return svgElement.textContent;\n  }\n}\n","/**\r\n * @fileOverview Defines a graph renderer that uses SVG based drawings.\r\n *\r\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\r\n */\r\n\r\nmodule.exports = svgGraphics;\r\n\r\nvar svg = require('simplesvg');\r\nvar eventify = require('ngraph.events');\r\nvar domInputManager = require('../Input/domInputManager.js');\r\n\r\n/**\r\n * Performs svg-based graph rendering. This module does not perform\r\n * layout, but only visualizes nodes and edges of the graph.\r\n */\r\nfunction svgGraphics() {\r\n    var svgContainer,\r\n        svgRoot,\r\n        offsetX = 0,\r\n        offsetY = 0,\r\n        initCallback,\r\n        actualScale = 1,\r\n        allNodes = {},\r\n        allLinks = {},\r\n/*jshint unused: false */\r\n        nodeBuilder = function (node) {\r\n            return svg(\"rect\")\r\n                     .attr(\"width\", 10)\r\n                     .attr(\"height\", 10)\r\n                     .attr(\"fill\", \"#00a2e8\");\r\n        },\r\n\r\n        nodePositionCallback = function (nodeUI, pos) {\r\n            // TODO: Remove magic 5. It should be half of the width or height of the node.\r\n            nodeUI.attr(\"x\", pos.x - 5)\r\n                  .attr(\"y\", pos.y - 5);\r\n        },\r\n\r\n        linkBuilder = function (link) {\r\n            return svg(\"line\").attr(\"stroke\", \"#999\");\r\n        },\r\n\r\n        linkPositionCallback = function (linkUI, fromPos, toPos) {\r\n            linkUI.attr(\"x1\", fromPos.x)\r\n                  .attr(\"y1\", fromPos.y)\r\n                  .attr(\"x2\", toPos.x)\r\n                  .attr(\"y2\", toPos.y);\r\n        },\r\n\r\n        fireRescaled = function (graphics) {\r\n            // TODO: maybe we shall copy changes?\r\n            graphics.fire(\"rescaled\");\r\n        },\r\n\r\n        cachedPos = {x : 0, y: 0},\r\n        cachedFromPos = {x : 0, y: 0},\r\n        cachedToPos = {x : 0, y: 0},\r\n\r\n        updateTransform = function () {\r\n            if (svgContainer) {\r\n                var transform = \"matrix(\" + actualScale + \", 0, 0,\" + actualScale + \",\" + offsetX + \",\" + offsetY + \")\";\r\n                svgContainer.attr(\"transform\", transform);\r\n            }\r\n        };\r\n\r\n    svgRoot = createSvgRoot();\r\n\r\n    var graphics = {\r\n        getNodeUI: function (nodeId) {\r\n            return allNodes[nodeId];\r\n        },\r\n\r\n        getLinkUI: function (linkId) {\r\n            return allLinks[linkId];\r\n        },\r\n\r\n        /**\r\n         * Sets the callback that creates node representation.\r\n         *\r\n         * @param builderCallback a callback function that accepts graph node\r\n         * as a parameter and must return an element representing this node.\r\n         *\r\n         * @returns If builderCallbackOrNode is a valid callback function, instance of this is returned;\r\n         * Otherwise undefined value is returned\r\n         */\r\n        node : function (builderCallback) {\r\n            if (typeof builderCallback !== \"function\") {\r\n                return; // todo: throw? This is not compatible with old versions\r\n            }\r\n\r\n            nodeBuilder = builderCallback;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sets the callback that creates link representation\r\n         *\r\n         * @param builderCallback a callback function that accepts graph link\r\n         * as a parameter and must return an element representing this link.\r\n         *\r\n         * @returns If builderCallback is a valid callback function, instance of this is returned;\r\n         * Otherwise undefined value is returned.\r\n         */\r\n        link : function (builderCallback) {\r\n            if (typeof builderCallback !== \"function\") {\r\n                return; // todo: throw? This is not compatible with old versions\r\n            }\r\n\r\n            linkBuilder = builderCallback;\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Allows to override default position setter for the node with a new\r\n         * function. newPlaceCallback(nodeUI, position, node) is function which\r\n         * is used by updateNodePosition().\r\n         */\r\n        placeNode : function (newPlaceCallback) {\r\n            nodePositionCallback = newPlaceCallback;\r\n            return this;\r\n        },\r\n\r\n        placeLink : function (newPlaceLinkCallback) {\r\n            linkPositionCallback = newPlaceLinkCallback;\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Called every before renderer starts rendering.\r\n         */\r\n        beginRender : function () {},\r\n\r\n        /**\r\n         * Called every time when renderer finishes one step of rendering.\r\n         */\r\n        endRender : function () {},\r\n\r\n        /**\r\n         * Sets translate operation that should be applied to all nodes and links.\r\n         */\r\n        graphCenterChanged : function (x, y) {\r\n            offsetX = x;\r\n            offsetY = y;\r\n            updateTransform();\r\n        },\r\n\r\n        /**\r\n         * Default input manager listens to DOM events to process nodes drag-n-drop\r\n         */\r\n        inputManager : domInputManager,\r\n\r\n        translateRel : function (dx, dy) {\r\n            var p = svgRoot.createSVGPoint(),\r\n                t = svgContainer.getCTM(),\r\n                origin = svgRoot.createSVGPoint().matrixTransform(t.inverse());\r\n\r\n            p.x = dx;\r\n            p.y = dy;\r\n\r\n            p = p.matrixTransform(t.inverse());\r\n            p.x = (p.x - origin.x) * t.a;\r\n            p.y = (p.y - origin.y) * t.d;\r\n\r\n            t.e += p.x;\r\n            t.f += p.y;\r\n\r\n            var transform = \"matrix(\" + t.a + \", 0, 0,\" + t.d + \",\" + t.e + \",\" + t.f + \")\";\r\n            svgContainer.attr(\"transform\", transform);\r\n        },\r\n\r\n        scale : function (scaleFactor, scrollPoint) {\r\n            var p = svgRoot.createSVGPoint();\r\n            p.x = scrollPoint.x;\r\n            p.y = scrollPoint.y;\r\n\r\n            p = p.matrixTransform(svgContainer.getCTM().inverse()); // translate to SVG coordinates\r\n\r\n            // Compute new scale matrix in current mouse position\r\n            var k = svgRoot.createSVGMatrix().translate(p.x, p.y).scale(scaleFactor).translate(-p.x, -p.y),\r\n                t = svgContainer.getCTM().multiply(k);\r\n\r\n            actualScale = t.a;\r\n            offsetX = t.e;\r\n            offsetY = t.f;\r\n            var transform = \"matrix(\" + t.a + \", 0, 0,\" + t.d + \",\" + t.e + \",\" + t.f + \")\";\r\n            svgContainer.attr(\"transform\", transform);\r\n\r\n            fireRescaled(this);\r\n            return actualScale;\r\n        },\r\n\r\n        resetScale : function () {\r\n            actualScale = 1;\r\n            var transform = \"matrix(1, 0, 0, 1, 0, 0)\";\r\n            svgContainer.attr(\"transform\", transform);\r\n            fireRescaled(this);\r\n            return this;\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider prepare to render.\r\n        */\r\n        init : function (container) {\r\n            container.appendChild(svgRoot);\r\n            updateTransform();\r\n            // Notify the world if someone waited for update. TODO: should send an event\r\n            if (typeof initCallback === \"function\") {\r\n                initCallback(svgRoot);\r\n            }\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider release occupied resources.\r\n        */\r\n        release : function (container) {\r\n            if (svgRoot && container) {\r\n                container.removeChild(svgRoot);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n         * provider prepare to render given link of the graph\r\n         *\r\n         * @param link - model of a link\r\n         */\r\n        addLink: function (link, pos) {\r\n            var linkUI = linkBuilder(link);\r\n            if (!linkUI) { return; }\r\n            linkUI.position = pos;\r\n            linkUI.link = link;\r\n            allLinks[link.id] = linkUI;\r\n            if (svgContainer.childElementCount > 0) {\r\n                svgContainer.insertBefore(linkUI, svgContainer.firstChild);\r\n            } else {\r\n                svgContainer.appendChild(linkUI);\r\n            }\r\n            return linkUI;\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider remove link from rendering surface.\r\n        *\r\n        * @param linkUI visual representation of the link created by link() execution.\r\n        **/\r\n        releaseLink : function (link) {\r\n            var linkUI = allLinks[link.id];\r\n            if (linkUI) {\r\n                svgContainer.removeChild(linkUI);\r\n                delete allLinks[link.id];\r\n            }\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider prepare to render given node of the graph.\r\n        *\r\n        * @param nodeUI visual representation of the node created by node() execution.\r\n        **/\r\n        addNode : function (node, pos) {\r\n            var nodeUI = nodeBuilder(node);\r\n            if (!nodeUI) {\r\n                return;\r\n            }\r\n            nodeUI.position = pos;\r\n            nodeUI.node = node;\r\n            allNodes[node.id] = nodeUI;\r\n\r\n            svgContainer.appendChild(nodeUI);\r\n\r\n            return nodeUI;\r\n        },\r\n\r\n       /**\r\n        * Called by Viva.Graph.View.renderer to let concrete graphic output\r\n        * provider remove node from rendering surface.\r\n        *\r\n        * @param node graph's node\r\n        **/\r\n        releaseNode : function (node) {\r\n            var nodeUI = allNodes[node.id];\r\n            if (nodeUI) {\r\n                svgContainer.removeChild(nodeUI);\r\n                delete allNodes[node.id];\r\n            }\r\n        },\r\n\r\n        renderNodes : function () {\r\n            for (var key in allNodes) {\r\n                if (allNodes.hasOwnProperty(key)) {\r\n                    var nodeUI = allNodes[key];\r\n                    cachedPos.x = nodeUI.position.x;\r\n                    cachedPos.y = nodeUI.position.y;\r\n                    nodePositionCallback(nodeUI, cachedPos, nodeUI.node);\r\n                }\r\n            }\r\n        },\r\n\r\n        renderLinks : function () {\r\n            for (var key in allLinks) {\r\n                if (allLinks.hasOwnProperty(key)) {\r\n                    var linkUI = allLinks[key];\r\n                    cachedFromPos.x = linkUI.position.from.x;\r\n                    cachedFromPos.y = linkUI.position.from.y;\r\n                    cachedToPos.x = linkUI.position.to.x;\r\n                    cachedToPos.y = linkUI.position.to.y;\r\n                    linkPositionCallback(linkUI, cachedFromPos, cachedToPos, linkUI.link);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns root element which hosts graphics.\r\n         */\r\n        getGraphicsRoot : function (callbackWhenReady) {\r\n            // todo: should fire an event, instead of having this context.\r\n            if (typeof callbackWhenReady === \"function\") {\r\n                if (svgRoot) {\r\n                    callbackWhenReady(svgRoot);\r\n                } else {\r\n                    initCallback = callbackWhenReady;\r\n                }\r\n            }\r\n            return svgRoot;\r\n        },\r\n        /**\r\n         * Returns root SVG element.\r\n         *\r\n         * Note: This is internal method specific to this renderer\r\n         */\r\n        getSvgRoot : function () {\r\n            return svgRoot;\r\n        }\r\n    };\r\n\r\n\r\n    // Let graphics fire events before we return it to the caller.\r\n    eventify(graphics);\r\n\r\n    return graphics;\r\n\r\n    function createSvgRoot() {\r\n        var svgRoot = svg(\"svg\");\r\n\r\n        svgContainer = svg(\"g\")\r\n              .attr(\"buffered-rendering\", \"dynamic\");\r\n\r\n        svgRoot.appendChild(svgContainer);\r\n        return svgRoot;\r\n    }\r\n}\r\n","var nullEvents = require('./nullEvents.js');\n\nmodule.exports = createDocumentEvents();\n\nfunction createDocumentEvents() {\n  if (typeof window === 'undefined') {\n    return nullEvents;\n  }\n\n  return {\n    on: on,\n    off: off\n  };\n}\n\nfunction on(eventName, handler) {\n  window.addEventListener(eventName, handler);\n}\n\nfunction off(eventName, handler) {\n  window.removeEventListener(eventName, handler);\n}\n\n","/**\r\n * @fileOverview Defines a graph renderer that uses CSS based drawings.\r\n *\r\n * @author Andrei Kashcha (aka anvaka) / https://github.com/anvaka\r\n */\r\n\r\nmodule.exports = renderer;\r\n\r\nvar eventify = require('ngraph.events');\r\nvar forceDirected = require('ngraph.forcelayout');\r\nvar svgGraphics = require('./svgGraphics.js');\r\nvar windowEvents = require('../Utils/windowEvents.js');\r\nvar domInputManager = require('../Input/domInputManager.js');\r\nvar timer = require('../Utils/timer.js');\r\nvar getDimension = require('../Utils/getDimensions.js');\r\nvar dragndrop = require('../Input/dragndrop.js');\r\n\r\n/**\r\n * This is heart of the rendering. Class accepts graph to be rendered and rendering settings.\r\n * It monitors graph changes and depicts them accordingly.\r\n *\r\n * @param graph - Viva.Graph.graph() object to be rendered.\r\n * @param settings - rendering settings, composed from the following parts (with their defaults shown):\r\n *   settings = {\r\n *     // Represents a module that is capable of displaying graph nodes and links.\r\n *     // all graphics has to correspond to defined interface and can be later easily\r\n *     // replaced for specific needs (e.g. adding WebGL should be piece of cake as long\r\n *     // as WebGL has implemented required interface). See svgGraphics for example.\r\n *     graphics : Viva.Graph.View.svgGraphics(),\r\n *\r\n *     // Where the renderer should draw graph. Container size matters, because\r\n *     // renderer will attempt center graph to that size. Also graphics modules\r\n *     // might depend on it.\r\n *     container : document.body,\r\n *\r\n *     // Defines whether graph can respond to use input\r\n *     interactive: true,\r\n *\r\n *     // Layout algorithm to be used. The algorithm is expected to comply with defined\r\n *     // interface and is expected to be iterative. Renderer will use it then to calculate\r\n *     // graph's layout. For examples of the interface refer to Viva.Graph.Layout.forceDirected()\r\n *     layout : Viva.Graph.Layout.forceDirected(),\r\n *\r\n *     // Directs renderer to display links. Usually rendering links is the slowest part of this\r\n *     // library. So if you don't need to display links, consider settings this property to false.\r\n *     renderLinks : true,\r\n *\r\n *     // Number of layout iterations to run before displaying the graph. The bigger you set this number\r\n *     // the closer to ideal position graph will appear first time. But be careful: for large graphs\r\n *     // it can freeze the browser.\r\n *     prerender : 0\r\n *   }\r\n */\r\nfunction renderer(graph, settings) {\r\n  // TODO: This class is getting hard to understand. Consider refactoring.\r\n  // TODO: I have a technical debt here: fix scaling/recentering! Currently it's a total mess.\r\n  var FRAME_INTERVAL = 30;\r\n\r\n  settings = settings || {};\r\n\r\n  var layout = settings.layout,\r\n    graphics = settings.graphics,\r\n    container = settings.container,\r\n    interactive = settings.interactive !== undefined ? settings.interactive : true,\r\n    inputManager,\r\n    animationTimer,\r\n    rendererInitialized = false,\r\n    updateCenterRequired = true,\r\n\r\n    isStable = false,\r\n    userInteraction = false,\r\n    isPaused = false,\r\n\r\n    transform = {\r\n      offsetX: 0,\r\n      offsetY: 0,\r\n      scale: 1\r\n    },\r\n\r\n    publicEvents = eventify({}),\r\n    containerDrag;\r\n\r\n  return {\r\n    /**\r\n     * Performs rendering of the graph.\r\n     *\r\n     * @param iterationsCount if specified renderer will run only given number of iterations\r\n     * and then stop. Otherwise graph rendering is performed indefinitely.\r\n     *\r\n     * Note: if rendering stopped by used started dragging nodes or new nodes were added to the\r\n     * graph renderer will give run more iterations to reflect changes.\r\n     */\r\n    run: function(iterationsCount) {\r\n\r\n      if (!rendererInitialized) {\r\n        prepareSettings();\r\n        prerender();\r\n\r\n        initDom();\r\n        updateCenter();\r\n        listenToEvents();\r\n\r\n        rendererInitialized = true;\r\n      }\r\n\r\n      renderIterations(iterationsCount);\r\n\r\n      return this;\r\n    },\r\n\r\n    reset: function() {\r\n      graphics.resetScale();\r\n      updateCenter();\r\n      transform.scale = 1;\r\n    },\r\n\r\n    pause: function() {\r\n      isPaused = true;\r\n      animationTimer.stop();\r\n    },\r\n\r\n    resume: function() {\r\n      isPaused = false;\r\n      animationTimer.restart();\r\n    },\r\n\r\n    rerender: function() {\r\n      renderGraph();\r\n      return this;\r\n    },\r\n\r\n    zoomOut: function() {\r\n      return scale(true);\r\n    },\r\n\r\n    zoomIn: function() {\r\n      return scale(false);\r\n    },\r\n\r\n    /**\r\n     * Returns current transformation matrix.\r\n     */\r\n    getTransform: function() {\r\n      return transform;\r\n    },\r\n\r\n    /**\r\n     * Centers renderer at x,y graph's coordinates\r\n     */\r\n    moveTo: function(x, y) {\r\n      graphics.graphCenterChanged(transform.offsetX - x * transform.scale, transform.offsetY - y * transform.scale);\r\n      renderGraph();\r\n    },\r\n\r\n    /**\r\n     * Gets current graphics object\r\n     */\r\n    getGraphics: function() {\r\n      return graphics;\r\n    },\r\n    \r\n    /**\r\n     * Gets current layout.\r\n     */\r\n    getLayout: function() {\r\n      return layout;\r\n    },\r\n\r\n    /**\r\n     * Removes this renderer and deallocates all resources/timers\r\n     */\r\n    dispose: function() {\r\n      stopListenToEvents(); // I quit!\r\n    },\r\n\r\n    on: function(eventName, callback) {\r\n      publicEvents.on(eventName, callback);\r\n      return this;\r\n    },\r\n\r\n    off: function(eventName, callback) {\r\n      publicEvents.off(eventName, callback);\r\n      return this;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Checks whether given interaction (node/scroll) is enabled\r\n   */\r\n  function isInteractive(interactionName) {\r\n    if (typeof interactive === 'string') {\r\n      return interactive.indexOf(interactionName) >= 0;\r\n    } else if (typeof interactive === 'boolean') {\r\n      return interactive;\r\n    }\r\n    return true; // default setting\r\n  }\r\n\r\n  function prepareSettings() {\r\n    container = container || window.document.body;\r\n    layout = layout || forceDirected(graph, {\r\n      springLength: 80,\r\n      springCoeff: 0.0002,\r\n    });\r\n    graphics = graphics || svgGraphics(graph, {\r\n      container: container\r\n    });\r\n\r\n    if (!settings.hasOwnProperty('renderLinks')) {\r\n      settings.renderLinks = true;\r\n    }\r\n\r\n    settings.prerender = settings.prerender || 0;\r\n    inputManager = (graphics.inputManager || domInputManager)(graph, graphics);\r\n  }\r\n\r\n  function renderGraph() {\r\n    graphics.beginRender();\r\n\r\n    // todo: move this check graphics\r\n    if (settings.renderLinks) {\r\n      graphics.renderLinks();\r\n    }\r\n    graphics.renderNodes();\r\n    graphics.endRender();\r\n  }\r\n\r\n  function onRenderFrame() {\r\n    isStable = layout.step() && !userInteraction;\r\n    renderGraph();\r\n\r\n    return !isStable;\r\n  }\r\n\r\n  function renderIterations(iterationsCount) {\r\n    if (animationTimer) {\r\n      return;\r\n    }\r\n\r\n    if (iterationsCount !== undefined) {\r\n      animationTimer = timer(function() {\r\n        iterationsCount -= 1;\r\n        if (iterationsCount < 0) {\r\n          var needMoreFrames = false;\r\n          return needMoreFrames;\r\n        }\r\n\r\n        return onRenderFrame();\r\n      }, FRAME_INTERVAL);\r\n    } else {\r\n      animationTimer = timer(onRenderFrame, FRAME_INTERVAL);\r\n    }\r\n  }\r\n\r\n  function resetStable() {\r\n    if (isPaused) {\r\n      return;\r\n    }\r\n\r\n    isStable = false;\r\n    animationTimer.restart();\r\n  }\r\n\r\n  function prerender() {\r\n    // To get good initial positions for the graph\r\n    // perform several prerender steps in background.\r\n    if (typeof settings.prerender === 'number' && settings.prerender > 0) {\r\n      for (var i = 0; i < settings.prerender; i += 1) {\r\n        layout.step();\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateCenter() {\r\n    var graphRect = layout.getGraphRect(),\r\n      containerSize = getDimension(container);\r\n\r\n    var cx = (graphRect.x2 + graphRect.x1) / 2;\r\n    var cy = (graphRect.y2 + graphRect.y1) / 2;\r\n    transform.offsetX = containerSize.width / 2 - (cx * transform.scale - cx);\r\n    transform.offsetY = containerSize.height / 2 - (cy * transform.scale - cy);\r\n    graphics.graphCenterChanged(transform.offsetX, transform.offsetY);\r\n\r\n    updateCenterRequired = false;\r\n  }\r\n\r\n  function createNodeUi(node) {\r\n    var nodePosition = layout.getNodePosition(node.id);\r\n    graphics.addNode(node, nodePosition);\r\n  }\r\n\r\n  function removeNodeUi(node) {\r\n    graphics.releaseNode(node);\r\n  }\r\n\r\n  function createLinkUi(link) {\r\n    var linkPosition = layout.getLinkPosition(link.id);\r\n    graphics.addLink(link, linkPosition);\r\n  }\r\n\r\n  function removeLinkUi(link) {\r\n    graphics.releaseLink(link);\r\n  }\r\n\r\n  function listenNodeEvents(node) {\r\n    if (!isInteractive('node')) {\r\n      return;\r\n    }\r\n\r\n    var wasPinned = false;\r\n\r\n    // TODO: This may not be memory efficient. Consider reusing handlers object.\r\n    inputManager.bindDragNDrop(node, {\r\n      onStart: function() {\r\n        wasPinned = layout.isNodePinned(node);\r\n        layout.pinNode(node, true);\r\n        userInteraction = true;\r\n        resetStable();\r\n      },\r\n      onDrag: function(e, offset) {\r\n        var oldPos = layout.getNodePosition(node.id);\r\n        layout.setNodePosition(node.id,\r\n          oldPos.x + offset.x / transform.scale,\r\n          oldPos.y + offset.y / transform.scale);\r\n\r\n        userInteraction = true;\r\n\r\n        renderGraph();\r\n      },\r\n      onStop: function() {\r\n        layout.pinNode(node, wasPinned);\r\n        userInteraction = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  function releaseNodeEvents(node) {\r\n    inputManager.bindDragNDrop(node, null);\r\n  }\r\n\r\n  function initDom() {\r\n    graphics.init(container);\r\n\r\n    graph.forEachNode(createNodeUi);\r\n\r\n    if (settings.renderLinks) {\r\n      graph.forEachLink(createLinkUi);\r\n    }\r\n  }\r\n\r\n  function releaseDom() {\r\n    graphics.release(container);\r\n  }\r\n\r\n  function processNodeChange(change) {\r\n    var node = change.node;\r\n\r\n    if (change.changeType === 'add') {\r\n      createNodeUi(node);\r\n      listenNodeEvents(node);\r\n      if (updateCenterRequired) {\r\n        updateCenter();\r\n      }\r\n    } else if (change.changeType === 'remove') {\r\n      releaseNodeEvents(node);\r\n      removeNodeUi(node);\r\n      if (graph.getNodesCount() === 0) {\r\n        updateCenterRequired = true; // Next time when node is added - center the graph.\r\n      }\r\n    } else if (change.changeType === 'update') {\r\n      releaseNodeEvents(node);\r\n      removeNodeUi(node);\r\n\r\n      createNodeUi(node);\r\n      listenNodeEvents(node);\r\n    }\r\n  }\r\n\r\n  function processLinkChange(change) {\r\n    var link = change.link;\r\n    if (change.changeType === 'add') {\r\n      if (settings.renderLinks) {\r\n        createLinkUi(link);\r\n      }\r\n    } else if (change.changeType === 'remove') {\r\n      if (settings.renderLinks) {\r\n        removeLinkUi(link);\r\n      }\r\n    } else if (change.changeType === 'update') {\r\n      throw 'Update type is not implemented. TODO: Implement me!';\r\n    }\r\n  }\r\n\r\n  function onGraphChanged(changes) {\r\n    var i, change;\r\n    for (i = 0; i < changes.length; i += 1) {\r\n      change = changes[i];\r\n      if (change.node) {\r\n        processNodeChange(change);\r\n      } else if (change.link) {\r\n        processLinkChange(change);\r\n      }\r\n    }\r\n\r\n    resetStable();\r\n  }\r\n\r\n  function onWindowResized() {\r\n    updateCenter();\r\n    onRenderFrame();\r\n  }\r\n\r\n  function releaseContainerDragManager() {\r\n    if (containerDrag) {\r\n      containerDrag.release();\r\n      containerDrag = null;\r\n    }\r\n  }\r\n\r\n  function releaseGraphEvents() {\r\n    graph.off('changed', onGraphChanged);\r\n  }\r\n\r\n  function scale(out, scrollPoint) {\r\n    if (!scrollPoint) {\r\n      var containerSize = getDimension(container);\r\n      scrollPoint = {\r\n        x: containerSize.width / 2,\r\n        y: containerSize.height / 2\r\n      };\r\n    }\r\n    var scaleFactor = Math.pow(1 + 0.4, out ? -0.2 : 0.2);\r\n    transform.scale = graphics.scale(scaleFactor, scrollPoint);\r\n\r\n    renderGraph();\r\n    publicEvents.fire('scale', transform.scale);\r\n\r\n    return transform.scale;\r\n  }\r\n\r\n  function listenToEvents() {\r\n    windowEvents.on('resize', onWindowResized);\r\n\r\n    releaseContainerDragManager();\r\n    if (isInteractive('drag')) {\r\n      containerDrag = dragndrop(container);\r\n      containerDrag.onDrag(function(e, offset) {\r\n        graphics.translateRel(offset.x, offset.y);\r\n\r\n        renderGraph();\r\n        publicEvents.fire('drag', offset);\r\n      });\r\n    }\r\n\r\n    if (isInteractive('scroll')) {\r\n      if (!containerDrag) {\r\n        containerDrag = dragndrop(container);\r\n      }\r\n      containerDrag.onScroll(function(e, scaleOffset, scrollPoint) {\r\n        scale(scaleOffset < 0, scrollPoint);\r\n      });\r\n    }\r\n\r\n    graph.forEachNode(listenNodeEvents);\r\n\r\n    releaseGraphEvents();\r\n    graph.on('changed', onGraphChanged);\r\n  }\r\n\r\n  function stopListenToEvents() {\r\n    rendererInitialized = false;\r\n    releaseGraphEvents();\r\n    releaseContainerDragManager();\r\n    windowEvents.off('resize', onWindowResized);\r\n    publicEvents.off();\r\n    animationTimer.stop();\r\n\r\n    graph.forEachLink(function(link) {\r\n      if (settings.renderLinks) {\r\n        removeLinkUi(link);\r\n      }\r\n    });\r\n\r\n    graph.forEachNode(function(node) {\r\n      releaseNodeEvents(node);\r\n      removeNodeUi(node);\r\n    });\r\n\r\n    layout.dispose();\r\n    releaseDom();\r\n  }\r\n}\r\n","/**\r\n * This is an entry point for global namespace. If you want to use separate\r\n * modules individually - you are more than welcome to do so.\r\n */\r\n\r\nvar random = require('ngraph.random');\r\n\r\nvar Viva = {\r\n  lazyExtend: function() {\r\n    return require('ngraph.merge').apply(this, arguments);\r\n  },\r\n  randomIterator: function() {\r\n    return random.randomIterator.apply(random, arguments);\r\n  },\r\n  random: function() {\r\n    return random.random.apply(random, arguments);\r\n  },\r\n  events: require('ngraph.events')\r\n};\r\n\r\nViva.Graph = {\r\n  version: require('./version.js'),\r\n  graph: require('ngraph.graph'),\r\n\r\n  serializer: function() {\r\n    return {\r\n      loadFromJSON: require('ngraph.fromjson'),\r\n      storeToJSON: require('ngraph.tojson')\r\n    };\r\n  },\r\n\r\n  centrality: require('./Algorithms/centrality.js'),\r\n  operations: require('./Algorithms/operations.js'),\r\n\r\n  geom: function() {\r\n    return {\r\n      intersect: require('gintersect'),\r\n      intersectRect: require('./Utils/intersectRect.js')\r\n    };\r\n  },\r\n\r\n  webgl: require('./WebGL/webgl.js'),\r\n  webglInputEvents: require('./WebGL/webglInputEvents.js'),\r\n\r\n  generator: function() {\r\n    return require('ngraph.generators');\r\n  },\r\n\r\n  Input: {\r\n    domInputManager: require('./Input/domInputManager.js'),\r\n    webglInputManager: require('./Input/webglInputManager.js')\r\n  },\r\n\r\n  Utils: {\r\n    // TODO: move to Input\r\n    dragndrop: require('./Input/dragndrop.js'),\r\n    findElementPosition: require('./Utils/findElementPosition.js'),\r\n    timer: require('./Utils/timer.js'),\r\n    getDimension: require('./Utils/getDimensions.js'),\r\n    events: require('./Utils/backwardCompatibleEvents.js')\r\n  },\r\n\r\n  Layout: {\r\n    forceDirected: require('ngraph.forcelayout'),\r\n    constant: require('./Layout/constant.js')\r\n  },\r\n\r\n  View: {\r\n    // TODO: Move `webglXXX` out to webgl namespace\r\n    Texture: require('./WebGL/texture.js'),\r\n    // TODO: This should not be even exported\r\n    webglAtlas: require('./WebGL/webglAtlas.js'),\r\n    webglImageNodeProgram: require('./WebGL/webglImageNodeProgram.js'),\r\n    webglLinkProgram: require('./WebGL/webglLinkProgram.js'),\r\n    webglNodeProgram: require('./WebGL/webglNodeProgram.js'),\r\n    webglLine: require('./WebGL/webglLine.js'),\r\n    webglSquare: require('./WebGL/webglSquare.js'),\r\n    webglImage: require('./WebGL/webglImage.js'),\r\n    webglGraphics: require('./View/webglGraphics.js'),\r\n    // TODO: Deprecate this:\r\n    _webglUtil: {\r\n      parseColor: require('./WebGL/parseColor.js')\r\n    },\r\n\r\n    // TODO: move to svg namespace\r\n    svgGraphics: require('./View/svgGraphics.js'),\r\n\r\n    renderer: require('./View/renderer.js'),\r\n\r\n    // deprecated\r\n    cssGraphics: function() {\r\n      throw new Error('cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it');\r\n    },\r\n\r\n    svgNodeFactory: function() {\r\n      throw new Error('svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it');\r\n    },\r\n\r\n    community: function() {\r\n      throw new Error('community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module');\r\n    }\r\n  },\r\n\r\n  Rect: require('./Utils/rect.js'),\r\n\r\n  svg: require('simplesvg'),\r\n\r\n  // TODO: should be camelCase\r\n  BrowserInfo: require('./Utils/browserInfo.js')\r\n};\r\n\r\nmodule.exports = Viva;\r\n","import { list } from \"./data.js\";\nimport { CONFIG } from \"./config.js\";\nimport Viva from \"vivagraphjs\";\n\n/**\n * Main application class for theorem graph visualization\n */\nclass TheoremGraphApp {\n  constructor() {\n    this.graph = Viva.Graph.graph();\n    this.fuse = null;\n    this.elements = {};\n    this.queryString = null;\n    this.canvas = document.createElement(\"canvas\");\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.ctx.font = `${CONFIG.TEXT_SIZE}px`;\n    this.navigationHistory = [];\n    this.currentHistoryIndex = -1;\n    this.renderer = null;\n\n    this.cache = {\n      wikiLinks: new Map(),\n      relationships: new Map(),\n    };\n\n    this.loadCacheFromStorage();\n  }\n\n  async init() {\n    this.cacheElements();\n    this.setupSearch();\n    this.setupSubgraphToggle();\n    this.setupNavigation();\n    this.queryString = this.getQueryFromURL();\n\n    if (this.queryString) {\n      this.addToHistory(this.queryString);\n    }\n\n    await this.buildGraph();\n  }\n\n  loadCacheFromStorage() {\n    try {\n      const stored = localStorage.getItem('theoremGraphCache');\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        // Convert arrays back to Maps\n        this.cache.wikiLinks = new Map(parsed.wikiLinks || []);\n        this.cache.relationships = new Map(parsed.relationships || []);\n        console.log(`Loaded cache: ${this.cache.wikiLinks.size} pages`);\n        this.updateCacheInfo();\n      }\n    } catch (error) {\n      console.warn('Failed to load cache from storage:', error);\n    }\n  }\n\n  saveCacheToStorage() {\n    try {\n      const toStore = {\n        wikiLinks: Array.from(this.cache.wikiLinks.entries()),\n        relationships: Array.from(this.cache.relationships.entries()),\n        timestamp: Date.now(),\n      };\n      localStorage.setItem('theoremGraphCache', JSON.stringify(toStore));\n      this.updateCacheInfo();\n    } catch (error) {\n      console.warn('Failed to save cache to storage:', error);\n    }\n  }\n\n  updateCacheInfo() {\n    if (this.elements.cacheInfo) {\n      const count = this.cache.wikiLinks.size;\n      this.elements.cacheInfo.innerHTML = count > 0\n        ? ` ${count} cached`\n        : '';\n    }\n  }\n\n  getCacheKey(pageName, includeExtended = false) {\n    return `${pageName}:${includeExtended}`;\n  }\n\n  clearCache() {\n    this.cache.wikiLinks.clear();\n    this.cache.relationships.clear();\n    localStorage.removeItem('theoremGraphCache');\n    console.log('Cache cleared');\n  }\n\n  cacheElements() {\n    this.elements = {\n      search: document.querySelector(\".search\"),\n      result: document.querySelector(\".result\"),\n      loading: document.getElementById(\"loading\"),\n      subgraphCheckbox: document.getElementById(\"subgraph\"),\n      graphDiv: document.getElementById(\"graphDiv\"),\n      breadcrumb: document.getElementById(\"breadcrumb\"),\n      backBtn: document.getElementById(\"back-btn\"),\n      forwardBtn: document.getElementById(\"forward-btn\"),\n      cacheInfo: document.getElementById(\"cache-info\"),\n    };\n  }\n\n  getQueryFromURL() {\n    const params = new URLSearchParams(window.location.search);\n    return params.get(\"query\");\n  }\n\n  setupSearch() {\n    this.fuse = new Fuse(list, CONFIG.FUSE_OPTIONS);\n\n    // Bind search event\n    this.elements.search.addEventListener(\"input\", () => this.performSearch());\n    this.performSearch();\n  }\n\n  setupSubgraphToggle() {\n    this.elements.subgraphCheckbox.addEventListener(\"change\", async () => {\n      // Clear the existing graph\n      this.clearGraph();\n\n      // Rebuild with new subgraph setting\n      await this.buildGraph();\n    });\n  }\n\n  setupNavigation() {\n    this.elements.backBtn.addEventListener(\"click\", () => this.navigateBack());\n    this.elements.forwardBtn.addEventListener(\"click\", () => this.navigateForward());\n    this.updateNavigationButtons();\n  }\n\n  addToHistory(theoremName) {\n    if (this.currentHistoryIndex < this.navigationHistory.length - 1) {\n      this.navigationHistory = this.navigationHistory.slice(0, this.currentHistoryIndex + 1);\n    }\n    this.navigationHistory.push(theoremName);\n    this.currentHistoryIndex = this.navigationHistory.length - 1;\n\n    this.updateBreadcrumb();\n    this.updateNavigationButtons();\n  }\n\n  async navigateBack() {\n    if (this.currentHistoryIndex > 0) {\n      this.currentHistoryIndex--;\n      await this.navigateToHistoryIndex(this.currentHistoryIndex);\n    }\n  }\n\n  async navigateForward() {\n    if (this.currentHistoryIndex < this.navigationHistory.length - 1) {\n      this.currentHistoryIndex++;\n      await this.navigateToHistoryIndex(this.currentHistoryIndex);\n    }\n  }\n\n  async navigateToHistoryIndex(index) {\n    this.queryString = this.navigationHistory[index];\n    this.clearGraph();\n    await this.buildGraph();\n    this.updateBreadcrumb();\n    this.updateNavigationButtons();\n\n    // Update URL without page reload\n    const newUrl = `?query=${this.queryString.replace(/\\s+/g, \"+\")}`;\n    window.history.pushState({}, \"\", newUrl);\n  }\n\n  updateBreadcrumb() {\n    if (this.navigationHistory.length === 0) {\n      this.elements.breadcrumb.innerHTML = \"\";\n      return;\n    }\n\n    const breadcrumbHTML = this.navigationHistory\n      .map((theorem, index) => {\n        const isCurrent = index === this.currentHistoryIndex;\n        const className = isCurrent ? \"breadcrumb-item current\" : \"breadcrumb-item\";\n        const onClick = !isCurrent ? `data-index=\"${index}\"` : \"\";\n        return `<span class=\"${className}\" ${onClick}>${theorem}</span>`;\n      })\n      .join('<span class=\"breadcrumb-separator\"></span>');\n\n    this.elements.breadcrumb.innerHTML = breadcrumbHTML;\n\n    // Add click handlers for breadcrumb items\n    this.elements.breadcrumb.querySelectorAll(\".breadcrumb-item:not(.current)\").forEach((item) => {\n      item.addEventListener(\"click\", async (e) => {\n        const index = parseInt(e.target.dataset.index);\n        this.currentHistoryIndex = index;\n        await this.navigateToHistoryIndex(index);\n      });\n    });\n  }\n\n  updateNavigationButtons() {\n    this.elements.backBtn.disabled = this.currentHistoryIndex <= 0;\n    this.elements.forwardBtn.disabled = this.currentHistoryIndex >= this.navigationHistory.length - 1;\n  }\n\n  async navigateToTheorem(theoremName) {\n    this.addToHistory(theoremName);\n    this.queryString = theoremName;\n    this.clearGraph();\n    await this.buildGraph();\n\n    // Update URL\n    const newUrl = `?query=${theoremName.replace(/\\s+/g, \"+\")}`;\n    window.history.pushState({}, \"\", newUrl);\n  }\n\n  clearGraph() {\n    if (this.renderer) {\n      this.renderer.dispose();\n      this.renderer = null;\n    }\n\n    this.graph.clear();\n    this.elements.graphDiv.innerHTML = \"\";\n    this.graph = Viva.Graph.graph();\n  }\n\n  performSearch() {\n    const searchValue = this.elements.search.value;\n    const results = this.fuse.search(searchValue);\n\n    const resultHTML = results\n      .map((index) => {\n        const theorem = list[index];\n        const queryString = theorem.replace(/\\s+/g, \"+\");\n        return `<li class=\"search-item\">\n          <a href=\"?query=${queryString}\">${theorem}</a>\n        </li>`;\n      })\n      .join(\"\");\n\n    this.elements.result.innerHTML = resultHTML;\n  }\n\n  async buildGraph() {\n    try {\n      await this.fetchAndRenderGraph();\n    } catch (error) {\n      console.error(\"Error building graph:\", error);\n      this.showError(CONFIG.MESSAGES.ERROR_FETCH);\n    }\n  }\n\n  async fetchAndRenderGraph() {\n    if (!this.queryString) {\n      this.showEmptyState(CONFIG.MESSAGES.EMPTY_SEARCH);\n      return;\n    }\n\n    this.showLoading(true);\n\n    try {\n      const relationships = await this.fetchWikiRelationships(this.queryString);\n\n      if (relationships.length === 0) {\n        this.showEmptyState(CONFIG.MESSAGES.NO_RESULTS);\n        return;\n      }\n\n      this.renderGraph(relationships);\n    } finally {\n      this.showLoading(false);\n    }\n  }\n\n  async fetchWikiRelationships(pageName) {\n    const mainLinks = await this.fetchPageLinks(pageName);\n\n    if (!this.elements.subgraphCheckbox.checked) {\n      return [mainLinks];\n    }\n\n    // Fetch sub-relationships for each main link\n    const subRelationships = await Promise.all(\n      mainLinks.map((link) => this.fetchSubRelationships(link, pageName))\n    );\n\n    return subRelationships;\n  }\n\n  async fetchPageLinks(pageName, includeExtended = false) {\n    const cacheKey = this.getCacheKey(pageName, includeExtended);\n    if (this.cache.wikiLinks.has(cacheKey)) {\n      console.log(`Cache hit: ${pageName}`);\n      return this.cache.wikiLinks.get(cacheKey);\n    }\n\n    console.log(`Fetching: ${pageName}`);\n    const url = `${CONFIG.WIKI_API_BASE}?${CONFIG.WIKI_API_PARAMS}&page=${pageName}`;\n\n    try {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.parse || !data.parse.links) {\n        return [];\n      }\n\n      const filteredLinks = this.filterLinks(data.parse.links, pageName, includeExtended);\n\n      // Store in cache\n      this.cache.wikiLinks.set(cacheKey, filteredLinks);\n      this.saveCacheToStorage();\n\n      return filteredLinks;\n    } catch (error) {\n      console.error(`Error fetching links for ${pageName}:`, error);\n      return [];\n    }\n  }\n\n  filterLinks(links, excludePage, includeExtended = false) {\n    const matchRegex = includeExtended\n      ? CONFIG.REGEX.EXTENDED_MATCH\n      : CONFIG.REGEX.THEOREM_MATCH;\n\n    const excludeRegex = includeExtended\n      ? CONFIG.REGEX.EXCLUDE_EXTENDED\n      : CONFIG.REGEX.EXCLUDE_COMMON;\n\n    const excludePageRegex = new RegExp(excludePage, \"i\");\n\n    return links\n      .map((link) => link[\"*\"])\n      .filter((linkText) => {\n        return (\n          matchRegex.test(linkText) &&\n          !excludePageRegex.test(linkText) &&\n          !excludeRegex.test(linkText)\n        );\n      });\n  }\n\n  async fetchSubRelationships(theoremName, parentPage) {\n    const subLinks = await this.fetchPageLinks(theoremName, true);\n\n    // Filter out the parent page from sub-links\n    const filteredSubLinks = subLinks.filter((link) => {\n      const excludeRegex = new RegExp(`${theoremName}|${parentPage}`, \"i\");\n      return !excludeRegex.test(link);\n    });\n\n    return [theoremName, ...filteredSubLinks];\n  }\n\n  renderGraph(relationships) {\n    this.addNode(\"parent\", this.queryString, CONFIG.NODE_STYLES.PRIMARY);\n\n    if (this.elements.subgraphCheckbox.checked) {\n      this.renderSubgraphMode(relationships);\n    } else {\n      this.renderSimpleMode(relationships[0]);\n    }\n\n    this.initializeRenderer();\n  }\n\n  renderSubgraphMode(relationships) {\n    relationships.forEach((branch) => {\n      if (branch.length === 0) return;\n\n      const mainNode = branch[0];\n\n      // Add main branch node\n      this.addNode(mainNode, mainNode, CONFIG.NODE_STYLES.PRIMARY);\n      this.addLink(\"parent\", mainNode, \"red-stroke\");\n\n      // Add sub-nodes\n      for (let i = 1; i < branch.length; i++) {\n        this.addNode(branch[i], branch[i], CONFIG.NODE_STYLES.SECONDARY);\n        this.addLink(mainNode, branch[i], \"gray\");\n      }\n    });\n  }\n\n  renderSimpleMode(mainLinks) {\n    mainLinks.forEach((link) => {\n      this.addNode(link, link, CONFIG.NODE_STYLES.PRIMARY);\n      this.addLink(\"parent\", link, \"red-stroke\");\n    });\n  }\n\n  addNode(id, text, style) {\n    this.graph.addNode(id, {\n      text,\n      cn: style.color,\n      strokeClass: style.strokeClass,\n    });\n  }\n\n  addLink(fromId, toId, className) {\n    this.graph.addLink(fromId, toId, { cn: className });\n  }\n\n  initializeRenderer() {\n    const graphics = this.createGraphics();\n    const layout = this.createLayout();\n\n    this.renderer = Viva.Graph.View.renderer(this.graph, {\n      graphics,\n      container: this.elements.graphDiv,\n      layout,\n    });\n\n    this.renderer.run();\n  }\n\n  createGraphics() {\n    const graphics = Viva.Graph.View.svgGraphics();\n    const ctx = this.ctx;\n\n    graphics\n      .node((node) => {\n        const isParent = node.id === \"parent\";\n        const textWidth = ctx.measureText(node.data.text).width;\n        const g = Viva.Graph.svg(\"g\");\n\n        const widthMultiplier = isParent ? CONFIG.NODE_WIDTH_MULTIPLIER * 1.3 : CONFIG.NODE_WIDTH_MULTIPLIER;\n        const height = isParent ? CONFIG.NODE_HEIGHT * 1.4 : CONFIG.NODE_HEIGHT;\n        const yOffset = isParent ? -40 : -30;\n        if (isParent) {\n          g.append(\"rect\")\n            .attr(\"width\", textWidth * widthMultiplier + 10)\n            .attr(\"height\", height + 10)\n            .attr(\"class\", \"bbox-glow\")\n            .attr(\"y\", yOffset - 5)\n            .attr(\"x\", -15)\n            .attr(\"rx\", 8)\n            .attr(\"ry\", 8);\n        }\n\n        const rect = g.append(\"rect\")\n          .attr(\"width\", textWidth * widthMultiplier)\n          .attr(\"height\", height)\n          .attr(\"class\", `bbox ${node.data.strokeClass} ${isParent ? 'parent-node' : ''}`)\n          .attr(\"y\", yOffset)\n          .attr(\"x\", -10);\n\n        const text = g.append(\"text\")\n          .attr(\"class\", `dataText ${node.data.cn} ${isParent ? 'parent-text' : ''}`)\n          .text(node.data.text);\n        // Skip the parent node (it's already the current focus)\n        if (node.id !== \"parent\") {\n          let mouseDownPos = null;\n          let isDragging = false;\n\n          g.addEventListener(\"mousedown\", (e) => {\n            mouseDownPos = { x: e.clientX, y: e.clientY };\n            isDragging = false;\n          });\n\n          g.addEventListener(\"mousemove\", (e) => {\n            if (mouseDownPos) {\n              const dx = e.clientX - mouseDownPos.x;\n              const dy = e.clientY - mouseDownPos.y;\n              const distance = Math.sqrt(dx * dx + dy * dy);\n\n              // If moved more than 5 pixels, it's a drag\n              if (distance > 5) {\n                isDragging = true;\n              }\n            }\n          });\n\n          g.addEventListener(\"mouseup\", async (e) => {\n            // Only navigate if it was a click (not a drag)\n            if (mouseDownPos && !isDragging) {\n              await this.navigateToTheorem(node.data.text);\n            }\n            mouseDownPos = null;\n            isDragging = false;\n          });\n\n          // Add visual feedback on hover\n          g.addEventListener(\"mouseenter\", () => {\n            rect.attr(\"class\", `bbox ${node.data.strokeClass} hovered`);\n            g.style.cursor = \"pointer\";\n          });\n\n          g.addEventListener(\"mouseleave\", () => {\n            rect.attr(\"class\", `bbox ${node.data.strokeClass}`);\n            g.style.cursor = \"default\";\n          });\n        }\n\n        return g;\n      })\n      .placeNode((nodeUI, pos) => {\n        nodeUI.attr(\"transform\", `translate(${pos.x}, ${pos.y})`);\n      });\n\n    graphics\n      .link((link) => {\n        return Viva.Graph.svg(\"path\")\n          .attr(\"stroke\", \"gray\")\n          .attr(\"stroke-width\", \"3\")\n          .attr(\"class\", link.data.cn);\n      })\n      .placeLink((linkUI, fromPos, toPos) => {\n        const pathData = `M${fromPos.x},${fromPos.y}L${toPos.x},${toPos.y}`;\n        linkUI.attr(\"d\", pathData);\n      });\n\n    return graphics;\n  }\n\n  createLayout() {\n    const nodeCount = this.graph.getNodesCount();\n    const springLength =\n      nodeCount > CONFIG.GRAPH_SPRING_LENGTH.THRESHOLD\n        ? CONFIG.GRAPH_SPRING_LENGTH.EXTENDED\n        : CONFIG.GRAPH_SPRING_LENGTH.DEFAULT;\n\n    return Viva.Graph.Layout.forceDirected(this.graph, {\n      springLength,\n      ...CONFIG.GRAPH_LAYOUT,\n    });\n  }\n\n  showLoading(show) {\n    this.elements.loading.innerHTML = show ? CONFIG.MESSAGES.LOADING : \"\";\n  }\n\n  showEmptyState(message) {\n    const emptyDiv = document.createElement(\"div\");\n    emptyDiv.className = \"empty-container\";\n    emptyDiv.textContent = message;\n    this.elements.graphDiv.appendChild(emptyDiv);\n  }\n\n  showError(message) {\n    this.showLoading(false);\n    this.showEmptyState(message);\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const app = new TheoremGraphApp();\n  app.init();\n  window.theoremApp = app;\n  console.log('Theorem Graph App loaded. Use theoremApp.clearCache() to clear cache.');\n});\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}